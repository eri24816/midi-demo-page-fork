var _f=Object.defineProperty;var yf=(n,e,t)=>e in n?_f(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var he=(n,e,t)=>yf(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var oc={};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sa(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Ae={},fs=[],Xt=()=>{},bf=()=>!1,Fi=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),ra=n=>n.startsWith("onUpdate:"),ut=Object.assign,ia=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},vf=Object.prototype.hasOwnProperty,xe=(n,e)=>vf.call(n,e),le=Array.isArray,ds=n=>yr(n)==="[object Map]",Bi=n=>yr(n)==="[object Set]",ac=n=>yr(n)==="[object Date]",de=n=>typeof n=="function",Je=n=>typeof n=="string",Vt=n=>typeof n=="symbol",Fe=n=>n!==null&&typeof n=="object",Ml=n=>(Fe(n)||de(n))&&de(n.then)&&de(n.catch),Nl=Object.prototype.toString,yr=n=>Nl.call(n),wf=n=>yr(n).slice(8,-1),Ol=n=>yr(n)==="[object Object]",oa=n=>Je(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,qs=sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Li=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},xf=/-(\w)/g,Sn=Li(n=>n.replace(xf,(e,t)=>t?t.toUpperCase():"")),Tf=/\B([A-Z])/g,An=Li(n=>n.replace(Tf,"-$1").toLowerCase()),Rl=Li(n=>n.charAt(0).toUpperCase()+n.slice(1)),lo=Li(n=>n?`on${Rl(n)}`:""),vn=(n,e)=>!Object.is(n,e),Yr=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Dl=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},Sf=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let cc;const Vi=()=>cc||(cc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof oc<"u"?oc:{});function aa(n){if(le(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=Je(s)?Cf(s):aa(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Je(n)||Fe(n))return n}const kf=/;(?![^(]*\))/g,If=/:([^]+)/,Ef=/\/\*[^]*?\*\//g;function Cf(n){const e={};return n.replace(Ef,"").split(kf).forEach(t=>{if(t){const s=t.split(If);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function br(n){let e="";if(Je(n))e=n;else if(le(n))for(let t=0;t<n.length;t++){const s=br(n[t]);s&&(e+=s+" ")}else if(Fe(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Af="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mf=sa(Af);function Pl(n){return!!n||n===""}function Nf(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=Ui(n[s],e[s]);return t}function Ui(n,e){if(n===e)return!0;let t=ac(n),s=ac(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=Vt(n),s=Vt(e),t||s)return n===e;if(t=le(n),s=le(e),t||s)return t&&s?Nf(n,e):!1;if(t=Fe(n),s=Fe(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ui(n[o],e[o]))return!1}}return String(n)===String(e)}function Fl(n,e){return n.findIndex(t=>Ui(t,e))}const Bl=n=>!!(n&&n.__v_isRef===!0),Ut=n=>Je(n)?n:n==null?"":le(n)||Fe(n)&&(n.toString===Nl||!de(n.toString))?Bl(n)?Ut(n.value):JSON.stringify(n,Ll,2):String(n),Ll=(n,e)=>Bl(e)?Ll(n,e.value):ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[uo(s,i)+" =>"]=r,t),{})}:Bi(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>uo(t))}:Vt(e)?uo(e):Fe(e)&&!le(e)&&!Ol(e)?String(e):e,uo=(n,e="")=>{var t;return Vt(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dt;class Vl{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!e&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=dt;try{return dt=this,e()}finally{dt=t}}}on(){dt=this}off(){dt=this.parent}stop(e){if(this._active){this._active=!1;let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(this.effects.length=0,t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ul(n){return new Vl(n)}function $l(){return dt}function Of(n,e=!1){dt&&dt.cleanups.push(n)}let Ne;const ho=new WeakSet;class ql{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ho.has(this)&&(ho.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,lc(this),Gl(this);const e=Ne,t=Bt;Ne=this,Bt=!0;try{return this.fn()}finally{Hl(this),Ne=e,Bt=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ua(e);this.deps=this.depsTail=void 0,lc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ho.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mo(this)&&this.run()}get dirty(){return Mo(this)}}let Wl=0,Ws,js;function jl(n,e=!1){if(n.flags|=8,e){n.next=js,js=n;return}n.next=Ws,Ws=n}function ca(){Wl++}function la(){if(--Wl>0)return;if(js){let e=js;for(js=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Ws;){let e=Ws;for(Ws=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function Gl(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Hl(n){let e,t=n.depsTail,s=t;for(;s;){const r=s.prevDep;s.version===-1?(s===t&&(t=r),ua(s),Rf(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=e,n.depsTail=t}function Mo(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function zl(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Qs))return;n.globalVersion=Qs;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Mo(n)){n.flags&=-3;return}const t=Ne,s=Bt;Ne=n,Bt=!0;try{Gl(n);const r=n.fn(n._value);(e.version===0||vn(r,n._value))&&(n._value=r,e.version++)}catch(r){throw e.version++,r}finally{Ne=t,Bt=s,Hl(n),n.flags&=-3}}function ua(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s,!s&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)ua(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Rf(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let Bt=!0;const Yl=[];function Mn(){Yl.push(Bt),Bt=!1}function Nn(){const n=Yl.pop();Bt=n===void 0?!0:n}function lc(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Ne;Ne=void 0;try{e()}finally{Ne=t}}}let Qs=0;class Df{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ha{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ne||!Bt||Ne===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ne)t=this.activeLink=new Df(Ne,this),Ne.deps?(t.prevDep=Ne.depsTail,Ne.depsTail.nextDep=t,Ne.depsTail=t):Ne.deps=Ne.depsTail=t,Zl(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=Ne.depsTail,t.nextDep=void 0,Ne.depsTail.nextDep=t,Ne.depsTail=t,Ne.deps===t&&(Ne.deps=s)}return t}trigger(e){this.version++,Qs++,this.notify(e)}notify(e){ca();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{la()}}}function Zl(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Zl(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const si=new WeakMap,Un=Symbol(""),No=Symbol(""),er=Symbol("");function at(n,e,t){if(Bt&&Ne){let s=si.get(n);s||si.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new ha),r.map=s,r.key=t),r.track()}}function on(n,e,t,s,r,i){const o=si.get(n);if(!o){Qs++;return}const a=c=>{c&&c.trigger()};if(ca(),e==="clear")o.forEach(a);else{const c=le(n),u=c&&oa(t);if(c&&t==="length"){const l=Number(s);o.forEach((h,m)=>{(m==="length"||m===er||!Vt(m)&&m>=l)&&a(h)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(er)),e){case"add":c?u&&a(o.get("length")):(a(o.get(Un)),ds(n)&&a(o.get(No)));break;case"delete":c||(a(o.get(Un)),ds(n)&&a(o.get(No)));break;case"set":ds(n)&&a(o.get(Un));break}}la()}function Pf(n,e){const t=si.get(n);return t&&t.get(e)}function rs(n){const e=ve(n);return e===n?e:(at(e,"iterate",er),Ot(n)?e:e.map(ct))}function $i(n){return at(n=ve(n),"iterate",er),n}const Ff={__proto__:null,[Symbol.iterator](){return fo(this,Symbol.iterator,ct)},concat(...n){return rs(this).concat(...n.map(e=>le(e)?rs(e):e))},entries(){return fo(this,"entries",n=>(n[1]=ct(n[1]),n))},every(n,e){return nn(this,"every",n,e,void 0,arguments)},filter(n,e){return nn(this,"filter",n,e,t=>t.map(ct),arguments)},find(n,e){return nn(this,"find",n,e,ct,arguments)},findIndex(n,e){return nn(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return nn(this,"findLast",n,e,ct,arguments)},findLastIndex(n,e){return nn(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return nn(this,"forEach",n,e,void 0,arguments)},includes(...n){return po(this,"includes",n)},indexOf(...n){return po(this,"indexOf",n)},join(n){return rs(this).join(n)},lastIndexOf(...n){return po(this,"lastIndexOf",n)},map(n,e){return nn(this,"map",n,e,void 0,arguments)},pop(){return Ds(this,"pop")},push(...n){return Ds(this,"push",n)},reduce(n,...e){return uc(this,"reduce",n,e)},reduceRight(n,...e){return uc(this,"reduceRight",n,e)},shift(){return Ds(this,"shift")},some(n,e){return nn(this,"some",n,e,void 0,arguments)},splice(...n){return Ds(this,"splice",n)},toReversed(){return rs(this).toReversed()},toSorted(n){return rs(this).toSorted(n)},toSpliced(...n){return rs(this).toSpliced(...n)},unshift(...n){return Ds(this,"unshift",n)},values(){return fo(this,"values",ct)}};function fo(n,e,t){const s=$i(n),r=s[e]();return s!==n&&!Ot(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=t(i.value)),i}),r}const Bf=Array.prototype;function nn(n,e,t,s,r,i){const o=$i(n),a=o!==n&&!Ot(n),c=o[e];if(c!==Bf[e]){const h=c.apply(n,i);return a?ct(h):h}let u=t;o!==n&&(a?u=function(h,m){return t.call(this,ct(h),m,n)}:t.length>2&&(u=function(h,m){return t.call(this,h,m,n)}));const l=c.call(o,u,s);return a&&r?r(l):l}function uc(n,e,t,s){const r=$i(n);let i=t;return r!==n&&(Ot(n)?t.length>3&&(i=function(o,a,c){return t.call(this,o,a,c,n)}):i=function(o,a,c){return t.call(this,o,ct(a),c,n)}),r[e](i,...s)}function po(n,e,t){const s=ve(n);at(s,"iterate",er);const r=s[e](...t);return(r===-1||r===!1)&&pa(t[0])?(t[0]=ve(t[0]),s[e](...t)):r}function Ds(n,e,t=[]){Mn(),ca();const s=ve(n)[e].apply(n,t);return la(),Nn(),s}const Lf=sa("__proto__,__v_isRef,__isVue"),Xl=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Vt));function Vf(n){Vt(n)||(n=String(n));const e=ve(this);return at(e,"has",n),e.hasOwnProperty(n)}class Kl{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){if(t==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?Zf:tu:i?eu:Ql).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=le(e);if(!r){let c;if(o&&(c=Ff[t]))return c;if(t==="hasOwnProperty")return Vf}const a=Reflect.get(e,t,He(e)?e:s);return(Vt(t)?Xl.has(t):Lf(t))||(r||at(e,"get",t),i)?a:He(a)?o&&oa(t)?a:a.value:Fe(a)?r?nu(a):qi(a):a}}class Jl extends Kl{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const c=Gn(i);if(!Ot(s)&&!Gn(s)&&(i=ve(i),s=ve(s)),!le(e)&&He(i)&&!He(s))return c?!1:(i.value=s,!0)}const o=le(e)&&oa(t)?Number(t)<e.length:xe(e,t),a=Reflect.set(e,t,s,He(e)?e:r);return e===ve(r)&&(o?vn(s,i)&&on(e,"set",t,s):on(e,"add",t,s)),a}deleteProperty(e,t){const s=xe(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&on(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!Vt(t)||!Xl.has(t))&&at(e,"has",t),s}ownKeys(e){return at(e,"iterate",le(e)?"length":Un),Reflect.ownKeys(e)}}class Uf extends Kl{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const $f=new Jl,qf=new Uf,Wf=new Jl(!0);const Oo=n=>n,Dr=n=>Reflect.getPrototypeOf(n);function jf(n,e,t){return function(...s){const r=this.__v_raw,i=ve(r),o=ds(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=r[n](...s),l=t?Oo:e?Ro:ct;return!e&&at(i,"iterate",c?No:Un),{next(){const{value:h,done:m}=u.next();return m?{value:h,done:m}:{value:a?[l(h[0]),l(h[1])]:l(h),done:m}},[Symbol.iterator](){return this}}}}function Pr(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Gf(n,e){const t={get(r){const i=this.__v_raw,o=ve(i),a=ve(r);n||(vn(r,a)&&at(o,"get",r),at(o,"get",a));const{has:c}=Dr(o),u=e?Oo:n?Ro:ct;if(c.call(o,r))return u(i.get(r));if(c.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!n&&at(ve(r),"iterate",Un),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=ve(i),a=ve(r);return n||(vn(r,a)&&at(o,"has",r),at(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,c=ve(a),u=e?Oo:n?Ro:ct;return!n&&at(c,"iterate",Un),a.forEach((l,h)=>r.call(i,u(l),u(h),o))}};return ut(t,n?{add:Pr("add"),set:Pr("set"),delete:Pr("delete"),clear:Pr("clear")}:{add(r){!e&&!Ot(r)&&!Gn(r)&&(r=ve(r));const i=ve(this);return Dr(i).has.call(i,r)||(i.add(r),on(i,"add",r,r)),this},set(r,i){!e&&!Ot(i)&&!Gn(i)&&(i=ve(i));const o=ve(this),{has:a,get:c}=Dr(o);let u=a.call(o,r);u||(r=ve(r),u=a.call(o,r));const l=c.call(o,r);return o.set(r,i),u?vn(i,l)&&on(o,"set",r,i):on(o,"add",r,i),this},delete(r){const i=ve(this),{has:o,get:a}=Dr(i);let c=o.call(i,r);c||(r=ve(r),c=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return c&&on(i,"delete",r,void 0),u},clear(){const r=ve(this),i=r.size!==0,o=r.clear();return i&&on(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=jf(r,n,e)}),t}function fa(n,e){const t=Gf(n,e);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(xe(t,r)&&r in s?t:s,r,i)}const Hf={get:fa(!1,!1)},zf={get:fa(!1,!0)},Yf={get:fa(!0,!1)};const Ql=new WeakMap,eu=new WeakMap,tu=new WeakMap,Zf=new WeakMap;function Xf(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kf(n){return n.__v_skip||!Object.isExtensible(n)?0:Xf(wf(n))}function qi(n){return Gn(n)?n:da(n,!1,$f,Hf,Ql)}function Jf(n){return da(n,!1,Wf,zf,eu)}function nu(n){return da(n,!0,qf,Yf,tu)}function da(n,e,t,s,r){if(!Fe(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=Kf(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function wn(n){return Gn(n)?wn(n.__v_raw):!!(n&&n.__v_isReactive)}function Gn(n){return!!(n&&n.__v_isReadonly)}function Ot(n){return!!(n&&n.__v_isShallow)}function pa(n){return n?!!n.__v_raw:!1}function ve(n){const e=n&&n.__v_raw;return e?ve(e):n}function ma(n){return!xe(n,"__v_skip")&&Object.isExtensible(n)&&Dl(n,"__v_skip",!0),n}const ct=n=>Fe(n)?qi(n):n,Ro=n=>Fe(n)?nu(n):n;function He(n){return n?n.__v_isRef===!0:!1}function Ge(n){return Qf(n,!1)}function Qf(n,e){return He(n)?n:new ed(n,e)}class ed{constructor(e,t){this.dep=new ha,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ve(e),this._value=t?e:ct(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Ot(e)||Gn(e);e=s?e:ve(e),vn(e,t)&&(this._rawValue=e,this._value=s?e:ct(e),this.dep.trigger())}}function ps(n){return He(n)?n.value:n}const td={get:(n,e,t)=>e==="__v_raw"?n:ps(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return He(r)&&!He(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function su(n){return wn(n)?n:new Proxy(n,td)}function nd(n){const e=le(n)?new Array(n.length):{};for(const t in n)e[t]=rd(n,t);return e}class sd{constructor(e,t,s){this._object=e,this._key=t,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Pf(ve(this._object),this._key)}}function rd(n,e,t){const s=n[e];return He(s)?s:new sd(n,e,t)}class id{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new ha(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return jl(this,!0),!0}get value(){const e=this.dep.track();return zl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function od(n,e,t=!1){let s,r;return de(n)?s=n:(s=n.get,r=n.set),new id(s,r,t)}const Fr={},ri=new WeakMap;let Bn;function ad(n,e=!1,t=Bn){if(t){let s=ri.get(t);s||ri.set(t,s=[]),s.push(n)}}function cd(n,e,t=Ae){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=t,u=I=>r?I:Ot(I)||r===!1||r===0?an(I,1):an(I);let l,h,m,p,y=!1,b=!1;if(He(n)?(h=()=>n.value,y=Ot(n)):wn(n)?(h=()=>u(n),y=!0):le(n)?(b=!0,y=n.some(I=>wn(I)||Ot(I)),h=()=>n.map(I=>{if(He(I))return I.value;if(wn(I))return u(I);if(de(I))return c?c(I,2):I()})):de(n)?e?h=c?()=>c(n,2):n:h=()=>{if(m){Mn();try{m()}finally{Nn()}}const I=Bn;Bn=l;try{return c?c(n,3,[p]):n(p)}finally{Bn=I}}:h=Xt,e&&r){const I=h,_=r===!0?1/0:r;h=()=>an(I(),_)}const w=$l(),S=()=>{l.stop(),w&&w.active&&ia(w.effects,l)};if(i&&e){const I=e;e=(..._)=>{I(..._),S()}}let O=b?new Array(n.length).fill(Fr):Fr;const F=I=>{if(!(!(l.flags&1)||!l.dirty&&!I))if(e){const _=l.run();if(r||y||(b?_.some((k,T)=>vn(k,O[T])):vn(_,O))){m&&m();const k=Bn;Bn=l;try{const T=[_,O===Fr?void 0:b&&O[0]===Fr?[]:O,p];c?c(e,3,T):e(...T),O=_}finally{Bn=k}}}else l.run()};return a&&a(F),l=new ql(h),l.scheduler=o?()=>o(F,!1):F,p=I=>ad(I,!1,l),m=l.onStop=()=>{const I=ri.get(l);if(I){if(c)c(I,4);else for(const _ of I)_();ri.delete(l)}},e?s?F(!0):O=l.run():o?o(F.bind(null,!0),!0):l.run(),S.pause=l.pause.bind(l),S.resume=l.resume.bind(l),S.stop=S,S}function an(n,e=1/0,t){if(e<=0||!Fe(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,He(n))an(n.value,e,t);else if(le(n))for(let s=0;s<n.length;s++)an(n[s],e,t);else if(Bi(n)||ds(n))n.forEach(s=>{an(s,e,t)});else if(Ol(n)){for(const s in n)an(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&an(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vr(n,e,t,s){try{return s?n(...s):n()}catch(r){Wi(r,e,t)}}function Kt(n,e,t,s){if(de(n)){const r=vr(n,e,t,s);return r&&Ml(r)&&r.catch(i=>{Wi(i,e,t)}),r}if(le(n)){const r=[];for(let i=0;i<n.length;i++)r.push(Kt(n[i],e,t,s));return r}}function Wi(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ae;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const l=a.ec;if(l){for(let h=0;h<l.length;h++)if(l[h](n,c,u)===!1)return}a=a.parent}if(i){Mn(),vr(i,null,10,[n,c,u]),Nn();return}}ld(n,t,r,s,o)}function ld(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}const pt=[];let Yt=-1;const ms=[];let _n=null,as=0;const ru=Promise.resolve();let ii=null;function iu(n){const e=ii||ru;return n?e.then(this?n.bind(this):n):e}function ud(n){let e=Yt+1,t=pt.length;for(;e<t;){const s=e+t>>>1,r=pt[s],i=tr(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function ga(n){if(!(n.flags&1)){const e=tr(n),t=pt[pt.length-1];!t||!(n.flags&2)&&e>=tr(t)?pt.push(n):pt.splice(ud(e),0,n),n.flags|=1,ou()}}function ou(){ii||(ii=ru.then(cu))}function hd(n){le(n)?ms.push(...n):_n&&n.id===-1?_n.splice(as+1,0,n):n.flags&1||(ms.push(n),n.flags|=1),ou()}function hc(n,e,t=Yt+1){for(;t<pt.length;t++){const s=pt[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;pt.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function au(n){if(ms.length){const e=[...new Set(ms)].sort((t,s)=>tr(t)-tr(s));if(ms.length=0,_n){_n.push(...e);return}for(_n=e,as=0;as<_n.length;as++){const t=_n[as];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}_n=null,as=0}}const tr=n=>n.id==null?n.flags&2?-1:1/0:n.id;function cu(n){try{for(Yt=0;Yt<pt.length;Yt++){const e=pt[Yt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),vr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Yt<pt.length;Yt++){const e=pt[Yt];e&&(e.flags&=-2)}Yt=-1,pt.length=0,au(),ii=null,(pt.length||ms.length)&&cu()}}let it=null,lu=null;function oi(n){const e=it;return it=n,lu=n&&n.type.__scopeId||null,e}function Do(n,e=it,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&vc(-1);const i=oi(e);let o;try{o=n(...r)}finally{oi(i),s._d&&vc(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function fd(n,e){if(it===null)return n;const t=Yi(it),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=Ae]=e[r];i&&(de(i)&&(i={mounted:i,updated:i}),i.deep&&an(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function Pn(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(Mn(),Kt(c,t,8,[n.el,a,n,e]),Nn())}}const dd=Symbol("_vte"),pd=n=>n.__isTeleport;function _a(n,e){n.shapeFlag&6&&n.component?(n.transition=e,_a(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function On(n,e){return de(n)?ut({name:n.name},e,{setup:n}):n}function uu(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function ai(n,e,t,s,r=!1){if(le(n)){n.forEach((y,b)=>ai(y,e&&(le(e)?e[b]:e),t,s,r));return}if(gs(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ai(n,e,t,s.component.subTree);return}const i=s.shapeFlag&4?Yi(s.component):s.el,o=r?null:i,{i:a,r:c}=n,u=e&&e.r,l=a.refs===Ae?a.refs={}:a.refs,h=a.setupState,m=ve(h),p=h===Ae?()=>!1:y=>xe(m,y);if(u!=null&&u!==c&&(Je(u)?(l[u]=null,p(u)&&(h[u]=null)):He(u)&&(u.value=null)),de(c))vr(c,a,12,[o,l]);else{const y=Je(c),b=He(c);if(y||b){const w=()=>{if(n.f){const S=y?p(c)?h[c]:l[c]:c.value;r?le(S)&&ia(S,i):le(S)?S.includes(i)||S.push(i):y?(l[c]=[i],p(c)&&(h[c]=l[c])):(c.value=[i],n.k&&(l[n.k]=c.value))}else y?(l[c]=o,p(c)&&(h[c]=o)):b&&(c.value=o,n.k&&(l[n.k]=o))};o?(w.id=-1,kt(w,t)):w()}}}Vi().requestIdleCallback;Vi().cancelIdleCallback;const gs=n=>!!n.type.__asyncLoader,hu=n=>n.type.__isKeepAlive;function md(n,e){fu(n,"a",e)}function gd(n,e){fu(n,"da",e)}function fu(n,e,t=lt){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(ji(e,s,t),t){let r=t.parent;for(;r&&r.parent;)hu(r.parent.vnode)&&_d(s,e,t,r),r=r.parent}}function _d(n,e,t,s){const r=ji(e,n,s,!0);ya(()=>{ia(s[e],r)},t)}function ji(n,e,t=lt,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{Mn();const a=wr(t),c=Kt(e,t,n,o);return a(),Nn(),c});return s?r.unshift(i):r.push(i),i}}const un=n=>(e,t=lt)=>{(!rr||n==="sp")&&ji(n,(...s)=>e(...s),t)},yd=un("bm"),Gi=un("m"),bd=un("bu"),vd=un("u"),wd=un("bum"),ya=un("um"),xd=un("sp"),Td=un("rtg"),Sd=un("rtc");function kd(n,e=lt){ji("ec",n,e)}const Id=Symbol.for("v-ndc");function ba(n,e,t,s){let r;const i=t,o=le(n);if(o||Je(n)){const a=o&&wn(n);let c=!1;a&&(c=!Ot(n),n=$i(n)),r=new Array(n.length);for(let u=0,l=n.length;u<l;u++)r[u]=e(c?ct(n[u]):n[u],u,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(Fe(n))if(n[Symbol.iterator])r=Array.from(n,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const l=a[c];r[c]=e(n[l],l,c,i)}}else r=[];return r}function Ed(n,e,t={},s,r){if(it.ce||it.parent&&gs(it.parent)&&it.parent.ce)return Oe(),Vo(mt,null,[Xe("slot",t,s)],64);let i=n[e];i&&i._c&&(i._d=!1),Oe();const o=i&&du(i(t)),a=t.key||o&&o.key,c=Vo(mt,{key:(a&&!Vt(a)?a:`_${e}`)+""},o||[],o&&n._===1?64:-2);return i&&i._c&&(i._d=!0),c}function du(n){return n.some(e=>wa(e)?!(e.type===kn||e.type===mt&&!du(e.children)):!0)?n:null}const Po=n=>n?Du(n)?Yi(n):Po(n.parent):null,Gs=ut(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Po(n.parent),$root:n=>Po(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>mu(n),$forceUpdate:n=>n.f||(n.f=()=>{ga(n.update)}),$nextTick:n=>n.n||(n.n=iu.bind(n.proxy)),$watch:n=>Xd.bind(n)}),mo=(n,e)=>n!==Ae&&!n.__isScriptSetup&&xe(n,e),Cd={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let u;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(mo(s,e))return o[e]=1,s[e];if(r!==Ae&&xe(r,e))return o[e]=2,r[e];if((u=n.propsOptions[0])&&xe(u,e))return o[e]=3,i[e];if(t!==Ae&&xe(t,e))return o[e]=4,t[e];Fo&&(o[e]=0)}}const l=Gs[e];let h,m;if(l)return e==="$attrs"&&at(n.attrs,"get",""),l(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Ae&&xe(t,e))return o[e]=4,t[e];if(m=c.config.globalProperties,xe(m,e))return m[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return mo(r,e)?(r[e]=t,!0):s!==Ae&&xe(s,e)?(s[e]=t,!0):xe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==Ae&&xe(n,o)||mo(e,o)||(a=i[0])&&xe(a,o)||xe(s,o)||xe(Gs,o)||xe(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:xe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function fc(n){return le(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Fo=!0;function Ad(n){const e=mu(n),t=n.proxy,s=n.ctx;Fo=!1,e.beforeCreate&&dc(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:u,created:l,beforeMount:h,mounted:m,beforeUpdate:p,updated:y,activated:b,deactivated:w,beforeDestroy:S,beforeUnmount:O,destroyed:F,unmounted:I,render:_,renderTracked:k,renderTriggered:T,errorCaptured:x,serverPrefetch:L,expose:P,inheritAttrs:q,components:D,directives:X,filters:K}=e;if(u&&Md(u,s,null),o)for(const G in o){const J=o[G];de(J)&&(s[G]=J.bind(t))}if(r){const G=r.call(t,t);Fe(G)&&(n.data=qi(G))}if(Fo=!0,i)for(const G in i){const J=i[G],ie=de(J)?J.bind(t,t):de(J.get)?J.get.bind(t,t):Xt,ae=!de(J)&&de(J.set)?J.set.bind(t):Xt,ee=Zi({get:ie,set:ae});Object.defineProperty(s,G,{enumerable:!0,configurable:!0,get:()=>ee.value,set:oe=>ee.value=oe})}if(a)for(const G in a)pu(a[G],s,t,G);if(c){const G=de(c)?c.call(t):c;Reflect.ownKeys(G).forEach(J=>{Fd(J,G[J])})}l&&dc(l,n,"c");function Y(G,J){le(J)?J.forEach(ie=>G(ie.bind(t))):J&&G(J.bind(t))}if(Y(yd,h),Y(Gi,m),Y(bd,p),Y(vd,y),Y(md,b),Y(gd,w),Y(kd,x),Y(Sd,k),Y(Td,T),Y(wd,O),Y(ya,I),Y(xd,L),le(P))if(P.length){const G=n.exposed||(n.exposed={});P.forEach(J=>{Object.defineProperty(G,J,{get:()=>t[J],set:ie=>t[J]=ie})})}else n.exposed||(n.exposed={});_&&n.render===Xt&&(n.render=_),q!=null&&(n.inheritAttrs=q),D&&(n.components=D),X&&(n.directives=X),L&&uu(n)}function Md(n,e,t=Xt){le(n)&&(n=Bo(n));for(const s in n){const r=n[s];let i;Fe(r)?"default"in r?i=Hs(r.from||s,r.default,!0):i=Hs(r.from||s):i=Hs(r),He(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function dc(n,e,t){Kt(le(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function pu(n,e,t,s){let r=s.includes(".")?Au(t,s):()=>t[s];if(Je(n)){const i=e[n];de(i)&&xn(r,i)}else if(de(n))xn(r,n.bind(t));else if(Fe(n))if(le(n))n.forEach(i=>pu(i,e,t,s));else{const i=de(n.handler)?n.handler.bind(t):e[n.handler];de(i)&&xn(r,i,n)}}function mu(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(u=>ci(c,u,o,!0)),ci(c,e,o)),Fe(e)&&i.set(e,c),c}function ci(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&ci(n,i,t,!0),r&&r.forEach(o=>ci(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=Nd[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const Nd={data:pc,props:mc,emits:mc,methods:$s,computed:$s,beforeCreate:ft,created:ft,beforeMount:ft,mounted:ft,beforeUpdate:ft,updated:ft,beforeDestroy:ft,beforeUnmount:ft,destroyed:ft,unmounted:ft,activated:ft,deactivated:ft,errorCaptured:ft,serverPrefetch:ft,components:$s,directives:$s,watch:Rd,provide:pc,inject:Od};function pc(n,e){return e?n?function(){return ut(de(n)?n.call(this,this):n,de(e)?e.call(this,this):e)}:e:n}function Od(n,e){return $s(Bo(n),Bo(e))}function Bo(n){if(le(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ft(n,e){return n?[...new Set([].concat(n,e))]:e}function $s(n,e){return n?ut(Object.create(null),n,e):e}function mc(n,e){return n?le(n)&&le(e)?[...new Set([...n,...e])]:ut(Object.create(null),fc(n),fc(e??{})):e}function Rd(n,e){if(!n)return e;if(!e)return n;const t=ut(Object.create(null),n);for(const s in e)t[s]=ft(n[s],e[s]);return t}function gu(){return{app:null,config:{isNativeTag:bf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dd=0;function Pd(n,e){return function(s,r=null){de(s)||(s=ut({},s)),r!=null&&!Fe(r)&&(r=null);const i=gu(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:Dd++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:gp,get config(){return i.config},set config(l){},use(l,...h){return o.has(l)||(l&&de(l.install)?(o.add(l),l.install(u,...h)):de(l)&&(o.add(l),l(u,...h))),u},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),u},component(l,h){return h?(i.components[l]=h,u):i.components[l]},directive(l,h){return h?(i.directives[l]=h,u):i.directives[l]},mount(l,h,m){if(!c){const p=u._ceVNode||Xe(s,r);return p.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),n(p,l,m),c=!0,u._container=l,l.__vue_app__=u,Yi(p.component)}},onUnmount(l){a.push(l)},unmount(){c&&(Kt(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(l,h){return i.provides[l]=h,u},runWithContext(l){const h=$n;$n=u;try{return l()}finally{$n=h}}};return u}}let $n=null;function Fd(n,e){if(lt){let t=lt.provides;const s=lt.parent&&lt.parent.provides;s===t&&(t=lt.provides=Object.create(s)),t[n]=e}}function Hs(n,e,t=!1){const s=lt||it;if(s||$n){const r=$n?$n._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&de(e)?e.call(s&&s.proxy):e}}function Bd(){return!!(lt||it||$n)}const _u={},yu=()=>Object.create(_u),bu=n=>Object.getPrototypeOf(n)===_u;function Ld(n,e,t,s=!1){const r={},i=yu();n.propsDefaults=Object.create(null),vu(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:Jf(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function Vd(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=ve(r),[c]=n.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const l=n.vnode.dynamicProps;for(let h=0;h<l.length;h++){let m=l[h];if(Hi(n.emitsOptions,m))continue;const p=e[m];if(c)if(xe(i,m))p!==i[m]&&(i[m]=p,u=!0);else{const y=Sn(m);r[y]=Lo(c,a,y,p,n,!1)}else p!==i[m]&&(i[m]=p,u=!0)}}}else{vu(n,e,r,i)&&(u=!0);let l;for(const h in a)(!e||!xe(e,h)&&((l=An(h))===h||!xe(e,l)))&&(c?t&&(t[h]!==void 0||t[l]!==void 0)&&(r[h]=Lo(c,a,h,void 0,n,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!xe(e,h))&&(delete i[h],u=!0)}u&&on(n.attrs,"set","")}function vu(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(qs(c))continue;const u=e[c];let l;r&&xe(r,l=Sn(c))?!i||!i.includes(l)?t[l]=u:(a||(a={}))[l]=u:Hi(n.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=ve(t),u=a||Ae;for(let l=0;l<i.length;l++){const h=i[l];t[h]=Lo(r,c,h,u[h],n,!xe(u,h))}}return o}function Lo(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=xe(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&de(c)){const{propsDefaults:u}=r;if(t in u)s=u[t];else{const l=wr(r);s=u[t]=c.call(null,e),l()}}else s=c;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===An(t))&&(s=!0))}return s}const Ud=new WeakMap;function wu(n,e,t=!1){const s=t?Ud:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!de(n)){const l=h=>{c=!0;const[m,p]=wu(h,e,!0);ut(o,m),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}if(!i&&!c)return Fe(n)&&s.set(n,fs),fs;if(le(i))for(let l=0;l<i.length;l++){const h=Sn(i[l]);gc(h)&&(o[h]=Ae)}else if(i)for(const l in i){const h=Sn(l);if(gc(h)){const m=i[l],p=o[h]=le(m)||de(m)?{type:m}:ut({},m),y=p.type;let b=!1,w=!0;if(le(y))for(let S=0;S<y.length;++S){const O=y[S],F=de(O)&&O.name;if(F==="Boolean"){b=!0;break}else F==="String"&&(w=!1)}else b=de(y)&&y.name==="Boolean";p[0]=b,p[1]=w,(b||xe(p,"default"))&&a.push(h)}}const u=[o,a];return Fe(n)&&s.set(n,u),u}function gc(n){return n[0]!=="$"&&!qs(n)}const xu=n=>n[0]==="_"||n==="$stable",va=n=>le(n)?n.map(Zt):[Zt(n)],$d=(n,e,t)=>{if(e._n)return e;const s=Do((...r)=>va(e(...r)),t);return s._c=!1,s},Tu=(n,e,t)=>{const s=n._ctx;for(const r in n){if(xu(r))continue;const i=n[r];if(de(i))e[r]=$d(r,i,s);else if(i!=null){const o=va(i);e[r]=()=>o}}},Su=(n,e)=>{const t=va(e);n.slots.default=()=>t},ku=(n,e,t)=>{for(const s in e)(t||s!=="_")&&(n[s]=e[s])},qd=(n,e,t)=>{const s=n.slots=yu();if(n.vnode.shapeFlag&32){const r=e._;r?(ku(s,e,t),t&&Dl(s,"_",r,!0)):Tu(e,s)}else e&&Su(n,e)},Wd=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=Ae;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:ku(r,e,t):(i=!e.$stable,Tu(e,r)),o=e}else e&&(Su(n,e),o={default:1});if(i)for(const a in r)!xu(a)&&o[a]==null&&delete r[a]},kt=sp;function jd(n){return Gd(n)}function Gd(n,e){const t=Vi();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:l,parentNode:h,nextSibling:m,setScopeId:p=Xt,insertStaticContent:y}=n,b=(E,C,$,R=null,U=null,W=null,z=void 0,j=null,M=!!C.dynamicChildren)=>{if(E===C)return;E&&!Ps(E,C)&&(R=Me(E),oe(E,U,W,!0),E=null),C.patchFlag===-2&&(M=!1,C.dynamicChildren=null);const{type:N,ref:H,shapeFlag:Z}=C;switch(N){case zi:w(E,C,$,R);break;case kn:S(E,C,$,R);break;case _o:E==null&&O(C,$,R,z);break;case mt:D(E,C,$,R,U,W,z,j,M);break;default:Z&1?_(E,C,$,R,U,W,z,j,M):Z&6?X(E,C,$,R,U,W,z,j,M):(Z&64||Z&128)&&N.process(E,C,$,R,U,W,z,j,M,Qe)}H!=null&&U&&ai(H,E&&E.ref,W,C||E,!C)},w=(E,C,$,R)=>{if(E==null)s(C.el=a(C.children),$,R);else{const U=C.el=E.el;C.children!==E.children&&u(U,C.children)}},S=(E,C,$,R)=>{E==null?s(C.el=c(C.children||""),$,R):C.el=E.el},O=(E,C,$,R)=>{[E.el,E.anchor]=y(E.children,C,$,R,E.el,E.anchor)},F=({el:E,anchor:C},$,R)=>{let U;for(;E&&E!==C;)U=m(E),s(E,$,R),E=U;s(C,$,R)},I=({el:E,anchor:C})=>{let $;for(;E&&E!==C;)$=m(E),r(E),E=$;r(C)},_=(E,C,$,R,U,W,z,j,M)=>{C.type==="svg"?z="svg":C.type==="math"&&(z="mathml"),E==null?k(C,$,R,U,W,z,j,M):L(E,C,U,W,z,j,M)},k=(E,C,$,R,U,W,z,j)=>{let M,N;const{props:H,shapeFlag:Z,transition:Q,dirs:re}=E;if(M=E.el=o(E.type,W,H&&H.is,H),Z&8?l(M,E.children):Z&16&&x(E.children,M,null,R,U,go(E,W),z,j),re&&Pn(E,null,R,"created"),T(M,E,E.scopeId,z,R),H){for(const g in H)g!=="value"&&!qs(g)&&i(M,g,null,H[g],W,R);"value"in H&&i(M,"value",null,H.value,W),(N=H.onVnodeBeforeMount)&&Ht(N,R,E)}re&&Pn(E,null,R,"beforeMount");const ue=Hd(U,Q);ue&&Q.beforeEnter(M),s(M,C,$),((N=H&&H.onVnodeMounted)||ue||re)&&kt(()=>{N&&Ht(N,R,E),ue&&Q.enter(M),re&&Pn(E,null,R,"mounted")},U)},T=(E,C,$,R,U)=>{if($&&p(E,$),R)for(let W=0;W<R.length;W++)p(E,R[W]);if(U){let W=U.subTree;if(C===W||Nu(W.type)&&(W.ssContent===C||W.ssFallback===C)){const z=U.vnode;T(E,z,z.scopeId,z.slotScopeIds,U.parent)}}},x=(E,C,$,R,U,W,z,j,M=0)=>{for(let N=M;N<E.length;N++){const H=E[N]=j?yn(E[N]):Zt(E[N]);b(null,H,C,$,R,U,W,z,j)}},L=(E,C,$,R,U,W,z)=>{const j=C.el=E.el;let{patchFlag:M,dynamicChildren:N,dirs:H}=C;M|=E.patchFlag&16;const Z=E.props||Ae,Q=C.props||Ae;let re;if($&&Fn($,!1),(re=Q.onVnodeBeforeUpdate)&&Ht(re,$,C,E),H&&Pn(C,E,$,"beforeUpdate"),$&&Fn($,!0),(Z.innerHTML&&Q.innerHTML==null||Z.textContent&&Q.textContent==null)&&l(j,""),N?P(E.dynamicChildren,N,j,$,R,go(C,U),W):z||J(E,C,j,null,$,R,go(C,U),W,!1),M>0){if(M&16)q(j,Z,Q,$,U);else if(M&2&&Z.class!==Q.class&&i(j,"class",null,Q.class,U),M&4&&i(j,"style",Z.style,Q.style,U),M&8){const ue=C.dynamicProps;for(let g=0;g<ue.length;g++){const f=ue[g],d=Z[f],v=Q[f];(v!==d||f==="value")&&i(j,f,d,v,U,$)}}M&1&&E.children!==C.children&&l(j,C.children)}else!z&&N==null&&q(j,Z,Q,$,U);((re=Q.onVnodeUpdated)||H)&&kt(()=>{re&&Ht(re,$,C,E),H&&Pn(C,E,$,"updated")},R)},P=(E,C,$,R,U,W,z)=>{for(let j=0;j<C.length;j++){const M=E[j],N=C[j],H=M.el&&(M.type===mt||!Ps(M,N)||M.shapeFlag&70)?h(M.el):$;b(M,N,H,null,R,U,W,z,!0)}},q=(E,C,$,R,U)=>{if(C!==$){if(C!==Ae)for(const W in C)!qs(W)&&!(W in $)&&i(E,W,C[W],null,U,R);for(const W in $){if(qs(W))continue;const z=$[W],j=C[W];z!==j&&W!=="value"&&i(E,W,j,z,U,R)}"value"in $&&i(E,"value",C.value,$.value,U)}},D=(E,C,$,R,U,W,z,j,M)=>{const N=C.el=E?E.el:a(""),H=C.anchor=E?E.anchor:a("");let{patchFlag:Z,dynamicChildren:Q,slotScopeIds:re}=C;re&&(j=j?j.concat(re):re),E==null?(s(N,$,R),s(H,$,R),x(C.children||[],$,H,U,W,z,j,M)):Z>0&&Z&64&&Q&&E.dynamicChildren?(P(E.dynamicChildren,Q,$,U,W,z,j),(C.key!=null||U&&C===U.subTree)&&Iu(E,C,!0)):J(E,C,$,H,U,W,z,j,M)},X=(E,C,$,R,U,W,z,j,M)=>{C.slotScopeIds=j,E==null?C.shapeFlag&512?U.ctx.activate(C,$,R,z,M):K(C,$,R,U,W,z,M):ne(E,C,M)},K=(E,C,$,R,U,W,z)=>{const j=E.component=up(E,R,U);if(hu(E)&&(j.ctx.renderer=Qe),hp(j,!1,z),j.asyncDep){if(U&&U.registerDep(j,Y,z),!E.el){const M=j.subTree=Xe(kn);S(null,M,C,$)}}else Y(j,E,C,$,U,W,z)},ne=(E,C,$)=>{const R=C.component=E.component;if(tp(E,C,$))if(R.asyncDep&&!R.asyncResolved){G(R,C,$);return}else R.next=C,R.update();else C.el=E.el,R.vnode=C},Y=(E,C,$,R,U,W,z)=>{const j=()=>{if(E.isMounted){let{next:Z,bu:Q,u:re,parent:ue,vnode:g}=E;{const V=Eu(E);if(V){Z&&(Z.el=g.el,G(E,Z,z)),V.asyncDep.then(()=>{E.isUnmounted||j()});return}}let f=Z,d;Fn(E,!1),Z?(Z.el=g.el,G(E,Z,z)):Z=g,Q&&Yr(Q),(d=Z.props&&Z.props.onVnodeBeforeUpdate)&&Ht(d,ue,Z,g),Fn(E,!0);const v=yc(E),A=E.subTree;E.subTree=v,b(A,v,h(A.el),Me(A),E,U,W),Z.el=v.el,f===null&&np(E,v.el),re&&kt(re,U),(d=Z.props&&Z.props.onVnodeUpdated)&&kt(()=>Ht(d,ue,Z,g),U)}else{let Z;const{el:Q,props:re}=C,{bm:ue,m:g,parent:f,root:d,type:v}=E,A=gs(C);Fn(E,!1),ue&&Yr(ue),!A&&(Z=re&&re.onVnodeBeforeMount)&&Ht(Z,f,C),Fn(E,!0);{d.ce&&d.ce._injectChildStyle(v);const V=E.subTree=yc(E);b(null,V,$,R,E,U,W),C.el=V.el}if(g&&kt(g,U),!A&&(Z=re&&re.onVnodeMounted)){const V=C;kt(()=>Ht(Z,f,V),U)}(C.shapeFlag&256||f&&gs(f.vnode)&&f.vnode.shapeFlag&256)&&E.a&&kt(E.a,U),E.isMounted=!0,C=$=R=null}};E.scope.on();const M=E.effect=new ql(j);E.scope.off();const N=E.update=M.run.bind(M),H=E.job=M.runIfDirty.bind(M);H.i=E,H.id=E.uid,M.scheduler=()=>ga(H),Fn(E,!0),N()},G=(E,C,$)=>{C.component=E;const R=E.vnode.props;E.vnode=C,E.next=null,Vd(E,C.props,R,$),Wd(E,C.children,$),Mn(),hc(E),Nn()},J=(E,C,$,R,U,W,z,j,M=!1)=>{const N=E&&E.children,H=E?E.shapeFlag:0,Z=C.children,{patchFlag:Q,shapeFlag:re}=C;if(Q>0){if(Q&128){ae(N,Z,$,R,U,W,z,j,M);return}else if(Q&256){ie(N,Z,$,R,U,W,z,j,M);return}}re&8?(H&16&&be(N,U,W),Z!==N&&l($,Z)):H&16?re&16?ae(N,Z,$,R,U,W,z,j,M):be(N,U,W,!0):(H&8&&l($,""),re&16&&x(Z,$,R,U,W,z,j,M))},ie=(E,C,$,R,U,W,z,j,M)=>{E=E||fs,C=C||fs;const N=E.length,H=C.length,Z=Math.min(N,H);let Q;for(Q=0;Q<Z;Q++){const re=C[Q]=M?yn(C[Q]):Zt(C[Q]);b(E[Q],re,$,null,U,W,z,j,M)}N>H?be(E,U,W,!0,!1,Z):x(C,$,R,U,W,z,j,M,Z)},ae=(E,C,$,R,U,W,z,j,M)=>{let N=0;const H=C.length;let Z=E.length-1,Q=H-1;for(;N<=Z&&N<=Q;){const re=E[N],ue=C[N]=M?yn(C[N]):Zt(C[N]);if(Ps(re,ue))b(re,ue,$,null,U,W,z,j,M);else break;N++}for(;N<=Z&&N<=Q;){const re=E[Z],ue=C[Q]=M?yn(C[Q]):Zt(C[Q]);if(Ps(re,ue))b(re,ue,$,null,U,W,z,j,M);else break;Z--,Q--}if(N>Z){if(N<=Q){const re=Q+1,ue=re<H?C[re].el:R;for(;N<=Q;)b(null,C[N]=M?yn(C[N]):Zt(C[N]),$,ue,U,W,z,j,M),N++}}else if(N>Q)for(;N<=Z;)oe(E[N],U,W,!0),N++;else{const re=N,ue=N,g=new Map;for(N=ue;N<=Q;N++){const pe=C[N]=M?yn(C[N]):Zt(C[N]);pe.key!=null&&g.set(pe.key,N)}let f,d=0;const v=Q-ue+1;let A=!1,V=0;const B=new Array(v);for(N=0;N<v;N++)B[N]=0;for(N=re;N<=Z;N++){const pe=E[N];if(d>=v){oe(pe,U,W,!0);continue}let _e;if(pe.key!=null)_e=g.get(pe.key);else for(f=ue;f<=Q;f++)if(B[f-ue]===0&&Ps(pe,C[f])){_e=f;break}_e===void 0?oe(pe,U,W,!0):(B[_e-ue]=N+1,_e>=V?V=_e:A=!0,b(pe,C[_e],$,null,U,W,z,j,M),d++)}const ce=A?zd(B):fs;for(f=ce.length-1,N=v-1;N>=0;N--){const pe=ue+N,_e=C[pe],ke=pe+1<H?C[pe+1].el:R;B[N]===0?b(null,_e,$,ke,U,W,z,j,M):A&&(f<0||N!==ce[f]?ee(_e,$,ke,2):f--)}}},ee=(E,C,$,R,U=null)=>{const{el:W,type:z,transition:j,children:M,shapeFlag:N}=E;if(N&6){ee(E.component.subTree,C,$,R);return}if(N&128){E.suspense.move(C,$,R);return}if(N&64){z.move(E,C,$,Qe);return}if(z===mt){s(W,C,$);for(let Z=0;Z<M.length;Z++)ee(M[Z],C,$,R);s(E.anchor,C,$);return}if(z===_o){F(E,C,$);return}if(R!==2&&N&1&&j)if(R===0)j.beforeEnter(W),s(W,C,$),kt(()=>j.enter(W),U);else{const{leave:Z,delayLeave:Q,afterLeave:re}=j,ue=()=>s(W,C,$),g=()=>{Z(W,()=>{ue(),re&&re()})};Q?Q(W,ue,g):g()}else s(W,C,$)},oe=(E,C,$,R=!1,U=!1)=>{const{type:W,props:z,ref:j,children:M,dynamicChildren:N,shapeFlag:H,patchFlag:Z,dirs:Q,cacheIndex:re}=E;if(Z===-2&&(U=!1),j!=null&&ai(j,null,$,E,!0),re!=null&&(C.renderCache[re]=void 0),H&256){C.ctx.deactivate(E);return}const ue=H&1&&Q,g=!gs(E);let f;if(g&&(f=z&&z.onVnodeBeforeUnmount)&&Ht(f,C,E),H&6)fe(E.component,$,R);else{if(H&128){E.suspense.unmount($,R);return}ue&&Pn(E,null,C,"beforeUnmount"),H&64?E.type.remove(E,C,$,Qe,R):N&&!N.hasOnce&&(W!==mt||Z>0&&Z&64)?be(N,C,$,!1,!0):(W===mt&&Z&384||!U&&H&16)&&be(M,C,$),R&&qe(E)}(g&&(f=z&&z.onVnodeUnmounted)||ue)&&kt(()=>{f&&Ht(f,C,E),ue&&Pn(E,null,C,"unmounted")},$)},qe=E=>{const{type:C,el:$,anchor:R,transition:U}=E;if(C===mt){Ye($,R);return}if(C===_o){I(E);return}const W=()=>{r($),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(E.shapeFlag&1&&U&&!U.persisted){const{leave:z,delayLeave:j}=U,M=()=>z($,W);j?j(E.el,W,M):M()}else W()},Ye=(E,C)=>{let $;for(;E!==C;)$=m(E),r(E),E=$;r(C)},fe=(E,C,$)=>{const{bum:R,scope:U,job:W,subTree:z,um:j,m:M,a:N}=E;_c(M),_c(N),R&&Yr(R),U.stop(),W&&(W.flags|=8,oe(z,E,C,$)),j&&kt(j,C),kt(()=>{E.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},be=(E,C,$,R=!1,U=!1,W=0)=>{for(let z=W;z<E.length;z++)oe(E[z],C,$,R,U)},Me=E=>{if(E.shapeFlag&6)return Me(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const C=m(E.anchor||E.el),$=C&&C[dd];return $?m($):C};let se=!1;const rt=(E,C,$)=>{E==null?C._vnode&&oe(C._vnode,null,null,!0):b(C._vnode||null,E,C,null,null,null,$),C._vnode=E,se||(se=!0,hc(),au(),se=!1)},Qe={p:b,um:oe,m:ee,r:qe,mt:K,mc:x,pc:J,pbc:P,n:Me,o:n};return{render:rt,hydrate:void 0,createApp:Pd(rt)}}function go({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Fn({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Hd(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Iu(n,e,t=!1){const s=n.children,r=e.children;if(le(s)&&le(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=yn(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Iu(o,a)),a.type===zi&&(a.el=o.el)}}function zd(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const u=n[s];if(u!==0){if(r=t[t.length-1],n[r]<u){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<u?i=a+1:o=a;u<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function Eu(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Eu(e)}function _c(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Yd=Symbol.for("v-scx"),Zd=()=>Hs(Yd);function xn(n,e,t){return Cu(n,e,t)}function Cu(n,e,t=Ae){const{immediate:s,deep:r,flush:i,once:o}=t,a=ut({},t),c=e&&s||!e&&i!=="post";let u;if(rr){if(i==="sync"){const p=Zd();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=Xt,p.resume=Xt,p.pause=Xt,p}}const l=lt;a.call=(p,y,b)=>Kt(p,l,y,b);let h=!1;i==="post"?a.scheduler=p=>{kt(p,l&&l.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(p,y)=>{y?p():ga(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,l&&(p.id=l.uid,p.i=l))};const m=cd(n,e,a);return rr&&(u?u.push(m):c&&m()),m}function Xd(n,e,t){const s=this.proxy,r=Je(n)?n.includes(".")?Au(s,n):()=>s[n]:n.bind(s,s);let i;de(e)?i=e:(i=e.handler,t=e);const o=wr(this),a=Cu(r,i.bind(s),t);return o(),a}function Au(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const Kd=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Sn(e)}Modifiers`]||n[`${An(e)}Modifiers`];function Jd(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||Ae;let r=t;const i=e.startsWith("update:"),o=i&&Kd(s,e.slice(7));o&&(o.trim&&(r=t.map(l=>Je(l)?l.trim():l)),o.number&&(r=t.map(Sf)));let a,c=s[a=lo(e)]||s[a=lo(Sn(e))];!c&&i&&(c=s[a=lo(An(e))]),c&&Kt(c,n,6,r);const u=s[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Kt(u,n,6,r)}}function Mu(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!de(n)){const c=u=>{const l=Mu(u,e,!0);l&&(a=!0,ut(o,l))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(Fe(n)&&s.set(n,null),null):(le(i)?i.forEach(c=>o[c]=null):ut(o,i),Fe(n)&&s.set(n,o),o)}function Hi(n,e){return!n||!Fi(e)?!1:(e=e.slice(2).replace(/Once$/,""),xe(n,e[0].toLowerCase()+e.slice(1))||xe(n,An(e))||xe(n,e))}function yc(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:l,props:h,data:m,setupState:p,ctx:y,inheritAttrs:b}=n,w=oi(n);let S,O;try{if(t.shapeFlag&4){const I=r||s,_=I;S=Zt(u.call(_,I,l,h,p,m,y)),O=a}else{const I=e;S=Zt(I.length>1?I(h,{attrs:a,slots:o,emit:c}):I(h,null)),O=e.props?a:Qd(a)}}catch(I){zs.length=0,Wi(I,n,1),S=Xe(kn)}let F=S;if(O&&b!==!1){const I=Object.keys(O),{shapeFlag:_}=F;I.length&&_&7&&(i&&I.some(ra)&&(O=ep(O,i)),F=bs(F,O,!1,!0))}return t.dirs&&(F=bs(F,null,!1,!0),F.dirs=F.dirs?F.dirs.concat(t.dirs):t.dirs),t.transition&&_a(F,t.transition),S=F,oi(w),S}const Qd=n=>{let e;for(const t in n)(t==="class"||t==="style"||Fi(t))&&((e||(e={}))[t]=n[t]);return e},ep=(n,e)=>{const t={};for(const s in n)(!ra(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function tp(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?bc(s,o,u):!!o;if(c&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const m=l[h];if(o[m]!==s[m]&&!Hi(u,m))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?bc(s,o,u):!0:!!o;return!1}function bc(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!Hi(t,i))return!0}return!1}function np({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const Nu=n=>n.__isSuspense;function sp(n,e){e&&e.pendingBranch?le(n)?e.effects.push(...n):e.effects.push(n):hd(n)}const mt=Symbol.for("v-fgt"),zi=Symbol.for("v-txt"),kn=Symbol.for("v-cmt"),_o=Symbol.for("v-stc"),zs=[];let Et=null;function Oe(n=!1){zs.push(Et=n?null:[])}function rp(){zs.pop(),Et=zs[zs.length-1]||null}let nr=1;function vc(n,e=!1){nr+=n,n<0&&Et&&e&&(Et.hasOnce=!0)}function Ou(n){return n.dynamicChildren=nr>0?Et||fs:null,rp(),nr>0&&Et&&Et.push(n),n}function Ve(n,e,t,s,r,i){return Ou(we(n,e,t,s,r,i,!0))}function Vo(n,e,t,s,r){return Ou(Xe(n,e,t,s,r,!0))}function wa(n){return n?n.__v_isVNode===!0:!1}function Ps(n,e){return n.type===e.type&&n.key===e.key}const Ru=({key:n})=>n??null,Zr=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Je(n)||He(n)||de(n)?{i:it,r:n,k:e,f:!!t}:n:null);function we(n,e=null,t=null,s=0,r=null,i=n===mt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Ru(e),ref:e&&Zr(e),scopeId:lu,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:it};return a?(xa(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=Je(t)?8:16),nr>0&&!o&&Et&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Et.push(c),c}const Xe=ip;function ip(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===Id)&&(n=kn),wa(n)){const a=bs(n,e,!0);return t&&xa(a,t),nr>0&&!i&&Et&&(a.shapeFlag&6?Et[Et.indexOf(n)]=a:Et.push(a)),a.patchFlag=-2,a}if(mp(n)&&(n=n.__vccOpts),e){e=op(e);let{class:a,style:c}=e;a&&!Je(a)&&(e.class=br(a)),Fe(c)&&(pa(c)&&!le(c)&&(c=ut({},c)),e.style=aa(c))}const o=Je(n)?1:Nu(n)?128:pd(n)?64:Fe(n)?4:de(n)?2:0;return we(n,e,t,s,r,o,i,!0)}function op(n){return n?pa(n)||bu(n)?ut({},n):n:null}function bs(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=n,u=e?ap(r||{},e):r,l={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Ru(u),ref:e&&e.ref?t&&i?le(i)?i.concat(Zr(e)):[i,Zr(e)]:Zr(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==mt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&bs(n.ssContent),ssFallback:n.ssFallback&&bs(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&_a(l,c.clone(l)),l}function vs(n=" ",e=0){return Xe(zi,null,n,e)}function sr(n="",e=!1){return e?(Oe(),Vo(kn,null,n)):Xe(kn,null,n)}function Zt(n){return n==null||typeof n=="boolean"?Xe(kn):le(n)?Xe(mt,null,n.slice()):wa(n)?yn(n):Xe(zi,null,String(n))}function yn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:bs(n)}function xa(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(le(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),xa(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!bu(e)?e._ctx=it:r===3&&it&&(it.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:it},t=32):(e=String(e),s&64?(t=16,e=[vs(e)]):t=8);n.children=e,n.shapeFlag|=t}function ap(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=br([e.class,s.class]));else if(r==="style")e.style=aa([e.style,s.style]);else if(Fi(r)){const i=e[r],o=s[r];o&&i!==o&&!(le(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Ht(n,e,t,s=null){Kt(n,e,7,[t,s])}const cp=gu();let lp=0;function up(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||cp,i={uid:lp++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wu(s,r),emitsOptions:Mu(s,r),emit:null,emitted:null,propsDefaults:Ae,inheritAttrs:s.inheritAttrs,ctx:Ae,data:Ae,props:Ae,attrs:Ae,slots:Ae,refs:Ae,setupState:Ae,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Jd.bind(null,i),n.ce&&n.ce(i),i}let lt=null,li,Uo;{const n=Vi(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};li=e("__VUE_INSTANCE_SETTERS__",t=>lt=t),Uo=e("__VUE_SSR_SETTERS__",t=>rr=t)}const wr=n=>{const e=lt;return li(n),n.scope.on(),()=>{n.scope.off(),li(e)}},wc=()=>{lt&&lt.scope.off(),li(null)};function Du(n){return n.vnode.shapeFlag&4}let rr=!1;function hp(n,e=!1,t=!1){e&&Uo(e);const{props:s,children:r}=n.vnode,i=Du(n);Ld(n,s,i,e),qd(n,r,t);const o=i?fp(n,e):void 0;return e&&Uo(!1),o}function fp(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Cd);const{setup:s}=t;if(s){Mn();const r=n.setupContext=s.length>1?pp(n):null,i=wr(n),o=vr(s,n,0,[n.props,r]),a=Ml(o);if(Nn(),i(),(a||n.sp)&&!gs(n)&&uu(n),a){if(o.then(wc,wc),e)return o.then(c=>{xc(n,c)}).catch(c=>{Wi(c,n,0)});n.asyncDep=o}else xc(n,o)}else Pu(n)}function xc(n,e,t){de(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Fe(e)&&(n.setupState=su(e)),Pu(n)}function Pu(n,e,t){const s=n.type;n.render||(n.render=s.render||Xt);{const r=wr(n);Mn();try{Ad(n)}finally{Nn(),r()}}}const dp={get(n,e){return at(n,"get",""),n[e]}};function pp(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,dp),slots:n.slots,emit:n.emit,expose:e}}function Yi(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(su(ma(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Gs)return Gs[t](n)},has(e,t){return t in e||t in Gs}})):n.proxy}function mp(n){return de(n)&&"__vccOpts"in n}const Zi=(n,e)=>od(n,e,rr),gp="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $o;const Tc=typeof window<"u"&&window.trustedTypes;if(Tc)try{$o=Tc.createPolicy("vue",{createHTML:n=>n})}catch{}const Fu=$o?n=>$o.createHTML(n):n=>n,_p="http://www.w3.org/2000/svg",yp="http://www.w3.org/1998/Math/MathML",sn=typeof document<"u"?document:null,Sc=sn&&sn.createElement("template"),bp={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?sn.createElementNS(_p,n):e==="mathml"?sn.createElementNS(yp,n):t?sn.createElement(n,{is:t}):sn.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>sn.createTextNode(n),createComment:n=>sn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>sn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Sc.innerHTML=Fu(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Sc.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},vp=Symbol("_vtc");function wp(n,e,t){const s=n[vp];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const kc=Symbol("_vod"),xp=Symbol("_vsh"),Tp=Symbol(""),Sp=/(^|;)\s*display\s*:/;function kp(n,e,t){const s=n.style,r=Je(t);let i=!1;if(t&&!r){if(e)if(Je(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Xr(s,a,"")}else for(const o in e)t[o]==null&&Xr(s,o,"");for(const o in t)o==="display"&&(i=!0),Xr(s,o,t[o])}else if(r){if(e!==t){const o=s[Tp];o&&(t+=";"+o),s.cssText=t,i=Sp.test(t)}}else e&&n.removeAttribute("style");kc in n&&(n[kc]=i?s.display:"",n[xp]&&(s.display="none"))}const Ic=/\s*!important$/;function Xr(n,e,t){if(le(t))t.forEach(s=>Xr(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=Ip(n,e);Ic.test(t)?n.setProperty(An(s),t.replace(Ic,""),"important"):n[s]=t}}const Ec=["Webkit","Moz","ms"],yo={};function Ip(n,e){const t=yo[e];if(t)return t;let s=Sn(e);if(s!=="filter"&&s in n)return yo[e]=s;s=Rl(s);for(let r=0;r<Ec.length;r++){const i=Ec[r]+s;if(i in n)return yo[e]=i}return e}const Cc="http://www.w3.org/1999/xlink";function Ac(n,e,t,s,r,i=Mf(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Cc,e.slice(6,e.length)):n.setAttributeNS(Cc,e,t):t==null||i&&!Pl(t)?n.removeAttribute(e):n.setAttribute(e,i?"":Vt(t)?String(t):t)}function Mc(n,e,t,s,r){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?Fu(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,c=t==null?n.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in n))&&(n.value=c),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=Pl(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(r||e)}function Bu(n,e,t,s){n.addEventListener(e,t,s)}function Ep(n,e,t,s){n.removeEventListener(e,t,s)}const Nc=Symbol("_vei");function Cp(n,e,t,s,r=null){const i=n[Nc]||(n[Nc]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=Ap(e);if(s){const u=i[e]=Op(s,r);Bu(n,a,u,c)}else o&&(Ep(n,a,o,c),i[e]=void 0)}}const Oc=/(?:Once|Passive|Capture)$/;function Ap(n){let e;if(Oc.test(n)){e={};let s;for(;s=n.match(Oc);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):An(n.slice(2)),e]}let bo=0;const Mp=Promise.resolve(),Np=()=>bo||(Mp.then(()=>bo=0),bo=Date.now());function Op(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Kt(Rp(s,t.value),e,5,[s])};return t.value=n,t.attached=Np(),t}function Rp(n,e){if(le(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Rc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Dp=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?wp(n,s,o):e==="style"?kp(n,t,s):Fi(e)?ra(e)||Cp(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Pp(n,e,s,o))?(Mc(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ac(n,e,s,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Je(s))?Mc(n,Sn(e),s,i,e):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),Ac(n,e,s,o))};function Pp(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&Rc(e)&&de(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Rc(e)&&Je(t)?!1:e in n}const Dc=n=>{const e=n.props["onUpdate:modelValue"]||!1;return le(e)?t=>Yr(e,t):e},vo=Symbol("_assign"),Fp={deep:!0,created(n,e,t){n[vo]=Dc(t),Bu(n,"change",()=>{const s=n._modelValue,r=Bp(n),i=n.checked,o=n[vo];if(le(s)){const a=Fl(s,r),c=a!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const u=[...s];u.splice(a,1),o(u)}}else if(Bi(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Lu(n,i))})},mounted:Pc,beforeUpdate(n,e,t){n[vo]=Dc(t),Pc(n,e,t)}};function Pc(n,{value:e,oldValue:t},s){n._modelValue=e;let r;if(le(e))r=Fl(e,s.props.value)>-1;else if(Bi(e))r=e.has(s.props.value);else{if(e===t)return;r=Ui(e,Lu(n,!0))}n.checked!==r&&(n.checked=r)}function Bp(n){return"_value"in n?n._value:n.value}function Lu(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const Lp=["ctrl","shift","alt","meta"],Vp={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Lp.some(t=>n[`${t}Key`]&&!e.includes(t))},Fs=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=Vp[e[o]];if(a&&a(r,e))return}return n(r,...i)})},Up={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$p=(n,e)=>{const t=n._withKeys||(n._withKeys={}),s=e.join(".");return t[s]||(t[s]=r=>{if(!("key"in r))return;const i=An(r.key);if(e.some(o=>o===i||Up[o]===i))return n(r)})},qp=ut({patchProp:Dp},bp);let Fc;function Wp(){return Fc||(Fc=jd(qp))}const jp=(...n)=>{const e=Wp().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=Hp(s);if(!r)return;const i=e._component;!de(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,Gp(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function Gp(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Hp(n){return Je(n)?document.querySelector(n):n}let Vu;const Xi=n=>Vu=n,Uu=Symbol();function qo(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Ys;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Ys||(Ys={}));function zp(){const n=Ul(!0),e=n.run(()=>Ge({}));let t=[],s=[];const r=ma({install(i){Xi(r),r._a=i,i.provide(Uu,r),i.config.globalProperties.$pinia=r,s.forEach(o=>t.push(o)),s=[]},use(i){return this._a?t.push(i):s.push(i),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return r}const $u=()=>{};function Bc(n,e,t,s=$u){n.push(e);const r=()=>{const i=n.indexOf(e);i>-1&&(n.splice(i,1),s())};return!t&&$l()&&Of(r),r}function is(n,...e){n.slice().forEach(t=>{t(...e)})}const Yp=n=>n(),Lc=Symbol(),wo=Symbol();function Wo(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,s)=>n.set(s,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const s=e[t],r=n[t];qo(r)&&qo(s)&&n.hasOwnProperty(t)&&!He(s)&&!wn(s)?n[t]=Wo(r,s):n[t]=s}return n}const Zp=Symbol();function Xp(n){return!qo(n)||!n.hasOwnProperty(Zp)}const{assign:gn}=Object;function Kp(n){return!!(He(n)&&n.effect)}function Jp(n,e,t,s){const{state:r,actions:i,getters:o}=e,a=t.state.value[n];let c;function u(){a||(t.state.value[n]=r?r():{});const l=nd(t.state.value[n]);return gn(l,i,Object.keys(o||{}).reduce((h,m)=>(h[m]=ma(Zi(()=>{Xi(t);const p=t._s.get(n);return o[m].call(p,p)})),h),{}))}return c=qu(n,u,e,t,s,!0),c}function qu(n,e,t={},s,r,i){let o;const a=gn({actions:{}},t),c={deep:!0};let u,l,h=[],m=[],p;const y=s.state.value[n];!i&&!y&&(s.state.value[n]={}),Ge({});let b;function w(x){let L;u=l=!1,typeof x=="function"?(x(s.state.value[n]),L={type:Ys.patchFunction,storeId:n,events:p}):(Wo(s.state.value[n],x),L={type:Ys.patchObject,payload:x,storeId:n,events:p});const P=b=Symbol();iu().then(()=>{b===P&&(u=!0)}),l=!0,is(h,L,s.state.value[n])}const S=i?function(){const{state:L}=t,P=L?L():{};this.$patch(q=>{gn(q,P)})}:$u;function O(){o.stop(),h=[],m=[],s._s.delete(n)}const F=(x,L="")=>{if(Lc in x)return x[wo]=L,x;const P=function(){Xi(s);const q=Array.from(arguments),D=[],X=[];function K(G){D.push(G)}function ne(G){X.push(G)}is(m,{args:q,name:P[wo],store:_,after:K,onError:ne});let Y;try{Y=x.apply(this&&this.$id===n?this:_,q)}catch(G){throw is(X,G),G}return Y instanceof Promise?Y.then(G=>(is(D,G),G)).catch(G=>(is(X,G),Promise.reject(G))):(is(D,Y),Y)};return P[Lc]=!0,P[wo]=L,P},I={_p:s,$id:n,$onAction:Bc.bind(null,m),$patch:w,$reset:S,$subscribe(x,L={}){const P=Bc(h,x,L.detached,()=>q()),q=o.run(()=>xn(()=>s.state.value[n],D=>{(L.flush==="sync"?l:u)&&x({storeId:n,type:Ys.direct,events:p},D)},gn({},c,L)));return P},$dispose:O},_=qi(I);s._s.set(n,_);const T=(s._a&&s._a.runWithContext||Yp)(()=>s._e.run(()=>(o=Ul()).run(()=>e({action:F}))));for(const x in T){const L=T[x];if(He(L)&&!Kp(L)||wn(L))i||(y&&Xp(L)&&(He(L)?L.value=y[x]:Wo(L,y[x])),s.state.value[n][x]=L);else if(typeof L=="function"){const P=F(L,x);T[x]=P,a.actions[x]=L}}return gn(_,T),gn(ve(_),T),Object.defineProperty(_,"$state",{get:()=>s.state.value[n],set:x=>{w(L=>{gn(L,x)})}}),s._p.forEach(x=>{gn(_,o.run(()=>x({store:_,app:s._a,pinia:s,options:a})))}),y&&i&&t.hydrate&&t.hydrate(_.$state,y),u=!0,l=!0,_}/*! #__NO_SIDE_EFFECTS__ */function Qp(n,e,t){let s,r;const i=typeof e=="function";s=n,r=i?t:e;function o(a,c){const u=Bd();return a=a||(u?Hs(Uu,null):null),a&&Xi(a),a=Vu,a._s.has(s)||(i?qu(s,e,r,a):Jp(s,r,a)),a._s.get(s)}return o.$id=s,o}function Ta(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let es=Ta();function Wu(n){es=n}const Zs={exec:()=>null};function Te(n,e=""){let t=typeof n=="string"?n:n.source;const s={replace:(r,i)=>{let o=typeof i=="string"?i:i.source;return o=o.replace(_t.caret,"$1"),t=t.replace(r,o),s},getRegex:()=>new RegExp(t,e)};return s}const _t={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},em=/^(?:[ \t]*(?:\n|$))+/,tm=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,nm=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,xr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,sm=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Sa=/(?:[*+-]|\d{1,9}[.)])/,ju=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Gu=Te(ju).replace(/bull/g,Sa).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),rm=Te(ju).replace(/bull/g,Sa).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),ka=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,im=/^[^\n]+/,Ia=/(?!\s*\])(?:\\.|[^\[\]\\])+/,om=Te(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ia).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),am=Te(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Sa).getRegex(),Ki="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ea=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,cm=Te("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ea).replace("tag",Ki).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Hu=Te(ka).replace("hr",xr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ki).getRegex(),lm=Te(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Hu).getRegex(),Ca={blockquote:lm,code:tm,def:om,fences:nm,heading:sm,hr:xr,html:cm,lheading:Gu,list:am,newline:em,paragraph:Hu,table:Zs,text:im},Vc=Te("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",xr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ki).getRegex(),um={...Ca,lheading:rm,table:Vc,paragraph:Te(ka).replace("hr",xr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Vc).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ki).getRegex()},hm={...Ca,html:Te(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ea).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Zs,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Te(ka).replace("hr",xr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Gu).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},fm=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,dm=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,zu=/^( {2,}|\\)\n(?!\s*$)/,pm=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ji=/[\p{P}\p{S}]/u,Aa=/[\s\p{P}\p{S}]/u,Yu=/[^\s\p{P}\p{S}]/u,mm=Te(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Aa).getRegex(),Zu=/(?!~)[\p{P}\p{S}]/u,gm=/(?!~)[\s\p{P}\p{S}]/u,_m=/(?:[^\s\p{P}\p{S}]|~)/u,ym=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Xu=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,bm=Te(Xu,"u").replace(/punct/g,Ji).getRegex(),vm=Te(Xu,"u").replace(/punct/g,Zu).getRegex(),Ku="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",wm=Te(Ku,"gu").replace(/notPunctSpace/g,Yu).replace(/punctSpace/g,Aa).replace(/punct/g,Ji).getRegex(),xm=Te(Ku,"gu").replace(/notPunctSpace/g,_m).replace(/punctSpace/g,gm).replace(/punct/g,Zu).getRegex(),Tm=Te("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Yu).replace(/punctSpace/g,Aa).replace(/punct/g,Ji).getRegex(),Sm=Te(/\\(punct)/,"gu").replace(/punct/g,Ji).getRegex(),km=Te(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Im=Te(Ea).replace("(?:-->|$)","-->").getRegex(),Em=Te("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Im).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ui=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Cm=Te(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ui).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ju=Te(/^!?\[(label)\]\[(ref)\]/).replace("label",ui).replace("ref",Ia).getRegex(),Qu=Te(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ia).getRegex(),Am=Te("reflink|nolink(?!\\()","g").replace("reflink",Ju).replace("nolink",Qu).getRegex(),Ma={_backpedal:Zs,anyPunctuation:Sm,autolink:km,blockSkip:ym,br:zu,code:dm,del:Zs,emStrongLDelim:bm,emStrongRDelimAst:wm,emStrongRDelimUnd:Tm,escape:fm,link:Cm,nolink:Qu,punctuation:mm,reflink:Ju,reflinkSearch:Am,tag:Em,text:pm,url:Zs},Mm={...Ma,link:Te(/^!?\[(label)\]\((.*?)\)/).replace("label",ui).getRegex(),reflink:Te(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ui).getRegex()},jo={...Ma,emStrongRDelimAst:xm,emStrongLDelim:vm,url:Te(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Nm={...jo,br:Te(zu).replace("{2,}","*").getRegex(),text:Te(jo.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Br={normal:Ca,gfm:um,pedantic:hm},Bs={normal:Ma,gfm:jo,breaks:Nm,pedantic:Mm},Om={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uc=n=>Om[n];function zt(n,e){if(e){if(_t.escapeTest.test(n))return n.replace(_t.escapeReplace,Uc)}else if(_t.escapeTestNoEncode.test(n))return n.replace(_t.escapeReplaceNoEncode,Uc);return n}function $c(n){try{n=encodeURI(n).replace(_t.percentDecode,"%")}catch{return null}return n}function qc(n,e){var i;const t=n.replace(_t.findPipe,(o,a,c)=>{let u=!1,l=a;for(;--l>=0&&c[l]==="\\";)u=!u;return u?"|":" |"}),s=t.split(_t.splitPipe);let r=0;if(s[0].trim()||s.shift(),s.length>0&&!((i=s.at(-1))!=null&&i.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(_t.slashPipe,"|");return s}function Ls(n,e,t){const s=n.length;if(s===0)return"";let r=0;for(;r<s&&n.charAt(s-r-1)===e;)r++;return n.slice(0,s-r)}function Rm(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<n.length;s++)if(n[s]==="\\")s++;else if(n[s]===e[0])t++;else if(n[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function Wc(n,e,t,s,r){const i=e.href,o=e.title||null,a=n[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;const c={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:i,title:o,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,c}function Dm(n,e,t){const s=n.match(t.other.indentCodeCompensation);if(s===null)return e;const r=s[1];return e.split(`
`).map(i=>{const o=i.match(t.other.beginningSpace);if(o===null)return i;const[a]=o;return a.length>=r.length?i.slice(r.length):i}).join(`
`)}class hi{constructor(e){he(this,"options");he(this,"rules");he(this,"lexer");this.options=e||es}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:Ls(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],r=Dm(s,t[3]||"",this.rules);return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(this.rules.other.endingHash.test(s)){const r=Ls(s,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(s=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ls(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let s=Ls(t[0],`
`).split(`
`),r="",i="";const o=[];for(;s.length>0;){let a=!1;const c=[];let u;for(u=0;u<s.length;u++)if(this.rules.other.blockquoteStart.test(s[u]))c.push(s[u]),a=!0;else if(!a)c.push(s[u]);else break;s=s.slice(u);const l=c.join(`
`),h=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${l}`:l,i=i?`${i}
${h}`:h;const m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,o,!0),this.lexer.state.top=m,s.length===0)break;const p=o.at(-1);if((p==null?void 0:p.type)==="code")break;if((p==null?void 0:p.type)==="blockquote"){const y=p,b=y.raw+`
`+s.join(`
`),w=this.blockquote(b);o[o.length-1]=w,r=r.substring(0,r.length-y.raw.length)+w.raw,i=i.substring(0,i.length-y.text.length)+w.text;break}else if((p==null?void 0:p.type)==="list"){const y=p,b=y.raw+`
`+s.join(`
`),w=this.list(b);o[o.length-1]=w,r=r.substring(0,r.length-p.raw.length)+w.raw,i=i.substring(0,i.length-y.raw.length)+w.raw,s=b.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const r=s.length>1,i={type:"list",raw:"",ordered:r,start:r?+s.slice(0,-1):"",loose:!1,items:[]};s=r?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=r?s:"[*+-]");const o=this.rules.other.listItemRegex(s);let a=!1;for(;e;){let u=!1,l="",h="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let m=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,O=>" ".repeat(3*O.length)),p=e.split(`
`,1)[0],y=!m.trim(),b=0;if(this.options.pedantic?(b=2,h=m.trimStart()):y?b=t[1].length+1:(b=t[2].search(this.rules.other.nonSpaceChar),b=b>4?1:b,h=m.slice(b),b+=t[1].length),y&&this.rules.other.blankLine.test(p)&&(l+=p+`
`,e=e.substring(p.length+1),u=!0),!u){const O=this.rules.other.nextBulletRegex(b),F=this.rules.other.hrRegex(b),I=this.rules.other.fencesBeginRegex(b),_=this.rules.other.headingBeginRegex(b),k=this.rules.other.htmlBeginRegex(b);for(;e;){const T=e.split(`
`,1)[0];let x;if(p=T,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),x=p):x=p.replace(this.rules.other.tabCharGlobal,"    "),I.test(p)||_.test(p)||k.test(p)||O.test(p)||F.test(p))break;if(x.search(this.rules.other.nonSpaceChar)>=b||!p.trim())h+=`
`+x.slice(b);else{if(y||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(m)||_.test(m)||F.test(m))break;h+=`
`+p}!y&&!p.trim()&&(y=!0),l+=T+`
`,e=e.substring(T.length+1),m=x.slice(b)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(a=!0));let w=null,S;this.options.gfm&&(w=this.rules.other.listIsTask.exec(h),w&&(S=w[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:l,task:!!w,checked:S,loose:!1,text:h,tokens:[]}),i.raw+=l}const c=i.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const l=i.items[u].tokens.filter(m=>m.type==="space"),h=l.length>0&&l.some(m=>this.rules.other.anyLine.test(m.raw));i.loose=h}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:r,title:i}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const s=qc(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===r.length){for(const c of r)this.rules.other.tableAlignRight.test(c)?o.align.push("right"):this.rules.other.tableAlignCenter.test(c)?o.align.push("center"):this.rules.other.tableAlignLeft.test(c)?o.align.push("left"):o.align.push(null);for(let c=0;c<s.length;c++)o.header.push({text:s[c],tokens:this.lexer.inline(s[c]),header:!0,align:o.align[c]});for(const c of i)o.rows.push(qc(c,o.header.length).map((u,l)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:o.align[l]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const o=Ls(s.slice(0,-1),"\\");if((s.length-o.length)%2===0)return}else{const o=Rm(t[2],"()");if(o===-2)return;if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){const o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?r=r.slice(1):r=r.slice(1,-1)),Wc(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const r=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){const o=s[0].charAt(0);return{type:"text",raw:o,text:o}}return Wc(s,i,s[0],this.lexer,this.rules)}}emStrong(e,t,s=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const o=[...r[0]].length-1;let a,c,u=o,l=0;const h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(r=h.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&o%3&&!((o+c)%3)){l+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+l);const m=[...r[0]][0].length,p=e.slice(0,o+r.index+m+c);if(Math.min(o,c)%2){const b=p.slice(1,-1);return{type:"em",raw:p,text:b,tokens:this.lexer.inlineTokens(b)}}const y=p.slice(2,-2);return{type:"strong",raw:p,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(s),i=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return r&&i&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,r;return t[2]==="@"?(s=t[1],r="mailto:"+s):(s=t[1],r=s),{type:"link",raw:t[0],text:s,href:r,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let o;do o=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(o!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const s=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:s}}}}class Mt{constructor(e){he(this,"tokens");he(this,"options");he(this,"state");he(this,"tokenizer");he(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||es,this.options.tokenizer=this.options.tokenizer||new hi,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:_t,block:Br.normal,inline:Bs.normal};this.options.pedantic?(t.block=Br.pedantic,t.inline=Bs.pedantic):this.options.gfm&&(t.block=Br.gfm,this.options.breaks?t.inline=Bs.breaks:t.inline=Bs.gfm),this.tokenizer.rules=t}static get rules(){return{block:Br,inline:Bs}}static lex(e,t){return new Mt(t).lex(e)}static lexInline(e,t){return new Mt(t).inlineTokens(e)}lex(e){e=e.replace(_t.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var r,i,o;for(this.options.pedantic&&(e=e.replace(_t.tabCharGlobal,"    ").replace(_t.spaceLine,""));e;){let a;if((i=(r=this.options.extensions)==null?void 0:r.block)!=null&&i.some(u=>(a=u.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=t.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let c=e;if((o=this.options.extensions)!=null&&o.startBlock){let u=1/0;const l=e.slice(1);let h;this.options.extensions.startBlock.forEach(m=>{h=m.call({lexer:this},l),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(c=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){const u=t.at(-1);s&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(a),s=c.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,c,u;let s=e,r=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,o="";for(;e;){i||(o=""),i=!1;let l;if((c=(a=this.options.extensions)==null?void 0:a.inline)!=null&&c.some(m=>(l=m.call({lexer:this},e,t))?(e=e.substring(l.raw.length),t.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const m=t.at(-1);l.type==="text"&&(m==null?void 0:m.type)==="text"?(m.raw+=l.raw,m.text+=l.text):t.push(l);continue}if(l=this.tokenizer.emStrong(e,s,o)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),t.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),t.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),t.push(l);continue}let h=e;if((u=this.options.extensions)!=null&&u.startInline){let m=1/0;const p=e.slice(1);let y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},p),typeof y=="number"&&y>=0&&(m=Math.min(m,y))}),m<1/0&&m>=0&&(h=e.substring(0,m+1))}if(l=this.tokenizer.inlineText(h)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),i=!0;const m=t.at(-1);(m==null?void 0:m.type)==="text"?(m.raw+=l.raw,m.text+=l.text):t.push(l);continue}if(e){const m="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(m);break}else throw new Error(m)}}return t}}class fi{constructor(e){he(this,"options");he(this,"parser");this.options=e||es}space(e){return""}code({text:e,lang:t,escaped:s}){var o;const r=(o=(t||"").match(_t.notSpaceStart))==null?void 0:o[0],i=e.replace(_t.endingNewline,"")+`
`;return r?'<pre><code class="language-'+zt(r)+'">'+(s?i:zt(i,!0))+`</code></pre>
`:"<pre><code>"+(s?i:zt(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,s=e.start;let r="";for(let a=0;a<e.items.length;a++){const c=e.items[a];r+=this.listitem(c)}const i=t?"ol":"ul",o=t&&s!==1?' start="'+s+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(e){var s;let t="";if(e.task){const r=this.checkbox({checked:!!e.checked});e.loose?((s=e.tokens[0])==null?void 0:s.type)==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+zt(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",s="";for(let i=0;i<e.header.length;i++)s+=this.tablecell(e.header[i]);t+=this.tablerow({text:s});let r="";for(let i=0;i<e.rows.length;i++){const o=e.rows[i];s="";for(let a=0;a<o.length;a++)s+=this.tablecell(o[a]);r+=this.tablerow({text:s})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),s=e.header?"th":"td";return(e.align?`<${s} align="${e.align}">`:`<${s}>`)+t+`</${s}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${zt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:s}){const r=this.parser.parseInline(s),i=$c(e);if(i===null)return r;e=i;let o='<a href="'+e+'"';return t&&(o+=' title="'+zt(t)+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:s,tokens:r}){r&&(s=this.parser.parseInline(r,this.parser.textRenderer));const i=$c(e);if(i===null)return zt(s);e=i;let o=`<img src="${e}" alt="${s}"`;return t&&(o+=` title="${zt(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:zt(e.text)}}class Na{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class Nt{constructor(e){he(this,"options");he(this,"renderer");he(this,"textRenderer");this.options=e||es,this.options.renderer=this.options.renderer||new fi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Na}static parse(e,t){return new Nt(t).parse(e)}static parseInline(e,t){return new Nt(t).parseInline(e)}parse(e,t=!0){var r,i;let s="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[a.type]){const u=a,l=this.options.extensions.renderers[u.type].call({parser:this},u);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){s+=l||"";continue}}const c=a;switch(c.type){case"space":{s+=this.renderer.space(c);continue}case"hr":{s+=this.renderer.hr(c);continue}case"heading":{s+=this.renderer.heading(c);continue}case"code":{s+=this.renderer.code(c);continue}case"table":{s+=this.renderer.table(c);continue}case"blockquote":{s+=this.renderer.blockquote(c);continue}case"list":{s+=this.renderer.list(c);continue}case"html":{s+=this.renderer.html(c);continue}case"paragraph":{s+=this.renderer.paragraph(c);continue}case"text":{let u=c,l=this.renderer.text(u);for(;o+1<e.length&&e[o+1].type==="text";)u=e[++o],l+=`
`+this.renderer.text(u);t?s+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):s+=l;continue}default:{const u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}parseInline(e,t=this.renderer){var r,i;let s="";for(let o=0;o<e.length;o++){const a=e[o];if((i=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&i[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=u||"";continue}}const c=a;switch(c.type){case"escape":{s+=t.text(c);break}case"html":{s+=t.html(c);break}case"link":{s+=t.link(c);break}case"image":{s+=t.image(c);break}case"strong":{s+=t.strong(c);break}case"em":{s+=t.em(c);break}case"codespan":{s+=t.codespan(c);break}case"br":{s+=t.br(c);break}case"del":{s+=t.del(c);break}case"text":{s+=t.text(c);break}default:{const u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return s}}class Xs{constructor(e){he(this,"options");he(this,"block");this.options=e||es}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Mt.lex:Mt.lexInline}provideParser(){return this.block?Nt.parse:Nt.parseInline}}he(Xs,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Pm{constructor(...e){he(this,"defaults",Ta());he(this,"options",this.setOptions);he(this,"parse",this.parseMarkdown(!0));he(this,"parseInline",this.parseMarkdown(!1));he(this,"Parser",Nt);he(this,"Renderer",fi);he(this,"TextRenderer",Na);he(this,"Lexer",Mt);he(this,"Tokenizer",hi);he(this,"Hooks",Xs);this.use(...e)}walkTokens(e,t){var r,i;let s=[];for(const o of e)switch(s=s.concat(t.call(this,o)),o.type){case"table":{const a=o;for(const c of a.header)s=s.concat(this.walkTokens(c.tokens,t));for(const c of a.rows)for(const u of c)s=s.concat(this.walkTokens(u.tokens,t));break}case"list":{const a=o;s=s.concat(this.walkTokens(a.items,t));break}default:{const a=o;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[a.type]?this.defaults.extensions.childTokens[a.type].forEach(c=>{const u=a[c].flat(1/0);s=s.concat(this.walkTokens(u,t))}):a.tokens&&(s=s.concat(this.walkTokens(a.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const r={...s};if(r.async=this.defaults.async||r.async||!1,s.extensions&&(s.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const o=t.renderers[i.name];o?t.renderers[i.name]=function(...a){let c=i.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),s.renderer){const i=this.defaults.renderer||new fi(this.defaults);for(const o in s.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,c=s.renderer[a],u=i[a];i[a]=(...l)=>{let h=c.apply(i,l);return h===!1&&(h=u.apply(i,l)),h||""}}r.renderer=i}if(s.tokenizer){const i=this.defaults.tokenizer||new hi(this.defaults);for(const o in s.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,c=s.tokenizer[a],u=i[a];i[a]=(...l)=>{let h=c.apply(i,l);return h===!1&&(h=u.apply(i,l)),h}}r.tokenizer=i}if(s.hooks){const i=this.defaults.hooks||new Xs;for(const o in s.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;const a=o,c=s.hooks[a],u=i[a];Xs.passThroughHooks.has(o)?i[a]=l=>{if(this.defaults.async)return Promise.resolve(c.call(i,l)).then(m=>u.call(i,m));const h=c.call(i,l);return u.call(i,h)}:i[a]=(...l)=>{let h=c.apply(i,l);return h===!1&&(h=u.apply(i,l)),h}}r.hooks=i}if(s.walkTokens){const i=this.defaults.walkTokens,o=s.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Mt.lex(e,t??this.defaults)}parser(e,t){return Nt.parse(e,t??this.defaults)}parseMarkdown(e){return(s,r)=>{const i={...r},o={...this.defaults,...i},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);const c=o.hooks?o.hooks.provideLexer():e?Mt.lex:Mt.lexInline,u=o.hooks?o.hooks.provideParser():e?Nt.parse:Nt.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(s):s).then(l=>c(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>u(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(s=o.hooks.preprocess(s));let l=c(s,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let h=u(l,o);return o.hooks&&(h=o.hooks.postprocess(h)),h}catch(l){return a(l)}}}onError(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+zt(s.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(s);throw s}}}const Hn=new Pm;function Se(n,e){return Hn.parse(n,e)}Se.options=Se.setOptions=function(n){return Hn.setOptions(n),Se.defaults=Hn.defaults,Wu(Se.defaults),Se};Se.getDefaults=Ta;Se.defaults=es;Se.use=function(...n){return Hn.use(...n),Se.defaults=Hn.defaults,Wu(Se.defaults),Se};Se.walkTokens=function(n,e){return Hn.walkTokens(n,e)};Se.parseInline=Hn.parseInline;Se.Parser=Nt;Se.parser=Nt.parse;Se.Renderer=fi;Se.TextRenderer=Na;Se.Lexer=Mt;Se.lexer=Mt.lex;Se.Tokenizer=hi;Se.Hooks=Xs;Se.parse=Se;Se.options;Se.setOptions;Se.use;Se.walkTokens;Se.parseInline;Nt.parse;Mt.lex;function Fm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xo={},Vs={},jc;function Bm(){if(jc)return Vs;jc=1,Vs.byteLength=a,Vs.toByteArray=u,Vs.fromByteArray=m;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,i=s.length;r<i;++r)n[r]=s[r],e[s.charCodeAt(r)]=r;e[45]=62,e[95]=63;function o(p){var y=p.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=p.indexOf("=");b===-1&&(b=y);var w=b===y?0:4-b%4;return[b,w]}function a(p){var y=o(p),b=y[0],w=y[1];return(b+w)*3/4-w}function c(p,y,b){return(y+b)*3/4-b}function u(p){var y,b=o(p),w=b[0],S=b[1],O=new t(c(p,w,S)),F=0,I=S>0?w-4:w,_;for(_=0;_<I;_+=4)y=e[p.charCodeAt(_)]<<18|e[p.charCodeAt(_+1)]<<12|e[p.charCodeAt(_+2)]<<6|e[p.charCodeAt(_+3)],O[F++]=y>>16&255,O[F++]=y>>8&255,O[F++]=y&255;return S===2&&(y=e[p.charCodeAt(_)]<<2|e[p.charCodeAt(_+1)]>>4,O[F++]=y&255),S===1&&(y=e[p.charCodeAt(_)]<<10|e[p.charCodeAt(_+1)]<<4|e[p.charCodeAt(_+2)]>>2,O[F++]=y>>8&255,O[F++]=y&255),O}function l(p){return n[p>>18&63]+n[p>>12&63]+n[p>>6&63]+n[p&63]}function h(p,y,b){for(var w,S=[],O=y;O<b;O+=3)w=(p[O]<<16&16711680)+(p[O+1]<<8&65280)+(p[O+2]&255),S.push(l(w));return S.join("")}function m(p){for(var y,b=p.length,w=b%3,S=[],O=16383,F=0,I=b-w;F<I;F+=O)S.push(h(p,F,F+O>I?I:F+O));return w===1?(y=p[b-1],S.push(n[y>>2]+n[y<<4&63]+"==")):w===2&&(y=(p[b-2]<<8)+p[b-1],S.push(n[y>>10]+n[y>>4&63]+n[y<<2&63]+"=")),S.join("")}return Vs}var Lr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Gc;function Lm(){return Gc||(Gc=1,Lr.read=function(n,e,t,s,r){var i,o,a=r*8-s-1,c=(1<<a)-1,u=c>>1,l=-7,h=t?r-1:0,m=t?-1:1,p=n[e+h];for(h+=m,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=i*256+n[e+h],h+=m,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=s;l>0;o=o*256+n[e+h],h+=m,l-=8);if(i===0)i=1-u;else{if(i===c)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,s),i=i-u}return(p?-1:1)*o*Math.pow(2,i-s)},Lr.write=function(n,e,t,s,r,i){var o,a,c,u=i*8-r-1,l=(1<<u)-1,h=l>>1,m=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=s?0:i-1,y=s?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?e+=m/c:e+=m*Math.pow(2,1-h),e*c>=2&&(o++,c/=2),o+h>=l?(a=0,o=l):o+h>=1?(a=(e*c-1)*Math.pow(2,r),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;n[t+p]=a&255,p+=y,a/=256,r-=8);for(o=o<<r|a,u+=r;u>0;n[t+p]=o&255,p+=y,o/=256,u-=8);n[t+p-y]|=b*128}),Lr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Hc;function Vm(){return Hc||(Hc=1,function(n){const e=Bm(),t=Lm(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=O,n.INSPECT_MAX_BYTES=50;const r=2147483647;n.kMaxLength=r,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const g=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(g,f),g.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(g){if(g>r)throw new RangeError('The value "'+g+'" is invalid for option "size"');const f=new Uint8Array(g);return Object.setPrototypeOf(f,a.prototype),f}function a(g,f,d){if(typeof g=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(g)}return c(g,f,d)}a.poolSize=8192;function c(g,f,d){if(typeof g=="string")return m(g,f);if(ArrayBuffer.isView(g))return y(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(H(g,ArrayBuffer)||g&&H(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(g,SharedArrayBuffer)||g&&H(g.buffer,SharedArrayBuffer)))return b(g,f,d);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=g.valueOf&&g.valueOf();if(v!=null&&v!==g)return a.from(v,f,d);const A=w(g);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return a.from(g[Symbol.toPrimitive]("string"),f,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}a.from=function(g,f,d){return c(g,f,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function l(g,f,d){return u(g),g<=0?o(g):f!==void 0?typeof d=="string"?o(g).fill(f,d):o(g).fill(f):o(g)}a.alloc=function(g,f,d){return l(g,f,d)};function h(g){return u(g),o(g<0?0:S(g)|0)}a.allocUnsafe=function(g){return h(g)},a.allocUnsafeSlow=function(g){return h(g)};function m(g,f){if((typeof f!="string"||f==="")&&(f="utf8"),!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const d=F(g,f)|0;let v=o(d);const A=v.write(g,f);return A!==d&&(v=v.slice(0,A)),v}function p(g){const f=g.length<0?0:S(g.length)|0,d=o(f);for(let v=0;v<f;v+=1)d[v]=g[v]&255;return d}function y(g){if(H(g,Uint8Array)){const f=new Uint8Array(g);return b(f.buffer,f.byteOffset,f.byteLength)}return p(g)}function b(g,f,d){if(f<0||g.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<f+(d||0))throw new RangeError('"length" is outside of buffer bounds');let v;return f===void 0&&d===void 0?v=new Uint8Array(g):d===void 0?v=new Uint8Array(g,f):v=new Uint8Array(g,f,d),Object.setPrototypeOf(v,a.prototype),v}function w(g){if(a.isBuffer(g)){const f=S(g.length)|0,d=o(f);return d.length===0||g.copy(d,0,0,f),d}if(g.length!==void 0)return typeof g.length!="number"||Z(g.length)?o(0):p(g);if(g.type==="Buffer"&&Array.isArray(g.data))return p(g.data)}function S(g){if(g>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return g|0}function O(g){return+g!=g&&(g=0),a.alloc(+g)}a.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==a.prototype},a.compare=function(f,d){if(H(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),H(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(f)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===d)return 0;let v=f.length,A=d.length;for(let V=0,B=Math.min(v,A);V<B;++V)if(f[V]!==d[V]){v=f[V],A=d[V];break}return v<A?-1:A<v?1:0},a.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(f,d){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return a.alloc(0);let v;if(d===void 0)for(d=0,v=0;v<f.length;++v)d+=f[v].length;const A=a.allocUnsafe(d);let V=0;for(v=0;v<f.length;++v){let B=f[v];if(H(B,Uint8Array))V+B.length>A.length?(a.isBuffer(B)||(B=a.from(B)),B.copy(A,V)):Uint8Array.prototype.set.call(A,B,V);else if(a.isBuffer(B))B.copy(A,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=B.length}return A};function F(g,f){if(a.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||H(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const d=g.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&d===0)return 0;let A=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return W(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return M(g).length;default:if(A)return v?-1:W(g).length;f=(""+f).toLowerCase(),A=!0}}a.byteLength=F;function I(g,f,d){let v=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,f>>>=0,d<=f))return"";for(g||(g="utf8");;)switch(g){case"hex":return ie(this,f,d);case"utf8":case"utf-8":return K(this,f,d);case"ascii":return G(this,f,d);case"latin1":case"binary":return J(this,f,d);case"base64":return X(this,f,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,f,d);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),v=!0}}a.prototype._isBuffer=!0;function _(g,f,d){const v=g[f];g[f]=g[d],g[d]=v}a.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<f;d+=2)_(this,d,d+1);return this},a.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<f;d+=4)_(this,d,d+3),_(this,d+1,d+2);return this},a.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<f;d+=8)_(this,d,d+7),_(this,d+1,d+6),_(this,d+2,d+5),_(this,d+3,d+4);return this},a.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?K(this,0,f):I.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(f){if(!a.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:a.compare(this,f)===0},a.prototype.inspect=function(){let f="";const d=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(f+=" ... "),"<Buffer "+f+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(f,d,v,A,V){if(H(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(d===void 0&&(d=0),v===void 0&&(v=f?f.length:0),A===void 0&&(A=0),V===void 0&&(V=this.length),d<0||v>f.length||A<0||V>this.length)throw new RangeError("out of range index");if(A>=V&&d>=v)return 0;if(A>=V)return-1;if(d>=v)return 1;if(d>>>=0,v>>>=0,A>>>=0,V>>>=0,this===f)return 0;let B=V-A,ce=v-d;const pe=Math.min(B,ce),_e=this.slice(A,V),ke=f.slice(d,v);for(let Ce=0;Ce<pe;++Ce)if(_e[Ce]!==ke[Ce]){B=_e[Ce],ce=ke[Ce];break}return B<ce?-1:ce<B?1:0};function k(g,f,d,v,A){if(g.length===0)return-1;if(typeof d=="string"?(v=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Z(d)&&(d=A?0:g.length-1),d<0&&(d=g.length+d),d>=g.length){if(A)return-1;d=g.length-1}else if(d<0)if(A)d=0;else return-1;if(typeof f=="string"&&(f=a.from(f,v)),a.isBuffer(f))return f.length===0?-1:T(g,f,d,v,A);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(g,f,d):Uint8Array.prototype.lastIndexOf.call(g,f,d):T(g,[f],d,v,A);throw new TypeError("val must be string, number or Buffer")}function T(g,f,d,v,A){let V=1,B=g.length,ce=f.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(g.length<2||f.length<2)return-1;V=2,B/=2,ce/=2,d/=2}function pe(ke,Ce){return V===1?ke[Ce]:ke.readUInt16BE(Ce*V)}let _e;if(A){let ke=-1;for(_e=d;_e<B;_e++)if(pe(g,_e)===pe(f,ke===-1?0:_e-ke)){if(ke===-1&&(ke=_e),_e-ke+1===ce)return ke*V}else ke!==-1&&(_e-=_e-ke),ke=-1}else for(d+ce>B&&(d=B-ce),_e=d;_e>=0;_e--){let ke=!0;for(let Ce=0;Ce<ce;Ce++)if(pe(g,_e+Ce)!==pe(f,Ce)){ke=!1;break}if(ke)return _e}return-1}a.prototype.includes=function(f,d,v){return this.indexOf(f,d,v)!==-1},a.prototype.indexOf=function(f,d,v){return k(this,f,d,v,!0)},a.prototype.lastIndexOf=function(f,d,v){return k(this,f,d,v,!1)};function x(g,f,d,v){d=Number(d)||0;const A=g.length-d;v?(v=Number(v),v>A&&(v=A)):v=A;const V=f.length;v>V/2&&(v=V/2);let B;for(B=0;B<v;++B){const ce=parseInt(f.substr(B*2,2),16);if(Z(ce))return B;g[d+B]=ce}return B}function L(g,f,d,v){return N(W(f,g.length-d),g,d,v)}function P(g,f,d,v){return N(z(f),g,d,v)}function q(g,f,d,v){return N(M(f),g,d,v)}function D(g,f,d,v){return N(j(f,g.length-d),g,d,v)}a.prototype.write=function(f,d,v,A){if(d===void 0)A="utf8",v=this.length,d=0;else if(v===void 0&&typeof d=="string")A=d,v=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(v)?(v=v>>>0,A===void 0&&(A="utf8")):(A=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const V=this.length-d;if((v===void 0||v>V)&&(v=V),f.length>0&&(v<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let B=!1;for(;;)switch(A){case"hex":return x(this,f,d,v);case"utf8":case"utf-8":return L(this,f,d,v);case"ascii":case"latin1":case"binary":return P(this,f,d,v);case"base64":return q(this,f,d,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,f,d,v);default:if(B)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),B=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function X(g,f,d){return f===0&&d===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(f,d))}function K(g,f,d){d=Math.min(g.length,d);const v=[];let A=f;for(;A<d;){const V=g[A];let B=null,ce=V>239?4:V>223?3:V>191?2:1;if(A+ce<=d){let pe,_e,ke,Ce;switch(ce){case 1:V<128&&(B=V);break;case 2:pe=g[A+1],(pe&192)===128&&(Ce=(V&31)<<6|pe&63,Ce>127&&(B=Ce));break;case 3:pe=g[A+1],_e=g[A+2],(pe&192)===128&&(_e&192)===128&&(Ce=(V&15)<<12|(pe&63)<<6|_e&63,Ce>2047&&(Ce<55296||Ce>57343)&&(B=Ce));break;case 4:pe=g[A+1],_e=g[A+2],ke=g[A+3],(pe&192)===128&&(_e&192)===128&&(ke&192)===128&&(Ce=(V&15)<<18|(pe&63)<<12|(_e&63)<<6|ke&63,Ce>65535&&Ce<1114112&&(B=Ce))}}B===null?(B=65533,ce=1):B>65535&&(B-=65536,v.push(B>>>10&1023|55296),B=56320|B&1023),v.push(B),A+=ce}return Y(v)}const ne=4096;function Y(g){const f=g.length;if(f<=ne)return String.fromCharCode.apply(String,g);let d="",v=0;for(;v<f;)d+=String.fromCharCode.apply(String,g.slice(v,v+=ne));return d}function G(g,f,d){let v="";d=Math.min(g.length,d);for(let A=f;A<d;++A)v+=String.fromCharCode(g[A]&127);return v}function J(g,f,d){let v="";d=Math.min(g.length,d);for(let A=f;A<d;++A)v+=String.fromCharCode(g[A]);return v}function ie(g,f,d){const v=g.length;(!f||f<0)&&(f=0),(!d||d<0||d>v)&&(d=v);let A="";for(let V=f;V<d;++V)A+=Q[g[V]];return A}function ae(g,f,d){const v=g.slice(f,d);let A="";for(let V=0;V<v.length-1;V+=2)A+=String.fromCharCode(v[V]+v[V+1]*256);return A}a.prototype.slice=function(f,d){const v=this.length;f=~~f,d=d===void 0?v:~~d,f<0?(f+=v,f<0&&(f=0)):f>v&&(f=v),d<0?(d+=v,d<0&&(d=0)):d>v&&(d=v),d<f&&(d=f);const A=this.subarray(f,d);return Object.setPrototypeOf(A,a.prototype),A};function ee(g,f,d){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+f>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(f,d,v){f=f>>>0,d=d>>>0,v||ee(f,d,this.length);let A=this[f],V=1,B=0;for(;++B<d&&(V*=256);)A+=this[f+B]*V;return A},a.prototype.readUintBE=a.prototype.readUIntBE=function(f,d,v){f=f>>>0,d=d>>>0,v||ee(f,d,this.length);let A=this[f+--d],V=1;for(;d>0&&(V*=256);)A+=this[f+--d]*V;return A},a.prototype.readUint8=a.prototype.readUInt8=function(f,d){return f=f>>>0,d||ee(f,1,this.length),this[f]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(f,d){return f=f>>>0,d||ee(f,2,this.length),this[f]|this[f+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(f,d){return f=f>>>0,d||ee(f,2,this.length),this[f]<<8|this[f+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(f,d){return f=f>>>0,d||ee(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(f,d){return f=f>>>0,d||ee(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},a.prototype.readBigUInt64LE=re(function(f){f=f>>>0,C(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&$(f,this.length-8);const A=d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,V=this[++f]+this[++f]*2**8+this[++f]*2**16+v*2**24;return BigInt(A)+(BigInt(V)<<BigInt(32))}),a.prototype.readBigUInt64BE=re(function(f){f=f>>>0,C(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&$(f,this.length-8);const A=d*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],V=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+v;return(BigInt(A)<<BigInt(32))+BigInt(V)}),a.prototype.readIntLE=function(f,d,v){f=f>>>0,d=d>>>0,v||ee(f,d,this.length);let A=this[f],V=1,B=0;for(;++B<d&&(V*=256);)A+=this[f+B]*V;return V*=128,A>=V&&(A-=Math.pow(2,8*d)),A},a.prototype.readIntBE=function(f,d,v){f=f>>>0,d=d>>>0,v||ee(f,d,this.length);let A=d,V=1,B=this[f+--A];for(;A>0&&(V*=256);)B+=this[f+--A]*V;return V*=128,B>=V&&(B-=Math.pow(2,8*d)),B},a.prototype.readInt8=function(f,d){return f=f>>>0,d||ee(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},a.prototype.readInt16LE=function(f,d){f=f>>>0,d||ee(f,2,this.length);const v=this[f]|this[f+1]<<8;return v&32768?v|4294901760:v},a.prototype.readInt16BE=function(f,d){f=f>>>0,d||ee(f,2,this.length);const v=this[f+1]|this[f]<<8;return v&32768?v|4294901760:v},a.prototype.readInt32LE=function(f,d){return f=f>>>0,d||ee(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},a.prototype.readInt32BE=function(f,d){return f=f>>>0,d||ee(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},a.prototype.readBigInt64LE=re(function(f){f=f>>>0,C(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&$(f,this.length-8);const A=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(v<<24);return(BigInt(A)<<BigInt(32))+BigInt(d+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),a.prototype.readBigInt64BE=re(function(f){f=f>>>0,C(f,"offset");const d=this[f],v=this[f+7];(d===void 0||v===void 0)&&$(f,this.length-8);const A=(d<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(A)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+v)}),a.prototype.readFloatLE=function(f,d){return f=f>>>0,d||ee(f,4,this.length),t.read(this,f,!0,23,4)},a.prototype.readFloatBE=function(f,d){return f=f>>>0,d||ee(f,4,this.length),t.read(this,f,!1,23,4)},a.prototype.readDoubleLE=function(f,d){return f=f>>>0,d||ee(f,8,this.length),t.read(this,f,!0,52,8)},a.prototype.readDoubleBE=function(f,d){return f=f>>>0,d||ee(f,8,this.length),t.read(this,f,!1,52,8)};function oe(g,f,d,v,A,V){if(!a.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>A||f<V)throw new RangeError('"value" argument is out of bounds');if(d+v>g.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(f,d,v,A){if(f=+f,d=d>>>0,v=v>>>0,!A){const ce=Math.pow(2,8*v)-1;oe(this,f,d,v,ce,0)}let V=1,B=0;for(this[d]=f&255;++B<v&&(V*=256);)this[d+B]=f/V&255;return d+v},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(f,d,v,A){if(f=+f,d=d>>>0,v=v>>>0,!A){const ce=Math.pow(2,8*v)-1;oe(this,f,d,v,ce,0)}let V=v-1,B=1;for(this[d+V]=f&255;--V>=0&&(B*=256);)this[d+V]=f/B&255;return d+v},a.prototype.writeUint8=a.prototype.writeUInt8=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,1,255,0),this[d]=f&255,d+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,2,65535,0),this[d]=f&255,this[d+1]=f>>>8,d+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,2,65535,0),this[d]=f>>>8,this[d+1]=f&255,d+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,4,4294967295,0),this[d+3]=f>>>24,this[d+2]=f>>>16,this[d+1]=f>>>8,this[d]=f&255,d+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,4,4294967295,0),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4};function qe(g,f,d,v,A){E(f,v,A,g,d,7);let V=Number(f&BigInt(4294967295));g[d++]=V,V=V>>8,g[d++]=V,V=V>>8,g[d++]=V,V=V>>8,g[d++]=V;let B=Number(f>>BigInt(32)&BigInt(4294967295));return g[d++]=B,B=B>>8,g[d++]=B,B=B>>8,g[d++]=B,B=B>>8,g[d++]=B,d}function Ye(g,f,d,v,A){E(f,v,A,g,d,7);let V=Number(f&BigInt(4294967295));g[d+7]=V,V=V>>8,g[d+6]=V,V=V>>8,g[d+5]=V,V=V>>8,g[d+4]=V;let B=Number(f>>BigInt(32)&BigInt(4294967295));return g[d+3]=B,B=B>>8,g[d+2]=B,B=B>>8,g[d+1]=B,B=B>>8,g[d]=B,d+8}a.prototype.writeBigUInt64LE=re(function(f,d=0){return qe(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=re(function(f,d=0){return Ye(this,f,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(f,d,v,A){if(f=+f,d=d>>>0,!A){const pe=Math.pow(2,8*v-1);oe(this,f,d,v,pe-1,-pe)}let V=0,B=1,ce=0;for(this[d]=f&255;++V<v&&(B*=256);)f<0&&ce===0&&this[d+V-1]!==0&&(ce=1),this[d+V]=(f/B>>0)-ce&255;return d+v},a.prototype.writeIntBE=function(f,d,v,A){if(f=+f,d=d>>>0,!A){const pe=Math.pow(2,8*v-1);oe(this,f,d,v,pe-1,-pe)}let V=v-1,B=1,ce=0;for(this[d+V]=f&255;--V>=0&&(B*=256);)f<0&&ce===0&&this[d+V+1]!==0&&(ce=1),this[d+V]=(f/B>>0)-ce&255;return d+v},a.prototype.writeInt8=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,1,127,-128),f<0&&(f=255+f+1),this[d]=f&255,d+1},a.prototype.writeInt16LE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,2,32767,-32768),this[d]=f&255,this[d+1]=f>>>8,d+2},a.prototype.writeInt16BE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,2,32767,-32768),this[d]=f>>>8,this[d+1]=f&255,d+2},a.prototype.writeInt32LE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,4,2147483647,-2147483648),this[d]=f&255,this[d+1]=f>>>8,this[d+2]=f>>>16,this[d+3]=f>>>24,d+4},a.prototype.writeInt32BE=function(f,d,v){return f=+f,d=d>>>0,v||oe(this,f,d,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[d]=f>>>24,this[d+1]=f>>>16,this[d+2]=f>>>8,this[d+3]=f&255,d+4},a.prototype.writeBigInt64LE=re(function(f,d=0){return qe(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=re(function(f,d=0){return Ye(this,f,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fe(g,f,d,v,A,V){if(d+v>g.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function be(g,f,d,v,A){return f=+f,d=d>>>0,A||fe(g,f,d,4),t.write(g,f,d,v,23,4),d+4}a.prototype.writeFloatLE=function(f,d,v){return be(this,f,d,!0,v)},a.prototype.writeFloatBE=function(f,d,v){return be(this,f,d,!1,v)};function Me(g,f,d,v,A){return f=+f,d=d>>>0,A||fe(g,f,d,8),t.write(g,f,d,v,52,8),d+8}a.prototype.writeDoubleLE=function(f,d,v){return Me(this,f,d,!0,v)},a.prototype.writeDoubleBE=function(f,d,v){return Me(this,f,d,!1,v)},a.prototype.copy=function(f,d,v,A){if(!a.isBuffer(f))throw new TypeError("argument should be a Buffer");if(v||(v=0),!A&&A!==0&&(A=this.length),d>=f.length&&(d=f.length),d||(d=0),A>0&&A<v&&(A=v),A===v||f.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),f.length-d<A-v&&(A=f.length-d+v);const V=A-v;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,v,A):Uint8Array.prototype.set.call(f,this.subarray(v,A),d),V},a.prototype.fill=function(f,d,v,A){if(typeof f=="string"){if(typeof d=="string"?(A=d,d=0,v=this.length):typeof v=="string"&&(A=v,v=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(f.length===1){const B=f.charCodeAt(0);(A==="utf8"&&B<128||A==="latin1")&&(f=B)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(d<0||this.length<d||this.length<v)throw new RangeError("Out of range index");if(v<=d)return this;d=d>>>0,v=v===void 0?this.length:v>>>0,f||(f=0);let V;if(typeof f=="number")for(V=d;V<v;++V)this[V]=f;else{const B=a.isBuffer(f)?f:a.from(f,A),ce=B.length;if(ce===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(V=0;V<v-d;++V)this[V+d]=B[V%ce]}return this};const se={};function rt(g,f,d){se[g]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}rt("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),rt("ERR_INVALID_ARG_TYPE",function(g,f){return`The "${g}" argument must be of type number. Received type ${typeof f}`},TypeError),rt("ERR_OUT_OF_RANGE",function(g,f,d){let v=`The value of "${g}" is out of range.`,A=d;return Number.isInteger(d)&&Math.abs(d)>2**32?A=Qe(String(d)):typeof d=="bigint"&&(A=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(A=Qe(A)),A+="n"),v+=` It must be ${f}. Received ${A}`,v},RangeError);function Qe(g){let f="",d=g.length;const v=g[0]==="-"?1:0;for(;d>=v+4;d-=3)f=`_${g.slice(d-3,d)}${f}`;return`${g.slice(0,d)}${f}`}function vt(g,f,d){C(f,"offset"),(g[f]===void 0||g[f+d]===void 0)&&$(f,g.length-(d+1))}function E(g,f,d,v,A,V){if(g>d||g<f){const B=typeof f=="bigint"?"n":"";let ce;throw f===0||f===BigInt(0)?ce=`>= 0${B} and < 2${B} ** ${(V+1)*8}${B}`:ce=`>= -(2${B} ** ${(V+1)*8-1}${B}) and < 2 ** ${(V+1)*8-1}${B}`,new se.ERR_OUT_OF_RANGE("value",ce,g)}vt(v,A,V)}function C(g,f){if(typeof g!="number")throw new se.ERR_INVALID_ARG_TYPE(f,"number",g)}function $(g,f,d){throw Math.floor(g)!==g?(C(g,d),new se.ERR_OUT_OF_RANGE("offset","an integer",g)):f<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,g)}const R=/[^+/0-9A-Za-z-_]/g;function U(g){if(g=g.split("=")[0],g=g.trim().replace(R,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function W(g,f){f=f||1/0;let d;const v=g.length;let A=null;const V=[];for(let B=0;B<v;++B){if(d=g.charCodeAt(B),d>55295&&d<57344){if(!A){if(d>56319){(f-=3)>-1&&V.push(239,191,189);continue}else if(B+1===v){(f-=3)>-1&&V.push(239,191,189);continue}A=d;continue}if(d<56320){(f-=3)>-1&&V.push(239,191,189),A=d;continue}d=(A-55296<<10|d-56320)+65536}else A&&(f-=3)>-1&&V.push(239,191,189);if(A=null,d<128){if((f-=1)<0)break;V.push(d)}else if(d<2048){if((f-=2)<0)break;V.push(d>>6|192,d&63|128)}else if(d<65536){if((f-=3)<0)break;V.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((f-=4)<0)break;V.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return V}function z(g){const f=[];for(let d=0;d<g.length;++d)f.push(g.charCodeAt(d)&255);return f}function j(g,f){let d,v,A;const V=[];for(let B=0;B<g.length&&!((f-=2)<0);++B)d=g.charCodeAt(B),v=d>>8,A=d%256,V.push(A),V.push(v);return V}function M(g){return e.toByteArray(U(g))}function N(g,f,d,v){let A;for(A=0;A<v&&!(A+d>=f.length||A>=g.length);++A)f[A+d]=g[A];return A}function H(g,f){return g instanceof f||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===f.name}function Z(g){return g!==g}const Q=function(){const g="0123456789abcdef",f=new Array(256);for(let d=0;d<16;++d){const v=d*16;for(let A=0;A<16;++A)f[v+A]=g[d]+g[A]}return f}();function re(g){return typeof BigInt>"u"?ue:g}function ue(){throw new Error("BigInt not supported")}}(xo)),xo}Vm();const eh="14.9.17",zc=(n,e,t)=>({endTime:e,insertTime:t,type:"exponentialRampToValue",value:n}),Yc=(n,e,t)=>({endTime:e,insertTime:t,type:"linearRampToValue",value:n}),Go=(n,e)=>({startTime:e,type:"setValue",value:n}),th=(n,e,t)=>({duration:t,startTime:e,type:"setValueCurve",values:n}),nh=(n,e,{startTime:t,target:s,timeConstant:r})=>s+(e-s)*Math.exp((t-n)/r),ls=n=>n.type==="exponentialRampToValue",di=n=>n.type==="linearRampToValue",bn=n=>ls(n)||di(n),Oa=n=>n.type==="setValue",rn=n=>n.type==="setValueCurve",pi=(n,e,t,s)=>{const r=n[e];return r===void 0?s:bn(r)||Oa(r)?r.value:rn(r)?r.values[r.values.length-1]:nh(t,pi(n,e-1,r.startTime,s),r)},Zc=(n,e,t,s,r)=>t===void 0?[s.insertTime,r]:bn(t)?[t.endTime,t.value]:Oa(t)?[t.startTime,t.value]:rn(t)?[t.startTime+t.duration,t.values[t.values.length-1]]:[t.startTime,pi(n,e-1,t.startTime,r)],Ho=n=>n.type==="cancelAndHold",zo=n=>n.type==="cancelScheduledValues",mn=n=>Ho(n)||zo(n)?n.cancelTime:ls(n)||di(n)?n.endTime:n.startTime,Xc=(n,e,t,{endTime:s,value:r})=>t===r?r:0<t&&0<r||t<0&&r<0?t*(r/t)**((n-e)/(s-e)):0,Kc=(n,e,t,{endTime:s,value:r})=>t+(n-e)/(s-e)*(r-t),Um=(n,e)=>{const t=Math.floor(e),s=Math.ceil(e);return t===s?n[t]:(1-(e-t))*n[t]+(1-(s-e))*n[s]},$m=(n,{duration:e,startTime:t,values:s})=>{const r=(n-t)/e*(s.length-1);return Um(s,r)},Vr=n=>n.type==="setTarget";class qm{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const t=mn(e);if(Ho(e)||zo(e)){const s=this._automationEvents.findIndex(i=>zo(e)&&rn(i)?i.startTime+i.duration>=t:mn(i)>=t),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Ho(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&bn(r)){if(i!==void 0&&Vr(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:rn(i)?i.startTime+i.duration:mn(i),a=i===void 0?this._defaultValue:rn(i)?i.values[i.values.length-1]:i.value,c=ls(r)?Xc(t,o,a,r):Kc(t,o,a,r),u=ls(r)?zc(c,t,this._currenTime):Yc(c,t,this._currenTime);this._automationEvents.push(u)}if(i!==void 0&&Vr(i)&&this._automationEvents.push(Go(this.getValue(t),t)),i!==void 0&&rn(i)&&i.startTime+i.duration>t){const o=t-i.startTime,a=(i.values.length-1)/i.duration,c=Math.max(2,1+Math.ceil(o*a)),u=o/(c-1)*a,l=i.values.slice(0,c);if(u<1)for(let h=1;h<c;h+=1){const m=u*h%1;l[h]=i.values[h-1]*(1-m)+i.values[h]*m}this._automationEvents[this._automationEvents.length-1]=th(l,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>mn(o)>t),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&rn(r)&&mn(r)+r.duration>t)return!1;const i=ls(e)?zc(e.value,e.endTime,this._currenTime):di(e)?Yc(e.value,t,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(rn(e)&&t+e.duration>mn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const t=this._automationEvents.findIndex(s=>mn(s)>e);if(t>1){const s=this._automationEvents.slice(t-1),r=s[0];Vr(r)&&s.unshift(Go(pi(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const t=this._automationEvents.findIndex(o=>mn(o)>e),s=this._automationEvents[t],r=(t===-1?this._automationEvents.length:t)-1,i=this._automationEvents[r];if(i!==void 0&&Vr(i)&&(s===void 0||!bn(s)||s.insertTime>e))return nh(e,pi(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Oa(i)&&(s===void 0||!bn(s)))return i.value;if(i!==void 0&&rn(i)&&(s===void 0||!bn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?$m(e,i):i.values[i.values.length-1];if(i!==void 0&&bn(i)&&(s===void 0||!bn(s)))return i.value;if(s!==void 0&&ls(s)){const[o,a]=Zc(this._automationEvents,r,i,s,this._defaultValue);return Xc(e,o,a,s)}if(s!==void 0&&di(s)){const[o,a]=Zc(this._automationEvents,r,i,s,this._defaultValue);return Kc(e,o,a,s)}return this._defaultValue}}const Wm=n=>({cancelTime:n,type:"cancelAndHold"}),jm=n=>({cancelTime:n,type:"cancelScheduledValues"}),Gm=(n,e)=>({endTime:e,type:"exponentialRampToValue",value:n}),Hm=(n,e)=>({endTime:e,type:"linearRampToValue",value:n}),zm=(n,e,t)=>({startTime:e,target:n,timeConstant:t,type:"setTarget"}),Ym=()=>new DOMException("","AbortError"),Zm=n=>(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)},Xm=n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})},Km=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})},ws=new WeakSet,sh=new WeakMap,Ra=new WeakMap,rh=new WeakMap,Da=new WeakMap,Qi=new WeakMap,ih=new WeakMap,Yo=new WeakMap,Zo=new WeakMap,Xo=new WeakMap,oh={construct(){return oh}},Jm=n=>{try{const e=new Proxy(n,oh);new e}catch{return!1}return!0},Jc=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Qc=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(Jc);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Jc)}return[t.join(";"),s]},el=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},tl=n=>{if(!Jm(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Qm=(n,e,t,s,r,i,o,a,c,u,l,h,m)=>{let p=0;return(y,b,w={credentials:"omit"})=>{const S=l.get(y);if(S!==void 0&&S.has(b))return Promise.resolve();const O=u.get(y);if(O!==void 0){const _=O.get(b);if(_!==void 0)return _}const F=i(y),I=F.audioWorklet===void 0?r(b).then(([_,k])=>{const[T,x]=Qc(_,k),L=`${T};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${x}
})})(window,'_AWGS')`;return t(L)}).then(()=>{const _=m._AWGS.pop();if(_===void 0)throw new SyntaxError;s(F.currentTime,F.sampleRate,()=>_(class{},void 0,(k,T)=>{if(k.trim()==="")throw e();const x=Zo.get(F);if(x!==void 0){if(x.has(k))throw e();tl(T),el(T.parameterDescriptors),x.set(k,T)}else tl(T),el(T.parameterDescriptors),Zo.set(F,new Map([[k,T]]))},F.sampleRate,void 0,void 0))}):Promise.all([r(b),Promise.resolve(n(h,h))]).then(([[_,k],T])=>{const x=p+1;p=x;const[L,P]=Qc(_,k),K=`${L};((AudioWorkletProcessor,registerProcessor)=>{${P}
})(${T?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${T?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${T?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${x}',class extends AudioWorkletProcessor{process(){return !1}})`,ne=new Blob([K],{type:"application/javascript; charset=utf-8"}),Y=URL.createObjectURL(ne);return F.audioWorklet.addModule(Y,w).then(()=>{if(a(F))return F;const G=o(F);return G.audioWorklet.addModule(Y,w).then(()=>G)}).then(G=>{if(c===null)throw new SyntaxError;try{new c(G,`__sac${x}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Y))});return O===void 0?u.set(y,new Map([[b,I]])):O.set(b,I),I.then(()=>{const _=l.get(y);_===void 0?l.set(y,new Set([b])):_.add(b)}).finally(()=>{const _=u.get(y);_!==void 0&&_.delete(b)}),I}},$t=(n,e)=>{const t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t},eo=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");const[s]=t;return n.delete(s),s},ah=(n,e,t,s)=>{const r=$t(n,e),i=eo(r,o=>o[0]===t&&o[1]===s);return r.size===0&&n.delete(e),i},Tr=n=>$t(ih,n),xs=n=>{if(ws.has(n))throw new Error("The AudioNode is already stored.");ws.add(n),Tr(n).forEach(e=>e(!0))},ch=n=>"port"in n,Sr=n=>{if(!ws.has(n))throw new Error("The AudioNode is not stored.");ws.delete(n),Tr(n).forEach(e=>e(!1))},Ko=(n,e)=>{!ch(n)&&e.every(t=>t.size===0)&&Sr(n)},eg=(n,e,t,s,r,i,o,a,c,u,l,h,m)=>{const p=new WeakMap;return(y,b,w,S,O)=>{const{activeInputs:F,passiveInputs:I}=i(b),{outputs:_}=i(y),k=a(y),T=x=>{const L=c(b),P=c(y);if(x){const q=ah(I,y,w,S);n(F,y,q,!1),!O&&!h(y)&&t(P,L,w,S),m(b)&&xs(b)}else{const q=s(F,y,w,S);e(I,S,q,!1),!O&&!h(y)&&r(P,L,w,S);const D=o(b);if(D===0)l(b)&&Ko(b,F);else{const X=p.get(b);X!==void 0&&clearTimeout(X),p.set(b,setTimeout(()=>{l(b)&&Ko(b,F)},D*1e3))}}};return u(_,[b,w,S],x=>x[0]===b&&x[1]===w&&x[2]===S,!0)?(k.add(T),l(y)?n(F,y,[w,S,T],!0):e(I,S,[y,w,T],!0),!0):!1}},tg=n=>(e,t,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)},ng=n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)},sg=n=>(e,t)=>{n(e).add(t)},rg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ig=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=r(a),l={...rg,...c},h=s(u,l),m=i(u)?e():null;super(a,!1,h,m),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},ht=(n,e)=>n.context===e,og=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(o,u)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},mi=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Qt=()=>new DOMException("","IndexSizeError"),Pa=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(s){throw s.code===12?Qt():s}})(n.getChannelData)},ag={numberOfChannels:1},cg=(n,e,t,s,r,i,o,a)=>{let c=null;return class lh{constructor(l){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:m,sampleRate:p}={...ag,...l};c===null&&(c=new r(1,1,44100));const y=s!==null&&e(i,i)?new s({length:h,numberOfChannels:m,sampleRate:p}):c.createBuffer(m,h,p);if(y.numberOfChannels===0)throw t();return typeof y.copyFromChannel!="function"?(o(y),Pa(y)):e(mi,()=>mi(y))||a(y),n.add(y),y}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===lh.prototype||n.has(l)}}},It=-34028234663852886e22,gt=34028234663852886e22,cn=n=>ws.has(n),lg={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ug=(n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),m={...lg,...l},p=r(h,m),y=o(h),b=y?e():null;super(u,!1,p,b),this._audioBufferSourceNodeRenderer=b,this._isBufferNullified=!1,this._isBufferSet=m.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=t(this,y,p.playbackRate,gt,It)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,u!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const l=typeof u=="function"?a(this,u):null;this._nativeAudioBufferSourceNode.onended=l;const h=this._nativeAudioBufferSourceNode.onended;this._onended=h!==null&&h===l?u:h}get playbackRate(){return this._playbackRate}start(u=0,l=0,h){if(this._nativeAudioBufferSourceNode.start(u,l,h),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=h===void 0?[u,l]:[u,l,h]),this.context.state!=="closed"){xs(this);const m=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",m),cn(this)&&Sr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",m)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=u)}},hg=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(u,l)=>{let h=t(u);const m=ht(h,l);if(!m){const p={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(l,p),o!==null&&h.start(...o),a!==null&&h.stop(a)}return i.set(l,h),m?await n(l,u.playbackRate,h.playbackRate):await s(l,u.playbackRate,h.playbackRate),await r(u,l,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=i.get(l);return h!==void 0?Promise.resolve(h):c(u,l)}}},fg=n=>"playbackRate"in n,dg=n=>"frequency"in n&&"gain"in n,pg=n=>"offset"in n,mg=n=>!("frequency"in n)&&"gain"in n,gg=n=>"detune"in n&&"frequency"in n&&!("gain"in n),_g=n=>"pan"in n,yt=n=>$t(sh,n),kr=n=>$t(rh,n),Jo=(n,e)=>{const{activeInputs:t}=yt(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||Jo(i,[...e,n])}));const s=fg(n)?[n.playbackRate]:ch(n)?Array.from(n.parameters.values()):dg(n)?[n.Q,n.detune,n.frequency,n.gain]:pg(n)?[n.offset]:mg(n)?[n.gain]:gg(n)?[n.detune,n.frequency]:_g(n)?[n.pan]:[];for(const r of s){const i=kr(r);i!==void 0&&i.activeInputs.forEach(([o])=>Jo(o,e))}cn(n)&&Sr(n)},uh=n=>{Jo(n.destination,[])},yg=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),bg=(n,e,t,s,r,i,o,a,c)=>class extends n{constructor(l={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(l)}catch(y){throw y.code===12&&y.message==="sampleRate is not in range"?t():y}if(h===null)throw s();if(!yg(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&h.sampleRate!==l.sampleRate)throw t();super(h,2);const{latencyHint:m}=l,{sampleRate:p}=h;if(this._baseLatency=typeof h.baseLatency=="number"?h.baseLatency:m==="balanced"?512/p:m==="interactive"||m===void 0?256/p:m==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(m*p/128)))*128/p,this._nativeAudioContext=h,c.name==="webkitAudioContext"?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,h.state==="running"){this._state="suspended";const y=()=>{this._state==="suspended"&&(this._state=null),h.removeEventListener("statechange",y)};h.addEventListener("statechange",y)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),uh(this)}))}createMediaElementSource(l){return new r(this,{mediaElement:l})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(l){return new o(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,h)=>{const m=()=>{this._nativeAudioContext.removeEventListener("statechange",m),this._nativeAudioContext.state==="running"?l():this.resume().then(l,h)};this._nativeAudioContext.addEventListener("statechange",m)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?e():l})}},vg=(n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),m=o(h),p=r(h,l,m),y=m?e(a):null;super(u,!1,p,y),this._isNodeOfNativeOfflineAudioContext=m,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},wg=n=>{const e=new WeakMap,t=async(s,r)=>{const i=r.destination;return e.set(r,i),await n(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):t(s,r)}}},xg=(n,e,t,s,r,i,o,a)=>(c,u)=>{const l=u.listener,h=()=>{const _=new Float32Array(1),k=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),T=o(u);let x=!1,L=[0,0,-1,0,1,0],P=[0,0,0];const q=()=>{if(x)return;x=!0;const ne=s(u,256,9,0);ne.onaudioprocess=({inputBuffer:Y})=>{const G=[i(Y,_,0),i(Y,_,1),i(Y,_,2),i(Y,_,3),i(Y,_,4),i(Y,_,5)];G.some((ie,ae)=>ie!==L[ae])&&(l.setOrientation(...G),L=G);const J=[i(Y,_,6),i(Y,_,7),i(Y,_,8)];J.some((ie,ae)=>ie!==P[ae])&&(l.setPosition(...J),P=J)},k.connect(ne)},D=ne=>Y=>{Y!==L[ne]&&(L[ne]=Y,l.setOrientation(...L))},X=ne=>Y=>{Y!==P[ne]&&(P[ne]=Y,l.setPosition(...P))},K=(ne,Y,G)=>{const J=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y});J.connect(k,0,ne),J.start(),Object.defineProperty(J.offset,"defaultValue",{get(){return Y}});const ie=n({context:c},T,J.offset,gt,It);return a(ie,"value",ae=>()=>ae.call(ie),ae=>ee=>{try{ae.call(ie,ee)}catch(oe){if(oe.code!==9)throw oe}q(),T&&G(ee)}),ie.cancelAndHoldAtTime=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.cancelAndHoldAtTime),ie.cancelScheduledValues=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.cancelScheduledValues),ie.exponentialRampToValueAtTime=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.exponentialRampToValueAtTime),ie.linearRampToValueAtTime=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.linearRampToValueAtTime),ie.setTargetAtTime=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.setTargetAtTime),ie.setValueAtTime=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.setValueAtTime),ie.setValueCurveAtTime=(ae=>T?()=>{throw r()}:(...ee)=>{const oe=ae.apply(ie,ee);return q(),oe})(ie.setValueCurveAtTime),ie};return{forwardX:K(0,0,D(0)),forwardY:K(1,0,D(1)),forwardZ:K(2,-1,D(2)),positionX:K(6,0,X(0)),positionY:K(7,0,X(1)),positionZ:K(8,0,X(2)),upX:K(3,0,D(3)),upY:K(4,1,D(4)),upZ:K(5,0,D(5))}},{forwardX:m,forwardY:p,forwardZ:y,positionX:b,positionY:w,positionZ:S,upX:O,upY:F,upZ:I}=l.forwardX===void 0?h():l;return{get forwardX(){return m},get forwardY(){return p},get forwardZ(){return y},get positionX(){return b},get positionY(){return w},get positionZ(){return S},get upX(){return O},get upY(){return F},get upZ(){return I}}},gi=n=>"context"in n,Ir=n=>gi(n[0]),ts=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},nl=(n,e,[t,s],r)=>{ts(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},sl=(n,[e,t,s],r)=>{const i=n.get(e);i===void 0?n.set(e,new Set([[t,s]])):ts(i,[t,s],o=>o[0]===t,r)},Cs=n=>"inputs"in n,_i=(n,e,t,s)=>{if(Cs(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},hh=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},Tg=(n,e,t)=>eo(n,s=>s[0]===e&&s[1]===t),fh=(n,e)=>{if(!Tr(n).delete(e))throw new Error("Missing the expected event listener.")},dh=(n,e,t)=>{const s=$t(n,e),r=eo(s,i=>i[0]===t);return s.size===0&&n.delete(e),r},yi=(n,e,t,s)=>{Cs(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},Pe=n=>$t(Ra,n),ir=n=>$t(Da,n),zn=n=>Yo.has(n),Kr=n=>!ws.has(n),rl=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>l===1)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),To=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,i===void 0?1:i+1)}t.forEach((s,r)=>e(r,s))},bi=n=>"context"in n,Sg=n=>{const e=new Map;n.connect=(t=>(s,r=0,i=0)=>{const o=bi(s)?t(s,r,i):t(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o})(n.connect.bind(n)),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const c=a.filter(u=>u.output!==s);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(c=>c.output!==r&&(c.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{bi(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)},kg=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=kr(e),{outputs:o}=yt(n),a=Tr(n),c=u=>{const l=Pe(n),h=ir(e);if(u){const m=dh(i,n,t);nl(r,n,m,!1),!s&&!zn(n)&&l.connect(h,t)}else{const m=Tg(r,n,t);sl(i,m,!1),!s&&!zn(n)&&l.disconnect(h,t)}};return ts(o,[e,t],u=>u[0]===e&&u[1]===t,!0)?(a.add(c),cn(n)?nl(r,n,[t,c],!0):sl(i,[n,t,c],!0),!0):!1},Ig=(n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=yt(e),o=hh(r[s],n,t);return o===null?[ah(i,n,t,s)[2],!1]:[o[2],!0]},Eg=(n,e,t)=>{const{activeInputs:s,passiveInputs:r}=kr(e),i=hh(s,n,t);return i===null?[dh(r,n,t)[1],!1]:[i[2],!0]},Fa=(n,e,t,s,r)=>{const[i,o]=Ig(n,t,s,r);if(i!==null&&(fh(n,i),o&&!e&&!zn(n)&&yi(Pe(n),Pe(t),s,r)),cn(t)){const{activeInputs:a}=yt(t);Ko(t,a)}},Ba=(n,e,t,s)=>{const[r,i]=Eg(n,t,s);r!==null&&(fh(n,r),i&&!e&&!zn(n)&&Pe(n).disconnect(ir(t),s))},Cg=(n,e)=>{const t=yt(n),s=[];for(const r of t.outputs)Ir(r)?Fa(n,e,...r):Ba(n,e,...r),s.push(r[0]);return t.outputs.clear(),s},Ag=(n,e,t)=>{const s=yt(n),r=[];for(const i of s.outputs)i[1]===t&&(Ir(i)?Fa(n,e,...i):Ba(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r},Mg=(n,e,t,s,r)=>{const i=yt(n);return Array.from(i.outputs).filter(o=>o[0]===t&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Ir(o)?Fa(n,e,...o):Ba(n,e,...o),i.outputs.delete(o),o[0]))},Ng=(n,e,t,s,r,i,o,a,c,u,l,h,m,p,y,b)=>class extends u{constructor(S,O,F,I){super(F),this._context=S,this._nativeAudioNode=F;const _=l(S);h(_)&&t(rl,()=>rl(_,b))!==!0&&Sg(F),Ra.set(this,F),ih.set(this,new Set),S.state!=="closed"&&O&&xs(this),n(this,I,F)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(S){this._nativeAudioNode.channelCount=S}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(S){this._nativeAudioNode.channelCountMode=S}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(S){this._nativeAudioNode.channelInterpretation=S}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(S,O=0,F=0){if(O<0||O>=this._nativeAudioNode.numberOfOutputs)throw r();const I=l(this._context),_=y(I);if(m(S)||p(S))throw i();if(gi(S)){const x=Pe(S);try{const P=_i(this._nativeAudioNode,x,O,F),q=Kr(this);(_||q)&&this._nativeAudioNode.disconnect(...P),this.context.state!=="closed"&&!q&&Kr(S)&&xs(S)}catch(P){throw P.code===12?i():P}if(e(this,S,O,F,_)){const P=c([this],S);To(P,s(_))}return S}const k=ir(S);if(k.name==="playbackRate"&&k.maxValue===1024)throw o();try{this._nativeAudioNode.connect(k,O),(_||Kr(this))&&this._nativeAudioNode.disconnect(k,O)}catch(x){throw x.code===12?i():x}if(kg(this,S,O,_)){const x=c([this],S);To(x,s(_))}}disconnect(S,O,F){let I;const _=l(this._context),k=y(_);if(S===void 0)I=Cg(this,k);else if(typeof S=="number"){if(S<0||S>=this.numberOfOutputs)throw r();I=Ag(this,k,S)}else{if(O!==void 0&&(O<0||O>=this.numberOfOutputs)||gi(S)&&F!==void 0&&(F<0||F>=S.numberOfInputs))throw r();if(I=Mg(this,k,S,O,F),I.length===0)throw i()}for(const T of I){const x=c([this],T);To(x,a)}}},Og=(n,e,t,s,r,i,o,a,c,u,l,h,m)=>(p,y,b,w=null,S=null)=>{const O=b.value,F=new qm(O),I=y?s(F):null,_={get defaultValue(){return O},get maxValue(){return w===null?b.maxValue:w},get minValue(){return S===null?b.minValue:S},get value(){return b.value},set value(k){b.value=k,_.setValueAtTime(k,p.context.currentTime)},cancelAndHoldAtTime(k){if(typeof b.cancelAndHoldAtTime=="function")I===null&&F.flush(p.context.currentTime),F.add(r(k)),b.cancelAndHoldAtTime(k);else{const T=Array.from(F).pop();I===null&&F.flush(p.context.currentTime),F.add(r(k));const x=Array.from(F).pop();b.cancelScheduledValues(k),T!==x&&x!==void 0&&(x.type==="exponentialRampToValue"?b.exponentialRampToValueAtTime(x.value,x.endTime):x.type==="linearRampToValue"?b.linearRampToValueAtTime(x.value,x.endTime):x.type==="setValue"?b.setValueAtTime(x.value,x.startTime):x.type==="setValueCurve"&&b.setValueCurveAtTime(x.values,x.startTime,x.duration))}return _},cancelScheduledValues(k){return I===null&&F.flush(p.context.currentTime),F.add(i(k)),b.cancelScheduledValues(k),_},exponentialRampToValueAtTime(k,T){if(k===0)throw new RangeError;if(!Number.isFinite(T)||T<0)throw new RangeError;const x=p.context.currentTime;return I===null&&F.flush(x),Array.from(F).length===0&&(F.add(u(O,x)),b.setValueAtTime(O,x)),F.add(o(k,T)),b.exponentialRampToValueAtTime(k,T),_},linearRampToValueAtTime(k,T){const x=p.context.currentTime;return I===null&&F.flush(x),Array.from(F).length===0&&(F.add(u(O,x)),b.setValueAtTime(O,x)),F.add(a(k,T)),b.linearRampToValueAtTime(k,T),_},setTargetAtTime(k,T,x){return I===null&&F.flush(p.context.currentTime),F.add(c(k,T,x)),b.setTargetAtTime(k,T,x),_},setValueAtTime(k,T){return I===null&&F.flush(p.context.currentTime),F.add(u(k,T)),b.setValueAtTime(k,T),_},setValueCurveAtTime(k,T,x){const L=k instanceof Float32Array?k:new Float32Array(k);if(h!==null&&h.name==="webkitAudioContext"){const P=T+x,q=p.context.sampleRate,D=Math.ceil(T*q),X=Math.floor(P*q),K=X-D,ne=new Float32Array(K);for(let G=0;G<K;G+=1){const J=(L.length-1)/x*((D+G)/q-T),ie=Math.floor(J),ae=Math.ceil(J);ne[G]=ie===ae?L[ie]:(1-(J-ie))*L[ie]+(1-(ae-J))*L[ae]}I===null&&F.flush(p.context.currentTime),F.add(l(ne,T,x)),b.setValueCurveAtTime(ne,T,x);const Y=X/q;Y<P&&m(_,ne[ne.length-1],Y),m(_,L[L.length-1],P)}else I===null&&F.flush(p.context.currentTime),F.add(l(L,T,x)),b.setValueCurveAtTime(L,T,x);return _}};return t.set(_,b),e.set(_,p),n(_,I),_},Rg=n=>({replay(e){for(const t of n)if(t.type==="exponentialRampToValue"){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if(t.type==="linearRampToValue"){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if(t.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if(t.type==="setValue"){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else if(t.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class ph{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Dg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Pg=(n,e,t,s,r,i,o,a,c,u,l,h,m,p)=>class extends e{constructor(b,w,S){var O;const F=a(b),I=c(F),_=l({...Dg,...S});m(_);const k=Zo.get(F),T=k==null?void 0:k.get(w),x=I||F.state!=="closed"?F:(O=o(F))!==null&&O!==void 0?O:F,L=r(x,I?null:b.baseLatency,u,w,T,_),P=I?s(w,_,T):null;super(b,!0,L,P);const q=[];L.parameters.forEach((X,K)=>{const ne=t(this,I,X);q.push([K,ne])}),this._nativeAudioWorkletNode=L,this._onprocessorerror=null,this._parameters=new ph(q),I&&n(F,this);const{activeInputs:D}=i(this);h(L,D)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(b){const w=typeof b=="function"?p(this,b):null;this._nativeAudioWorkletNode.onprocessorerror=w;const S=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=S!==null&&S===w?b:S}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function vi(n,e,t,s,r){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(e[t].byteLength===0)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const mh=(n,e,t,s,r)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],s,r):e[t].byteLength!==0&&n.getChannelData(s).set(e[t],r)},wi=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},Fg=(n,e)=>{const t=$t(Xo,n),s=Pe(e);return $t(t,s)},Bg=async(n,e,t,s,r,i,o)=>{const a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=s.channelCount*s.numberOfInputs,u=r.reduce((w,S)=>w+S,0),l=u===0?null:t.createBuffer(u,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const h=yt(n),m=await Fg(t,n),p=wi(s.numberOfInputs,s.channelCount),y=wi(s.numberOfOutputs,r),b=Array.from(n.parameters.keys()).reduce((w,S)=>({...w,[S]:new Float32Array(128)}),{});for(let w=0;w<a;w+=128){if(s.numberOfInputs>0&&e!==null)for(let S=0;S<s.numberOfInputs;S+=1)for(let O=0;O<s.channelCount;O+=1)vi(e,p[S],O,O,w);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:S},O)=>{vi(e,b,S,c+O,w)});for(let S=0;S<s.numberOfInputs;S+=1)for(let O=0;O<r[S];O+=1)y[S][O].byteLength===0&&(y[S][O]=new Float32Array(128));try{const S=p.map((F,I)=>h.activeInputs[I].size===0?[]:F),O=o(w/t.sampleRate,t.sampleRate,()=>m.process(S,y,b));if(l!==null)for(let F=0,I=0;F<s.numberOfOutputs;F+=1){for(let _=0;_<r[F];_+=1)mh(l,y[F],_,I+_,w);I+=r[F]}if(!O)break}catch(S){n.dispatchEvent(new ErrorEvent("processorerror",{colno:S.colno,filename:S.filename,lineno:S.lineno,message:S.message}));break}}return l},Lg=(n,e,t,s,r,i,o,a,c,u,l,h,m,p,y,b)=>(w,S,O)=>{const F=new WeakMap;let I=null;const _=async(k,T)=>{let x=l(k),L=null;const P=ht(x,T),q=Array.isArray(S.outputChannelCount)?S.outputChannelCount:Array.from(S.outputChannelCount);if(h===null){const D=q.reduce((Y,G)=>Y+G,0),X=r(T,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),K=[];for(let Y=0;Y<k.numberOfOutputs;Y+=1)K.push(s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:q[Y]}));const ne=o(T,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1});ne.connect=e.bind(null,K),ne.disconnect=c.bind(null,K),L=[X,K,ne]}else P||(x=new h(T,w));if(F.set(T,L===null?x:L[2]),L!==null){if(I===null){if(O===void 0)throw new Error("Missing the processor constructor.");if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");const G=k.channelCount*k.numberOfInputs,J=O.parameterDescriptors===void 0?0:O.parameterDescriptors.length,ie=G+J;I=Bg(k,ie===0?null:await(async()=>{const ee=new m(ie,Math.ceil(k.context.length/128)*128,T.sampleRate),oe=[],qe=[];for(let be=0;be<S.numberOfInputs;be+=1)oe.push(o(ee,{channelCount:S.channelCount,channelCountMode:S.channelCountMode,channelInterpretation:S.channelInterpretation,gain:1})),qe.push(r(ee,{channelCount:S.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:S.channelCount}));const Ye=await Promise.all(Array.from(k.parameters.values()).map(async be=>{const Me=i(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:be.value});return await p(ee,be,Me.offset),Me})),fe=s(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,G+J)});for(let be=0;be<S.numberOfInputs;be+=1){oe[be].connect(qe[be]);for(let Me=0;Me<S.channelCount;Me+=1)qe[be].connect(fe,Me,be*S.channelCount+Me)}for(const[be,Me]of Ye.entries())Me.connect(fe,0,G+be),Me.start(0);return fe.connect(ee.destination),await Promise.all(oe.map(be=>y(k,ee,be))),b(ee)})(),T,S,q,O,u)}const D=await I,X=t(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[K,ne,Y]=L;D!==null&&(X.buffer=D,X.start(0)),X.connect(K);for(let G=0,J=0;G<k.numberOfOutputs;G+=1){const ie=ne[G];for(let ae=0;ae<q[G];ae+=1)K.connect(ie,J+ae,ae);J+=q[G]}return Y}if(P)for(const[D,X]of k.parameters.entries())await n(T,X,x.parameters.get(D));else for(const[D,X]of k.parameters.entries())await p(T,X,x.parameters.get(D));return await y(k,T,x),x};return{render(k,T){a(T,k);const x=F.get(T);return x!==void 0?Promise.resolve(x):_(k,T)}}},Vg=(n,e,t,s,r,i,o,a,c,u,l,h,m,p,y,b,w,S,O,F)=>class extends y{constructor(_,k){super(_,k),this._nativeContext=_,this._audioWorklet=n===void 0?void 0:{addModule:(T,x)=>n(this,T,x)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(_,k,T){return new t({length:k,numberOfChannels:_,sampleRate:T})}createBufferSource(){return new s(this)}createChannelMerger(_=6){return new i(this,{numberOfInputs:_})}createChannelSplitter(_=6){return new o(this,{numberOfOutputs:_})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(_=1){return new l(this,{maxDelayTime:_})}createDynamicsCompressor(){return new h(this)}createGain(){return new m(this)}createIIRFilter(_,k){return new p(this,{feedback:k,feedforward:_})}createOscillator(){return new b(this)}createPanner(){return new w(this)}createPeriodicWave(_,k,T={disableNormalization:!1}){return new S(this,{...T,imag:k,real:_})}createStereoPanner(){return new O(this)}createWaveShaper(){return new F(this)}decodeAudioData(_,k,T){return u(this._nativeContext,_).then(x=>(typeof k=="function"&&k(x),x),x=>{throw typeof T=="function"&&T(x),x})}},Ug={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},$g=(n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),m={...Ug,...l},p=r(h,m),y=o(h),b=y?t():null;super(u,!1,p,b),this._Q=e(this,y,p.Q,gt,It),this._detune=e(this,y,p.detune,1200*Math.log2(gt),-1200*Math.log2(gt)),this._frequency=e(this,y,p.frequency,u.sampleRate/2,0),this._gain=e(this,y,p.gain,40*Math.log10(gt),It),this._nativeBiquadFilterNode=p,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,h)}catch(m){throw m.code===11?s():m}if(u.length!==l.length||l.length!==h.length)throw s()}},qg=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=t(a);const l=ht(u,c);if(!l){const h={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(c,h)}return i.set(c,u),l?(await n(c,a.Q,u.Q),await n(c,a.detune,u.detune),await n(c,a.frequency,u.frequency),await n(c,a.gain,u.gain)):(await s(c,a.Q,u.Q),await s(c,a.detune,u.detune),await s(c,a.frequency,u.frequency),await s(c,a.gain,u.gain)),await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},Wg=(n,e)=>(t,s)=>{const r=e.get(t);if(r!==void 0)return r;const i=n.get(t);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}},jg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Gg=(n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),u={...jg,...a},l=t(c,u),h=r(c)?e():null;super(o,!1,l,h)}},Hg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(o,u)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},zg={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Yg=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=s(a),l=i({...zg,...c}),h=t(u,l),m=r(u)?e():null;super(a,!1,h,m)}},Zg=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(o,u)}return s.set(o,a),await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Xg=n=>(e,t,s)=>n(t,e,s),Kg=n=>(e,t,s=0,r=0)=>{const i=e[s];if(i===void 0)throw n();return bi(t)?i.connect(t,0,r):i.connect(t,0)},Jg=n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}},Qg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},e_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...Qg,...u},m=s(l,h),p=i(l),y=p?t():null;super(c,!1,m,y),this._constantSourceNodeRenderer=y,this._nativeConstantSourceNode=m,this._offset=e(this,p,m.offset,gt,It),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=u;const l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){xs(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),cn(this)&&Sr(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},t_=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=async(u,l)=>{let h=t(u);const m=ht(h,l);if(!m){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(l,p),o!==null&&h.start(o),a!==null&&h.stop(a)}return i.set(l,h),m?await n(l,u.offset,h.offset):await s(l,u.offset,h.offset),await r(u,l,h),h};return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=i.get(l);return h!==void 0?Promise.resolve(h):c(u,l)}}},n_=n=>e=>(n[0]=e,n[0]),s_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},r_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=s(a),l={...s_,...c},h=t(u,l),p=r(u)?e():null;super(a,!1,h,p),this._isBufferNullified=!1,this._nativeConvolverNode=h,l.buffer!==null&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},i_=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const u={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(o,u)}return s.set(o,a),Cs(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},o_=(n,e)=>(t,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw i.name==="SyntaxError"?n():i}},a_=()=>new DOMException("","DataCloneError"),il=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}catch{}finally{r()}})},c_=(n,e,t,s,r,i,o,a,c,u,l)=>(h,m)=>{const p=o(h)?h:i(h);if(r.has(m)){const y=t();return Promise.reject(y)}try{r.add(m)}catch{}return e(c,()=>c(p))?p.decodeAudioData(m).then(y=>(il(m).catch(()=>{}),e(a,()=>a(y))||l(y),n.add(y),y)):new Promise((y,b)=>{const w=async()=>{try{await il(m)}catch{}},S=O=>{b(O),w()};try{p.decodeAudioData(m,O=>{typeof O.copyFromChannel!="function"&&(u(O),Pa(O)),n.add(O),w().then(()=>y(O))},O=>{S(O===null?s():O)})}catch(O){S(O)}})},l_=(n,e,t,s,r,i,o,a)=>(c,u)=>{const l=e.get(c);if(l===void 0)throw new Error("Missing the expected cycle count.");const h=i(c.context),m=a(h);if(l===u){if(e.delete(c),!m&&o(c)){const p=s(c),{outputs:y}=t(c);for(const b of y)if(Ir(b)){const w=s(b[0]);n(p,w,b[1],b[2])}else{const w=r(b[0]);p.connect(w,b[1])}}}else e.set(c,l-u)},u_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},h_=(n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...u_,...u},m=s(l,h),p=i(l),y=p?t(h.maxDelayTime):null;super(c,!1,m,y),this._delayTime=e(this,p,m.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}},f_=(n,e,t,s,r)=>i=>{const o=new WeakMap,a=async(c,u)=>{let l=t(c);const h=ht(l,u);if(!h){const m={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:i};l=e(u,m)}return o.set(u,l),h?await n(u,c.delayTime,l.delayTime):await s(u,c.delayTime,l.delayTime),await r(c,u,l),l};return{render(c,u){const l=o.get(u);return l!==void 0?Promise.resolve(l):a(c,u)}}},d_=n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s),p_=n=>(e,t)=>{n(e).delete(t)},m_=n=>"delayTime"in n,g_=(n,e,t)=>function s(r,i){const o=gi(i)?i:t(n,i);if(m_(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,u)=>c.concat(u),[])},Ur=(n,e,t)=>{const s=e[t];if(s===void 0)throw n();return s},__=n=>(e,t=void 0,s=void 0,r=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?Ur(n,e,t).disconnect():bi(t)?s===void 0?e.forEach(i=>i.disconnect(t)):r===void 0?Ur(n,e,s).disconnect(t,0):Ur(n,e,s).disconnect(t,0,r):s===void 0?e.forEach(i=>i.disconnect(t)):Ur(n,e,s).disconnect(t,0),y_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},b_=(n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),m={...y_,...l},p=s(h,m),y=o(h),b=y?t():null;super(u,!1,p,b),this._attack=e(this,y,p.attack),this._knee=e(this,y,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,y,p.ratio),this._release=e(this,y,p.release),this._threshold=e(this,y,p.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,u==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},v_=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=t(a);const l=ht(u,c);if(!l){const h={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(c,h)}return i.set(c,u),l?(await n(c,a.attack,u.attack),await n(c,a.knee,u.knee),await n(c,a.ratio,u.ratio),await n(c,a.release,u.release),await n(c,a.threshold,u.threshold)):(await s(c,a.attack,u.attack),await s(c,a.knee,u.knee),await s(c,a.ratio,u.ratio),await s(c,a.release,u.release),await s(c,a.threshold,u.threshold)),await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},w_=()=>new DOMException("","EncodingError"),x_=n=>e=>new Promise((t,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,u=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(l,h,m,p,y)=>{if(h===a||h===n.location.href&&m===1&&p===1)return u(),s(y),!1;if(c!==null)return c(l,h,m,p,y)},i.onerror=()=>{u(),s(new SyntaxError)},i.onload=()=>{u(),t()},i.src=a,i.type="module",r.appendChild(i)}}),T_=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=n(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,r)}},S_=n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},k_=n=>async e=>{try{const t=await fetch(e);if(t.ok)return[await t.text(),t.url]}catch{}throw n()},I_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},E_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=r(a),l={...I_,...c},h=s(u,l),m=i(u),p=m?t():null;super(a,!1,h,p),this._gain=e(this,m,h.gain,gt,It)}get gain(){return this._gain}},C_=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=t(a);const l=ht(u,c);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(c,h)}return i.set(c,u),l?await n(c,a.gain,u.gain):await s(c,a.gain,u.gain),await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},A_=(n,e)=>t=>e(n,t),M_=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer},N_=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0},O_=n=>e=>{const t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer},R_=n=>e=>n.get(e),st=()=>new DOMException("","InvalidStateError"),D_=n=>e=>{const t=n.get(e);if(t===void 0)throw st();return t},P_=(n,e)=>t=>{let s=n.get(t);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s},F_=n=>e=>{const t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t},to=()=>new DOMException("","InvalidAccessError"),B_=n=>{n.getFrequencyResponse=(e=>(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw to();return e.call(n,t,s,r)})(n.getFrequencyResponse)},L_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},V_=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=s(a),l=r(u),h={...L_,...c},m=e(u,l?null:a.baseLatency,h),p=l?t(h.feedback,h.feedforward):null;super(a,!1,m,p),B_(m),this._nativeIIRFilterNode=m,i(this,1)}getFrequencyResponse(a,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,u)}},gh=(n,e,t,s,r,i,o,a,c,u,l)=>{const h=u.length;let m=a;for(let p=0;p<h;p+=1){let y=t[0]*u[p];for(let b=1;b<r;b+=1){const w=m-b&c-1;y+=t[b]*i[w],y-=n[b]*o[w]}for(let b=r;b<s;b+=1)y+=t[b]*i[m-b&c-1];for(let b=r;b<e;b+=1)y-=n[b]*o[m-b&c-1];i[m]=u[p],o[m]=y,m=m+1&c-1,l[p]=y}return m},U_=(n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(r[0]!==1){for(let y=0;y<o;y+=1)i[y]/=r[0];for(let y=1;y<a;y+=1)r[y]/=r[0]}const u=32,l=new Float32Array(u),h=new Float32Array(u),m=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),p=n.numberOfChannels;for(let y=0;y<p;y+=1){const b=n.getChannelData(y),w=m.getChannelData(y);l.fill(0),h.fill(0),gh(r,o,i,a,c,l,h,0,u,b,w)}return m},$_=(n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const u=async(l,h)=>{let m=null,p=e(l);const y=ht(p,h);if(h.createIIRFilter===void 0?m=n(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):y||(p=h.createIIRFilter(o,i)),a.set(h,m===null?p:m),m!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new t(l.context.destination.channelCount,l.context.length,h.sampleRate);c=(async()=>{await s(l,w,w.destination);const S=await r(w);return U_(S,h,i,o)})()}const b=await c;return m.buffer=b,m.start(0),m}return await s(l,h,p),p};return{render(l,h){const m=a.get(h);return m!==void 0?Promise.resolve(m):u(l,h)}}},q_=(n,e,t,s,r,i)=>o=>(a,c)=>{const u=n.get(a);if(u===void 0){if(!o&&i(a)){const l=s(a),{outputs:h}=t(a);for(const m of h)if(Ir(m)){const p=s(m[0]);e(l,p,m[1],m[2])}else{const p=r(m[0]);l.disconnect(p,m[1])}}n.set(a,c)}else n.set(a,u+c)},W_=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},j_=(n,e)=>t=>n.has(t)||e(t),G_=(n,e)=>t=>n.has(t)||e(t),H_=(n,e)=>t=>{const s=n.get(t);return e(s)||e(t)},z_=n=>e=>n!==null&&e instanceof n,Y_=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode,Z_=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam,X_=(n,e)=>t=>n(t)||e(t),K_=n=>e=>n!==null&&e instanceof n,J_=n=>n!==null&&n.isSecureContext,Q_=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},e0={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},t0=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const c={...e0,...o},u=e(a,c);super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},n0=(n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=e(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},s0=(n,e,t)=>class extends n{constructor(r,i){const o=t(r),a=e(o,i);super(r,!0,a,null)}},r0=(n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,Qi.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;const u=this._nativeContext.onstatechange;this._onstatechange=u!==null&&u===c?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},or=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1},i0=(n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=>(a,c=0,u=0)=>{const l=i.size===0;if(e(a))return o.call(t,a,c,u),n(i,[a,c,u],h=>h[0]===a&&h[1]===c&&h[2]===u,!0),l&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),l&&s()})(t.connect),t.disconnect=(o=>(a,c,u)=>{const l=i.size>0;if(a===void 0)o.apply(t),i.clear();else if(typeof a=="number"){o.call(t,a);for(const m of i)m[1]===a&&i.delete(m)}else{e(a)?o.call(t,a,c,u):o.call(t,a,c);for(const m of i)m[0]===a&&(c===void 0||m[1]===c)&&(u===void 0||m[2]===u)&&i.delete(m)}const h=i.size===0;l&&h&&r()})(t.disconnect),t},Le=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t]&&(n[t]=s)},tt=(n,e)=>{Le(n,e,"channelCount"),Le(n,e,"channelCountMode"),Le(n,e,"channelInterpretation")},ol=n=>typeof n.getFloatTimeDomainData=="function",o0=n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=(t[r]-128)*.0078125;return e}},a0=(n,e)=>(t,s)=>{const r=t.createAnalyser();if(tt(r,s),!(s.maxDecibels>s.minDecibels))throw e();return Le(r,s,"fftSize"),Le(r,s,"maxDecibels"),Le(r,s,"minDecibels"),Le(r,s,"smoothingTimeConstant"),n(ol,()=>ol(r))||o0(r),r},c0=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,Ue=(n,e,t)=>{const s=e[t];s!==void 0&&s!==n[t].value&&(n[t].value=s)},l0=n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw st();e.call(n,s,r,i),t=!0}})(n.start)},La=n=>{n.start=(e=>(t=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})(n.start)},Va=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)},u0=(n,e,t,s,r,i,o,a,c,u,l)=>(h,m)=>{const p=h.createBufferSource();return tt(p,m),Ue(p,m,"playbackRate"),Le(p,m,"buffer"),Le(p,m,"loop"),Le(p,m,"loopEnd"),Le(p,m,"loopStart"),e(t,()=>t(h))||l0(p),e(s,()=>s(h))||c(p),e(r,()=>r(h))||u(p,h),e(i,()=>i(h))||La(p),e(o,()=>o(h))||l(p,h),e(a,()=>a(h))||Va(p),n(h,p),p},h0=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,f0=(n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(u){if(c>i.maxChannelCount)throw u}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},d0=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,p0=n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}},m0=(n,e,t,s,r)=>(i,o,a,c,u,l)=>{if(a!==null)try{const h=new a(i,c,l),m=new Map;let p=null;if(Object.defineProperties(h,{channelCount:{get:()=>l.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>p,set:y=>{typeof p=="function"&&h.removeEventListener("processorerror",p),p=typeof y=="function"?y:null,typeof p=="function"&&h.addEventListener("processorerror",p)}}}),h.addEventListener=(y=>(...b)=>{if(b[0]==="processorerror"){const w=typeof b[1]=="function"?b[1]:typeof b[1]=="object"&&b[1]!==null&&typeof b[1].handleEvent=="function"?b[1].handleEvent:null;if(w!==null){const S=m.get(b[1]);S!==void 0?b[1]=S:(b[1]=O=>{O.type==="error"?(Object.defineProperties(O,{type:{value:"processorerror"}}),w(O)):w(new ErrorEvent(b[0],{...O}))},m.set(w,b[1]))}}return y.call(h,"error",b[1],b[2]),y.call(h,...b)})(h.addEventListener),h.removeEventListener=(y=>(...b)=>{if(b[0]==="processorerror"){const w=m.get(b[1]);w!==void 0&&(m.delete(b[1]),b[1]=w)}return y.call(h,"error",b[1],b[2]),y.call(h,b[0],b[1],b[2])})(h.removeEventListener),l.numberOfOutputs!==0){const y=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(y).connect(i.destination),r(h,()=>y.disconnect(),()=>y.connect(i.destination))}return h}catch(h){throw h.code===11?s():h}if(u===void 0)throw s();return p0(l),e(i,o,u,l)},_h=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),g0=n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}),_0=async(n,e)=>{const t=await g0(e);return new n(t)},y0=(n,e,t,s)=>{let r=Xo.get(n);r===void 0&&(r=new WeakMap,Xo.set(n,r));const i=_0(t,s);return r.set(e,i),i},b0=(n,e,t,s,r,i,o,a,c,u,l,h,m)=>(p,y,b,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw c();const S=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(S.some(R=>R<1))throw c();if(S.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw c();const O=w.channelCount*w.numberOfInputs,F=S.reduce((R,U)=>R+U,0),I=b.parameterDescriptors===void 0?0:b.parameterDescriptors.length;if(O+I>6||F>6)throw c();const _=new MessageChannel,k=[],T=[];for(let R=0;R<w.numberOfInputs;R+=1)k.push(o(p,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),T.push(r(p,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const x=[];if(b.parameterDescriptors!==void 0)for(const{defaultValue:R,maxValue:U,minValue:W,name:z}of b.parameterDescriptors){const j=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[z]!==void 0?w.parameterData[z]:R===void 0?0:R});Object.defineProperties(j.offset,{defaultValue:{get:()=>R===void 0?0:R},maxValue:{get:()=>U===void 0?gt:U},minValue:{get:()=>W===void 0?It:W}}),x.push(j)}const L=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,O+I)}),P=_h(y,p.sampleRate),q=a(p,P,O+I,Math.max(1,F)),D=r(p,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),X=[];for(let R=0;R<w.numberOfOutputs;R+=1)X.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:S[R]}));for(let R=0;R<w.numberOfInputs;R+=1){k[R].connect(T[R]);for(let U=0;U<w.channelCount;U+=1)T[R].connect(L,U,R*w.channelCount+U)}const K=new ph(b.parameterDescriptors===void 0?[]:b.parameterDescriptors.map(({name:R},U)=>{const W=x[U];return W.connect(L,0,O+U),W.start(0),[R,W.offset]}));L.connect(q);let ne=w.channelInterpretation,Y=null;const G=w.numberOfOutputs===0?[q]:X,J={get bufferSize(){return P},get channelCount(){return w.channelCount},set channelCount(R){throw t()},get channelCountMode(){return w.channelCountMode},set channelCountMode(R){throw t()},get channelInterpretation(){return ne},set channelInterpretation(R){for(const U of k)U.channelInterpretation=R;ne=R},get context(){return q.context},get inputs(){return k},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return Y},set onprocessorerror(R){typeof Y=="function"&&J.removeEventListener("processorerror",Y),Y=typeof R=="function"?R:null,typeof Y=="function"&&J.addEventListener("processorerror",Y)},get parameters(){return K},get port(){return _.port2},addEventListener(...R){return q.addEventListener(R[0],R[1],R[2])},connect:n.bind(null,G),disconnect:u.bind(null,G),dispatchEvent(...R){return q.dispatchEvent(R[0])},removeEventListener(...R){return q.removeEventListener(R[0],R[1],R[2])}},ie=new Map;_.port1.addEventListener=(R=>(...U)=>{if(U[0]==="message"){const W=typeof U[1]=="function"?U[1]:typeof U[1]=="object"&&U[1]!==null&&typeof U[1].handleEvent=="function"?U[1].handleEvent:null;if(W!==null){const z=ie.get(U[1]);z!==void 0?U[1]=z:(U[1]=j=>{l(p.currentTime,p.sampleRate,()=>W(j))},ie.set(W,U[1]))}}return R.call(_.port1,U[0],U[1],U[2])})(_.port1.addEventListener),_.port1.removeEventListener=(R=>(...U)=>{if(U[0]==="message"){const W=ie.get(U[1]);W!==void 0&&(ie.delete(U[1]),U[1]=W)}return R.call(_.port1,U[0],U[1],U[2])})(_.port1.removeEventListener);let ae=null;Object.defineProperty(_.port1,"onmessage",{get:()=>ae,set:R=>{typeof ae=="function"&&_.port1.removeEventListener("message",ae),ae=typeof R=="function"?R:null,typeof ae=="function"&&(_.port1.addEventListener("message",ae),_.port1.start())}}),b.prototype.port=_.port1;let ee=null;y0(p,J,b,w).then(R=>ee=R);const qe=wi(w.numberOfInputs,w.channelCount),Ye=wi(w.numberOfOutputs,S),fe=b.parameterDescriptors===void 0?[]:b.parameterDescriptors.reduce((R,{name:U})=>({...R,[U]:new Float32Array(128)}),{});let be=!0;const Me=()=>{w.numberOfOutputs>0&&q.disconnect(D);for(let R=0,U=0;R<w.numberOfOutputs;R+=1){const W=X[R];for(let z=0;z<S[R];z+=1)D.disconnect(W,U+z,z);U+=S[R]}},se=new Map;q.onaudioprocess=({inputBuffer:R,outputBuffer:U})=>{if(ee!==null){const W=h(J);for(let z=0;z<P;z+=128){for(let j=0;j<w.numberOfInputs;j+=1)for(let M=0;M<w.channelCount;M+=1)vi(R,qe[j],M,M,z);b.parameterDescriptors!==void 0&&b.parameterDescriptors.forEach(({name:j},M)=>{vi(R,fe,j,O+M,z)});for(let j=0;j<w.numberOfInputs;j+=1)for(let M=0;M<S[j];M+=1)Ye[j][M].byteLength===0&&(Ye[j][M]=new Float32Array(128));try{const j=qe.map((N,H)=>{if(W[H].size>0)return se.set(H,P/128),N;const Q=se.get(H);return Q===void 0?[]:(N.every(re=>re.every(ue=>ue===0))&&(Q===1?se.delete(H):se.set(H,Q-1)),N)});be=l(p.currentTime+z/p.sampleRate,p.sampleRate,()=>ee.process(j,Ye,fe));for(let N=0,H=0;N<w.numberOfOutputs;N+=1){for(let Z=0;Z<S[N];Z+=1)mh(U,Ye[N],Z,H+Z,z);H+=S[N]}}catch(j){be=!1,J.dispatchEvent(new ErrorEvent("processorerror",{colno:j.colno,filename:j.filename,lineno:j.lineno,message:j.message}))}if(!be){for(let j=0;j<w.numberOfInputs;j+=1){k[j].disconnect(T[j]);for(let M=0;M<w.channelCount;M+=1)T[z].disconnect(L,M,j*w.channelCount+M)}if(b.parameterDescriptors!==void 0){const j=b.parameterDescriptors.length;for(let M=0;M<j;M+=1){const N=x[M];N.disconnect(L,0,O+M),N.stop()}}L.disconnect(q),q.onaudioprocess=null,rt?Me():E();break}}}};let rt=!1;const Qe=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),vt=()=>q.connect(Qe).connect(p.destination),E=()=>{q.disconnect(Qe),Qe.disconnect()},C=()=>{if(be){E(),w.numberOfOutputs>0&&q.connect(D);for(let R=0,U=0;R<w.numberOfOutputs;R+=1){const W=X[R];for(let z=0;z<S[R];z+=1)D.connect(W,U+z,z);U+=S[R]}}rt=!0},$=()=>{be&&(vt(),Me()),rt=!1};return vt(),m(J,C,$)},yh=(n,e)=>{const t=n.createBiquadFilter();return tt(t,e),Ue(t,e,"Q"),Ue(t,e,"detune"),Ue(t,e,"frequency"),Ue(t,e,"gain"),Le(t,e,"type"),t},v0=(n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,r),tt(r,s),r},w0=n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw st()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw st()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw st()}})},Er=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return tt(t,e),w0(t),t},x0=(n,e,t,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return t(i,o);const a=i.createConstantSource();return tt(a,o),Ue(a,o,"offset"),e(s,()=>s(i))||La(a),e(r,()=>r(i))||Va(a),n(i,a),a},As=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),T0=(n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=t(r,{...o,gain:i}),l=a.getChannelData(0);l[0]=1,l[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(y){u.channelCount=y},get channelCountMode(){return u.channelCountMode},set channelCountMode(y){u.channelCountMode=y},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(y){u.channelInterpretation=y},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(y){c.onended=y},addEventListener(...y){return c.addEventListener(y[0],y[1],y[2])},dispatchEvent(...y){return c.dispatchEvent(y[0])},removeEventListener(...y){return c.removeEventListener(y[0],y[1],y[2])},start(y=0){c.start.call(c,y)},stop(y=0){c.stop.call(c,y)}},m=()=>c.connect(u),p=()=>c.disconnect(u);return n(r,c),s(As(h,u),m,p)},S0=(n,e)=>(t,s)=>{const r=t.createConvolver();if(tt(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),Le(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),s.channelCountMode==="max"))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw n();return i.call(r,o)}),r},bh=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return tt(t,e),Ue(t,e,"delayTime"),t},k0=n=>(e,t)=>{const s=e.createDynamicsCompressor();if(tt(s,t),t.channelCount>2||t.channelCountMode==="max")throw n();return Ue(s,t,"attack"),Ue(s,t,"knee"),Ue(s,t,"ratio"),Ue(s,t,"release"),Ue(s,t,"threshold"),s},St=(n,e)=>{const t=n.createGain();return tt(t,e),Ue(t,e,"gain"),t},I0=n=>(e,t,s)=>{if(e.createIIRFilter===void 0)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return tt(r,s),r};function E0(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function C0(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function al(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=C0(t,e),t[0]+=n[s];return t}const A0=(n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{const h=_h(i,r.sampleRate),m=u instanceof Float64Array?u:new Float64Array(u),p=l instanceof Float64Array?l:new Float64Array(l),y=m.length,b=p.length,w=Math.min(y,b);if(y===0||y>20)throw s();if(m[0]===0)throw e();if(b===0||b>20)throw s();if(p[0]===0)throw e();if(m[0]!==1){for(let x=0;x<b;x+=1)p[x]/=m[0];for(let x=1;x<y;x+=1)m[x]/=m[0]}const S=t(r,h,o,o);S.channelCount=o,S.channelCountMode=a,S.channelInterpretation=c;const O=32,F=[],I=[],_=[];for(let x=0;x<o;x+=1){F.push(0);const L=new Float32Array(O),P=new Float32Array(O);L.fill(0),P.fill(0),I.push(L),_.push(P)}S.onaudioprocess=x=>{const L=x.inputBuffer,P=x.outputBuffer,q=L.numberOfChannels;for(let D=0;D<q;D+=1){const X=L.getChannelData(D),K=P.getChannelData(D);F[D]=gh(m,y,p,b,w,I[D],_[D],F[D],O,X,K)}};const k=r.sampleRate/2;return As({get bufferSize(){return h},get channelCount(){return S.channelCount},set channelCount(x){S.channelCount=x},get channelCountMode(){return S.channelCountMode},set channelCountMode(x){S.channelCountMode=x},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(x){S.channelInterpretation=x},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},addEventListener(...x){return S.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return S.dispatchEvent(x[0])},getFrequencyResponse(x,L,P){if(x.length!==L.length||L.length!==P.length)throw n();const q=x.length;for(let D=0;D<q;D+=1){const X=-Math.PI*(x[D]/k),K=[Math.cos(X),Math.sin(X)],ne=al(p,K),Y=al(m,K),G=E0(ne,Y);L[D]=Math.sqrt(G[0]*G[0]+G[1]*G[1]),P[D]=Math.atan2(G[1],G[0])}},removeEventListener(...x){return S.removeEventListener(x[0],x[1],x[2])}},S)},M0=(n,e)=>n.createMediaElementSource(e.mediaElement),N0=(n,e)=>{const t=n.createMediaStreamDestination();return tt(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t},O0=(n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},R0=(n,e)=>(t,{mediaStreamTrack:s})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(e(t))throw new TypeError;return i},D0=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,P0=(n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return tt(c,a),Ue(c,a,"detune"),Ue(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Le(c,a,"type"),e(t,()=>t(o))||La(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||Va(c),n(o,c),c},F0=n=>(e,t)=>{const s=e.createPanner();return s.orientationX===void 0?n(e,t):(tt(s,t),Ue(s,t,"orientationX"),Ue(s,t,"orientationY"),Ue(s,t,"orientationZ"),Ue(s,t,"positionX"),Ue(s,t,"positionY"),Ue(s,t,"positionZ"),Le(s,t,"coneInnerAngle"),Le(s,t,"coneOuterAngle"),Le(s,t,"coneOuterGain"),Le(s,t,"distanceModel"),Le(s,t,"maxDistance"),Le(s,t,"panningModel"),Le(s,t,"refDistance"),Le(s,t,"rolloffFactor"),s)},B0=(n,e,t,s,r,i,o,a,c,u)=>(l,{coneInnerAngle:h,coneOuterAngle:m,coneOuterGain:p,distanceModel:y,maxDistance:b,orientationX:w,orientationY:S,orientationZ:O,panningModel:F,positionX:I,positionY:_,positionZ:k,refDistance:T,rolloffFactor:x,...L})=>{const P=l.createPanner();if(L.channelCount>2||L.channelCountMode==="max")throw o();tt(P,L);const q={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=t(l,{...q,channelInterpretation:"speakers",numberOfInputs:6}),X=s(l,{...L,gain:1}),K=s(l,{...q,gain:1}),ne=s(l,{...q,gain:0}),Y=s(l,{...q,gain:0}),G=s(l,{...q,gain:0}),J=s(l,{...q,gain:0}),ie=s(l,{...q,gain:0}),ae=r(l,256,6,1),ee=i(l,{...q,curve:new Float32Array([1,1]),oversample:"none"});let oe=[w,S,O],qe=[I,_,k];const Ye=new Float32Array(1);ae.onaudioprocess=({inputBuffer:se})=>{const rt=[c(se,Ye,0),c(se,Ye,1),c(se,Ye,2)];rt.some((vt,E)=>vt!==oe[E])&&(P.setOrientation(...rt),oe=rt);const Qe=[c(se,Ye,3),c(se,Ye,4),c(se,Ye,5)];Qe.some((vt,E)=>vt!==qe[E])&&(P.setPosition(...Qe),qe=Qe)},Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0});const fe={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(se){if(se>2)throw o();X.channelCount=se,P.channelCount=se},get channelCountMode(){return P.channelCountMode},set channelCountMode(se){if(se==="max")throw o();X.channelCountMode=se,P.channelCountMode=se},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(se){X.channelInterpretation=se,P.channelInterpretation=se},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(se){P.coneInnerAngle=se},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(se){P.coneOuterAngle=se},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(se){if(se<0||se>1)throw e();P.coneOuterGain=se},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(se){P.distanceModel=se},get inputs(){return[X]},get maxDistance(){return P.maxDistance},set maxDistance(se){if(se<0)throw new RangeError;P.maxDistance=se},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return K.gain},get orientationY(){return ne.gain},get orientationZ(){return Y.gain},get panningModel(){return P.panningModel},set panningModel(se){P.panningModel=se},get positionX(){return G.gain},get positionY(){return J.gain},get positionZ(){return ie.gain},get refDistance(){return P.refDistance},set refDistance(se){if(se<0)throw new RangeError;P.refDistance=se},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(se){if(se<0)throw new RangeError;P.rolloffFactor=se},addEventListener(...se){return X.addEventListener(se[0],se[1],se[2])},dispatchEvent(...se){return X.dispatchEvent(se[0])},removeEventListener(...se){return X.removeEventListener(se[0],se[1],se[2])}};h!==fe.coneInnerAngle&&(fe.coneInnerAngle=h),m!==fe.coneOuterAngle&&(fe.coneOuterAngle=m),p!==fe.coneOuterGain&&(fe.coneOuterGain=p),y!==fe.distanceModel&&(fe.distanceModel=y),b!==fe.maxDistance&&(fe.maxDistance=b),w!==fe.orientationX.value&&(fe.orientationX.value=w),S!==fe.orientationY.value&&(fe.orientationY.value=S),O!==fe.orientationZ.value&&(fe.orientationZ.value=O),F!==fe.panningModel&&(fe.panningModel=F),I!==fe.positionX.value&&(fe.positionX.value=I),_!==fe.positionY.value&&(fe.positionY.value=_),k!==fe.positionZ.value&&(fe.positionZ.value=k),T!==fe.refDistance&&(fe.refDistance=T),x!==fe.rolloffFactor&&(fe.rolloffFactor=x),(oe[0]!==1||oe[1]!==0||oe[2]!==0)&&P.setOrientation(...oe),(qe[0]!==0||qe[1]!==0||qe[2]!==0)&&P.setPosition(...qe);const be=()=>{X.connect(P),n(X,ee,0,0),ee.connect(K).connect(D,0,0),ee.connect(ne).connect(D,0,1),ee.connect(Y).connect(D,0,2),ee.connect(G).connect(D,0,3),ee.connect(J).connect(D,0,4),ee.connect(ie).connect(D,0,5),D.connect(ae).connect(l.destination)},Me=()=>{X.disconnect(P),a(X,ee,0,0),ee.disconnect(K),K.disconnect(D),ee.disconnect(ne),ne.disconnect(D),ee.disconnect(Y),Y.disconnect(D),ee.disconnect(G),G.disconnect(D),ee.disconnect(J),J.disconnect(D),ee.disconnect(ie),ie.disconnect(D),D.disconnect(ae),ae.disconnect(l.destination)};return u(As(fe,P),be,Me)},L0=n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a},Cr=(n,e,t,s)=>n.createScriptProcessor(e,t,s),V0=(n,e)=>(t,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,s);const i=t.createStereoPanner();return tt(i,s),Ue(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},U0=(n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},h=(y,b,w,S)=>{const O=new Float32Array(16385),F=new Float32Array(16385);for(let L=0;L<16385;L+=1){const P=L/16384*c;O[L]=Math.cos(P),F[L]=Math.sin(P)}const I=t(y,{...u,gain:0}),_=s(y,{...l,curve:O}),k=s(y,{...l,curve:a}),T=t(y,{...u,gain:0}),x=s(y,{...l,curve:F});return{connectGraph(){b.connect(I),b.connect(k.inputs===void 0?k:k.inputs[0]),b.connect(T),k.connect(w),w.connect(_.inputs===void 0?_:_.inputs[0]),w.connect(x.inputs===void 0?x:x.inputs[0]),_.connect(I.gain),x.connect(T.gain),I.connect(S,0,0),T.connect(S,0,1)},disconnectGraph(){b.disconnect(I),b.disconnect(k.inputs===void 0?k:k.inputs[0]),b.disconnect(T),k.disconnect(w),w.disconnect(_.inputs===void 0?_:_.inputs[0]),w.disconnect(x.inputs===void 0?x:x.inputs[0]),_.disconnect(I.gain),x.disconnect(T.gain),I.disconnect(S,0,0),T.disconnect(S,0,1)}}},m=(y,b,w,S)=>{const O=new Float32Array(16385),F=new Float32Array(16385),I=new Float32Array(16385),_=new Float32Array(16385),k=Math.floor(16385/2);for(let G=0;G<16385;G+=1)if(G>k){const J=(G-k)/(16384-k)*c;O[G]=Math.cos(J),F[G]=Math.sin(J),I[G]=0,_[G]=1}else{const J=G/(16384-k)*c;O[G]=1,F[G]=0,I[G]=Math.cos(J),_[G]=Math.sin(J)}const T=e(y,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),x=t(y,{...u,gain:0}),L=s(y,{...l,curve:O}),P=t(y,{...u,gain:0}),q=s(y,{...l,curve:F}),D=s(y,{...l,curve:a}),X=t(y,{...u,gain:0}),K=s(y,{...l,curve:I}),ne=t(y,{...u,gain:0}),Y=s(y,{...l,curve:_});return{connectGraph(){b.connect(T),b.connect(D.inputs===void 0?D:D.inputs[0]),T.connect(x,0),T.connect(P,0),T.connect(X,1),T.connect(ne,1),D.connect(w),w.connect(L.inputs===void 0?L:L.inputs[0]),w.connect(q.inputs===void 0?q:q.inputs[0]),w.connect(K.inputs===void 0?K:K.inputs[0]),w.connect(Y.inputs===void 0?Y:Y.inputs[0]),L.connect(x.gain),q.connect(P.gain),K.connect(X.gain),Y.connect(ne.gain),x.connect(S,0,0),X.connect(S,0,0),P.connect(S,0,1),ne.connect(S,0,1)},disconnectGraph(){b.disconnect(T),b.disconnect(D.inputs===void 0?D:D.inputs[0]),T.disconnect(x,0),T.disconnect(P,0),T.disconnect(X,1),T.disconnect(ne,1),D.disconnect(w),w.disconnect(L.inputs===void 0?L:L.inputs[0]),w.disconnect(q.inputs===void 0?q:q.inputs[0]),w.disconnect(K.inputs===void 0?K:K.inputs[0]),w.disconnect(Y.inputs===void 0?Y:Y.inputs[0]),L.disconnect(x.gain),q.disconnect(P.gain),K.disconnect(X.gain),Y.disconnect(ne.gain),x.disconnect(S,0,0),X.disconnect(S,0,0),P.disconnect(S,0,1),ne.disconnect(S,0,1)}}},p=(y,b,w,S,O)=>{if(b===1)return h(y,w,S,O);if(b===2)return m(y,w,S,O);throw r()};return(y,{channelCount:b,channelCountMode:w,pan:S,...O})=>{if(w==="max")throw r();const F=n(y,{...O,channelCount:1,channelCountMode:w,numberOfInputs:2}),I=t(y,{...O,channelCount:b,channelCountMode:w,gain:1}),_=t(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:S});let{connectGraph:k,disconnectGraph:T}=p(y,b,I,_,F);Object.defineProperty(_.gain,"defaultValue",{get:()=>0}),Object.defineProperty(_.gain,"maxValue",{get:()=>1}),Object.defineProperty(_.gain,"minValue",{get:()=>-1});const x={get bufferSize(){},get channelCount(){return I.channelCount},set channelCount(D){I.channelCount!==D&&(L&&T(),{connectGraph:k,disconnectGraph:T}=p(y,D,I,_,F),L&&k()),I.channelCount=D},get channelCountMode(){return I.channelCountMode},set channelCountMode(D){if(D==="clamped-max"||D==="max")throw r();I.channelCountMode=D},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(D){I.channelInterpretation=D},get context(){return I.context},get inputs(){return[I]},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get pan(){return _.gain},addEventListener(...D){return I.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return I.dispatchEvent(D[0])},removeEventListener(...D){return I.removeEventListener(D[0],D[1],D[2])}};let L=!1;const P=()=>{k(),L=!0},q=()=>{T(),L=!1};return i(As(x,F),P,q)}},$0=(n,e,t,s,r,i,o)=>(a,c)=>{const u=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);tt(u,c);const l=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(l!==null&&l.length<2)throw e();Le(u,{curve:l},"curve"),Le(u,c,"oversample");let h=null,m=!1;return o(u,"curve",b=>()=>b.call(u),b=>w=>(b.call(u,w),m&&(s(w)&&h===null?h=n(a,u):!s(w)&&h!==null&&(h(),h=null)),w)),r(u,()=>{m=!0,s(u.curve)&&(h=n(a,u))},()=>{m=!1,h!==null&&(h(),h=null)})},q0=(n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const u=i.createWaveShaper(),l=i.createWaveShaper();tt(u,c),tt(l,c);const h=t(i,{...c,gain:1}),m=t(i,{...c,gain:-1}),p=t(i,{...c,gain:1}),y=t(i,{...c,gain:-1});let b=null,w=!1,S=null;const O={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(_){h.channelCount=_,m.channelCount=_,u.channelCount=_,p.channelCount=_,l.channelCount=_,y.channelCount=_},get channelCountMode(){return u.channelCountMode},set channelCountMode(_){h.channelCountMode=_,m.channelCountMode=_,u.channelCountMode=_,p.channelCountMode=_,l.channelCountMode=_,y.channelCountMode=_},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(_){h.channelInterpretation=_,m.channelInterpretation=_,u.channelInterpretation=_,p.channelInterpretation=_,l.channelInterpretation=_,y.channelInterpretation=_},get context(){return u.context},get curve(){return S},set curve(_){if(_!==null&&_.length<2)throw e();if(_===null)u.curve=_,l.curve=_;else{const k=_.length,T=new Float32Array(k+2-k%2),x=new Float32Array(k+2-k%2);T[0]=_[0],x[0]=-_[k-1];const L=Math.ceil((k+1)/2),P=(k+1)/2-1;for(let q=1;q<L;q+=1){const D=q/L*P,X=Math.floor(D),K=Math.ceil(D);T[q]=X===K?_[X]:(1-(D-X))*_[X]+(1-(K-D))*_[K],x[q]=X===K?-_[k-1-X]:-((1-(D-X))*_[k-1-X])-(1-(K-D))*_[k-1-K]}T[L]=k%2===1?_[L-1]:(_[L-2]+_[L-1])/2,u.curve=T,l.curve=x}S=_,w&&(s(S)&&b===null?b=n(i,h):b!==null&&(b(),b=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(_){u.oversample=_,l.oversample=_},addEventListener(..._){return h.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return h.dispatchEvent(_[0])},removeEventListener(..._){return h.removeEventListener(_[0],_[1],_[2])}};o!==null&&(O.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==O.oversample&&(O.oversample=a);const F=()=>{h.connect(u).connect(p),h.connect(m).connect(l).connect(y).connect(p),w=!0,s(S)&&(b=n(i,h))},I=()=>{h.disconnect(u),u.disconnect(p),h.disconnect(m),m.disconnect(l),l.disconnect(y),y.disconnect(p),w=!1,b!==null&&(b(),b=null)};return r(As(O,p),F,I)},bt=()=>new DOMException("","NotSupportedError"),W0={numberOfChannels:1},j0=(n,e,t,s,r)=>class extends n{constructor(o,a,c){let u;if(typeof o=="number"&&a!==void 0&&c!==void 0)u={length:a,numberOfChannels:o,sampleRate:c};else if(typeof o=="object")u=o;else throw new Error("The given parameters are not valid.");const{length:l,numberOfChannels:h,sampleRate:m}={...W0,...u},p=s(h,l,m);e(or,()=>or(p))||p.addEventListener("statechange",(()=>{let y=0;const b=w=>{this._state==="running"&&(y>0?(p.removeEventListener("statechange",b),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):y+=1)};return b})()),super(p,h),this._length=l,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,uh(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},G0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},H0=(n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...G0,...u},m=t(l,h),p=i(l),y=p?s():null,b=c.sampleRate/2;super(c,!1,m,y),this._detune=e(this,p,m.detune,153600,-153600),this._frequency=e(this,p,m.frequency,b,-b),this._nativeOscillatorNode=m,this._onended=null,this._oscillatorNodeRenderer=y,this._oscillatorNodeRenderer!==null&&h.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=u;const l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){xs(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),cn(this)&&Sr(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},z0=(n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const u=async(l,h)=>{let m=t(l);const p=ht(m,h);if(!p){const y={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,periodicWave:o===null?void 0:o,type:m.type};m=e(h,y),a!==null&&m.start(a),c!==null&&m.stop(c)}return i.set(h,m),p?(await n(h,l.detune,m.detune),await n(h,l.frequency,m.frequency)):(await s(h,l.detune,m.detune),await s(h,l.frequency,m.frequency)),await r(l,h,m),m};return{set periodicWave(l){o=l},set start(l){a=l},set stop(l){c=l},render(l,h){const m=i.get(h);return m!==void 0?Promise.resolve(m):u(l,h)}}},Y0={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Z0=(n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...Y0,...u},m=t(l,h),p=i(l),y=p?s():null;super(c,!1,m,y),this._nativePannerNode=m,this._orientationX=e(this,p,m.orientationX,gt,It),this._orientationY=e(this,p,m.orientationY,gt,It),this._orientationZ=e(this,p,m.orientationZ,gt,It),this._positionX=e(this,p,m.positionX,gt,It),this._positionY=e(this,p,m.positionY,gt,It),this._positionZ=e(this,p,m.positionZ,gt,It),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},X0=(n,e,t,s,r,i,o,a,c,u)=>()=>{const l=new WeakMap;let h=null;const m=async(p,y)=>{let b=null,w=i(p);const S={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},O={...S,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},F=ht(w,y);if("bufferSize"in w)b=s(y,{...S,gain:1});else if(!F){const I={...O,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=r(y,I)}if(l.set(y,b===null?w:b),b!==null){if(h===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const q=new o(6,p.context.length,y.sampleRate),D=e(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});D.connect(q.destination),h=(async()=>{const X=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(K,ne)=>{const Y=t(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ne===0?1:0});return await a(q,K,Y.offset),Y}));for(let K=0;K<6;K+=1)X[K].connect(D,0,K),X[K].start(0);return u(q)})()}const I=await h,_=s(y,{...S,gain:1});await c(p,y,_);const k=[];for(let q=0;q<I.numberOfChannels;q+=1)k.push(I.getChannelData(q));let T=[k[0][0],k[1][0],k[2][0]],x=[k[3][0],k[4][0],k[5][0]],L=s(y,{...S,gain:1}),P=r(y,{...O,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:x[0],positionY:x[1],positionZ:x[2]});_.connect(L).connect(P.inputs[0]),P.connect(b);for(let q=128;q<I.length;q+=128){const D=[k[0][q],k[1][q],k[2][q]],X=[k[3][q],k[4][q],k[5][q]];if(D.some((K,ne)=>K!==T[ne])||X.some((K,ne)=>K!==x[ne])){T=D,x=X;const K=q/y.sampleRate;L.gain.setValueAtTime(0,K),L=s(y,{...S,gain:0}),P=r(y,{...O,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:x[0],positionY:x[1],positionZ:x[2]}),L.gain.setValueAtTime(1,K),_.connect(L).connect(P.inputs[0]),P.connect(b)}}return b}return F?(await n(y,p.orientationX,w.orientationX),await n(y,p.orientationY,w.orientationY),await n(y,p.orientationZ,w.orientationZ),await n(y,p.positionX,w.positionX),await n(y,p.positionY,w.positionY),await n(y,p.positionZ,w.positionZ)):(await a(y,p.orientationX,w.orientationX),await a(y,p.orientationY,w.orientationY),await a(y,p.orientationZ,w.orientationZ),await a(y,p.positionX,w.positionX),await a(y,p.positionY,w.positionY),await a(y,p.positionZ,w.positionZ)),Cs(w)?await c(p,y,w.inputs[0]):await c(p,y,w),w};return{render(p,y){const b=l.get(y);return b!==void 0?Promise.resolve(b):m(p,y)}}},K0={disableNormalization:!1},J0=(n,e,t,s)=>class vh{constructor(i,o){const a=e(i),c=s({...K0,...o}),u=n(a,c);return t.add(u),u}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===vh.prototype||t.has(i)}},Q0=(n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)),ey=(n,e,t)=>async(s,r,i)=>{const o=n(s);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([u,l])=>{const m=await e(u).render(u,r),p=s.context.destination;!t(u)&&(s!==p||!t(s))&&m.connect(i,l,c)})).reduce((a,c)=>[...a,...c],[]))},ty=(n,e,t)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const l=await n(a).render(a,r);t(a)||l.connect(i,c)}))},ny=(n,e,t,s)=>r=>n(or,()=>or(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),sy=n=>(e,t)=>{n.set(e,t)},ry=n=>(e,t)=>n.set(e,t),iy=(n,e,t,s,r,i,o,a)=>(c,u)=>t(c).render(c,u).then(()=>Promise.all(Array.from(s(u)).map(l=>t(l).render(l,u)))).then(()=>r(u)).then(l=>(typeof l.copyFromChannel!="function"?(o(l),Pa(l)):e(i,()=>i(l))||a(l),n.add(l),l)),oy={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},ay=(n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=r(a),l={...oy,...c},h=t(u,l),m=i(u),p=m?s():null;super(a,!1,h,p),this._pan=e(this,m,h.pan)}get pan(){return this._pan}},cy=(n,e,t,s,r)=>()=>{const i=new WeakMap,o=async(a,c)=>{let u=t(a);const l=ht(u,c);if(!l){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(c,h)}return i.set(c,u),l?await n(c,a.pan,u.pan):await s(c,a.pan,u.pan),Cs(u)?await r(a,c,u.inputs[0]):await r(a,c,u),u};return{render(a,c){const u=i.get(c);return u!==void 0?Promise.resolve(u):o(a,c)}}},ly=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},uy=(n,e)=>async()=>{if(n===null)return!0;if(e===null)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await s.startRendering(),await new Promise(u=>setTimeout(u))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},hy=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(t.currentTime!==0)},t.startRendering()})},fy=()=>new DOMException("","UnknownError"),dy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},py=(n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...dy,...u},m=t(l,h),y=i(l)?s():null;super(c,!0,m,y),this._isCurveNullified=!1,this._nativeWaveShaperNode=m,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},my=(n,e,t)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!ht(a,o)){const u={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(o,u)}return s.set(o,a),Cs(a)?await t(i,o,a.inputs[0]):await t(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},gy=()=>typeof window>"u"?null:window,_y=(n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,u=t.getChannelData(a),l=s.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)s[h]=u[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,u=t.getChannelData(a),l=s.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)u[h+o]=s[h]}},yy=n=>e=>{e.copyFromChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)},by=n=>(e,t)=>{const s=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},vy=(n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))},wh=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),xh=n=>{if(n===null)return!1;const e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0},Ar=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},wy=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),xy=n=>({...n,channelCount:n.numberOfOutputs}),Ty=n=>{const{imag:e,real:t}=n;return e===void 0?t===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:t===void 0?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}},Th=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(s.code!==9)throw s;Th(n,e,t+1e-7)}},Sy=n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},ky=n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},Iy=n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Ua=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Sh=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},$a=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Ey=n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}},Cy=n=>{n.start=(e=>(t=0,s=0,r)=>{const i=n.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})(n.start)},kh=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=>()=>{r.call(n,t),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),As(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},Ms=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)},Ay=Zm(ts),My=tg(ts),Ny=d_(eo),Ih=new WeakMap,Oy=N_(Ih),Wt=Wg(new Map,new WeakMap),Jt=gy(),Eh=a0(Wt,Qt),qa=M_(yt),ot=ey(yt,qa,zn),Ry=og(Eh,Pe,ot),Re=D_(Qi),hn=D0(Jt),Ee=K_(hn),Ch=new WeakMap,Ah=T_(Ms),Mr=h0(Jt),Wa=z_(Mr),ja=Y_(Jt),Mh=Z_(Jt),ar=d0(Jt),ze=Ng(Xm(sh),eg(Ay,My,_i,Ny,yi,yt,Oy,Tr,Pe,ts,cn,zn,Kr),Wt,q_(Yo,yi,yt,Pe,ir,cn),Qt,to,bt,l_(_i,Yo,yt,Pe,ir,Re,cn,Ee),g_(Ch,yt,$t),Ah,Re,Wa,ja,Mh,Ee,ar),Dy=ig(ze,Ry,Qt,Eh,Re,Ee),Ga=new WeakSet,cl=c0(Jt),Nh=n_(new Uint32Array(1)),Ha=_y(Nh,Qt),za=yy(Nh),Oh=cg(Ga,Wt,bt,cl,hn,ly(cl),Ha,za),no=ng(St),Rh=ty(qa,kr,zn),en=Xg(Rh),Ns=u0(no,Wt,Sy,ky,Iy,Ua,Sh,$a,Cy,by(Ar),kh),tn=Q0(O_(kr),Rh),Py=hg(en,Ns,Pe,tn,ot),jt=Og(Km(rh),Ch,Da,Rg,Wm,jm,Gm,Hm,zm,Go,th,Mr,Th),Fy=ug(ze,Py,jt,st,Ns,Re,Ee,Ms),By=vg(ze,wg,Qt,st,f0(St,Ar),Re,Ee,ot),Ly=qg(en,yh,Pe,tn,ot),ns=ry(Ih),Vy=$g(ze,jt,Ly,to,yh,Re,Ee,ns),Rn=i0(ts,ja),Uy=vy(st,Rn),Dn=v0(Mr,Uy),$y=Hg(Dn,Pe,ot),qy=Gg(ze,$y,Dn,Re,Ee),Wy=Zg(Er,Pe,ot),jy=Yg(ze,Wy,Er,Re,Ee,xy),Gy=T0(no,Ns,St,Rn),Os=x0(no,Wt,Gy,Ua,$a),Hy=t_(en,Os,Pe,tn,ot),zy=e_(ze,jt,Hy,Os,Re,Ee,Ms),Dh=S0(bt,Ar),Yy=i_(Dh,Pe,ot),Zy=r_(ze,Yy,Dh,Re,Ee,ns),Xy=f_(en,bh,Pe,tn,ot),Ky=h_(ze,jt,Xy,bh,Re,Ee,ns),Ph=k0(bt),Jy=v_(en,Ph,Pe,tn,ot),Qy=b_(ze,jt,Jy,Ph,bt,Re,Ee,ns),eb=C_(en,St,Pe,tn,ot),tb=E_(ze,jt,eb,St,Re,Ee),nb=A0(to,st,Cr,bt),so=ny(Wt,St,Cr,hy(St,hn)),sb=$_(Ns,Pe,hn,ot,so),rb=I0(nb),ib=V_(ze,rb,sb,Re,Ee,ns),ob=xg(jt,Dn,Os,Cr,bt,wh,Ee,Ar),Fh=new WeakMap,ab=r0(By,ob,Ah,Ee,Fh,Ms),Bh=P0(no,Wt,Ua,Sh,$a,kh),cb=z0(en,Bh,Pe,tn,ot),lb=H0(ze,jt,Bh,cb,Re,Ee,Ms),Lh=Jg(Ns),ub=q0(Lh,st,St,xh,Rn),ro=$0(Lh,st,ub,xh,Rn,Mr,Ar),hb=B0(_i,st,Dn,St,Cr,ro,bt,yi,wh,Rn),Vh=F0(hb),fb=X0(en,Dn,Os,St,Vh,Pe,hn,tn,ot,so),db=Z0(ze,jt,Vh,fb,Re,Ee,ns),pb=L0(Qt),mb=J0(pb,Re,new WeakSet,Ty),gb=U0(Dn,Er,St,ro,bt,Rn),Uh=V0(gb,bt),_b=cy(en,Uh,Pe,tn,ot),yb=ay(ze,jt,Uh,_b,Re,Ee),bb=my(ro,Pe,ot),vb=py(ze,st,ro,bb,Re,Ee,ns),$h=J_(Jt),Ya=S_(Jt),qh=new WeakMap,wb=P_(qh,hn),xb=$h?Qm(Wt,bt,x_(Jt),Ya,k_(Ym),Re,wb,Ee,ar,new WeakMap,new WeakMap,uy(ar,hn),Jt):void 0,Tb=X_(Wa,Ee),Sb=c_(Ga,Wt,a_,w_,new WeakSet,Re,Tb,mi,or,Ha,za),Wh=Vg(xb,Dy,Oh,Fy,Vy,qy,jy,zy,Zy,Sb,Ky,Qy,tb,ib,ab,lb,db,mb,yb,vb),kb=Q_(ze,M0,Re,Ee),Ib=t0(ze,N0,Re,Ee),Eb=n0(ze,O0,Re,Ee),Cb=R0(st,Ee),Ab=s0(ze,Cb,Re),Mb=bg(Wh,st,bt,fy,kb,Ib,Eb,Ab,Mr),Za=F_(Fh),Nb=sg(Za),jh=Kg(Qt),Ob=p_(Za),Gh=__(Qt),Hh=new WeakMap,Rb=A_(Hh,$t),Db=b0(jh,Qt,st,Dn,Er,Os,St,Cr,bt,Gh,Ya,Rb,Rn),Pb=m0(st,Db,St,bt,Rn),Fb=Lg(en,jh,Ns,Dn,Er,Os,St,Ob,Gh,Ya,Pe,ar,hn,tn,ot,so),Bb=R_(qh),Lb=sy(Hh),ll=$h?Pg(Nb,ze,jt,Fb,Pb,yt,Bb,Re,Ee,ar,wy,Lb,Ey,Ms):void 0,Vb=o_(bt,hn),Ub=iy(Ga,Wt,qa,Za,so,mi,Ha,za),$b=j0(Wh,Wt,st,Vb,Ub),qb=W_(Qi,Wa),Wb=j_(Ra,ja),jb=G_(Da,Mh),Gb=H_(Qi,Ee);function Rt(n){return n===void 0}function ye(n){return n!==void 0}function Hb(n){return typeof n=="function"}function Yn(n){return typeof n=="number"}function qn(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function zb(n){return typeof n=="boolean"}function Lt(n){return Array.isArray(n)}function qt(n){return typeof n=="string"}function $r(n){return qt(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ge(n,e){if(!n)throw new Error(e)}function In(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function zh(n){!n.isOffline&&n.state!=="running"&&Xa('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Yh=!1,ul=!1;function hl(n){Yh=n}function Yb(n){Rt(n)&&Yh&&!ul&&(ul=!0,Xa("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Zh=console;function Zb(...n){Zh.log(...n)}function Xa(...n){Zh.warn(...n)}function Xb(n){return new Mb(n)}function Kb(n,e,t){return new $b(n,e,t)}const Wn=typeof self=="object"?self:null,Jb=Wn&&(Wn.hasOwnProperty("AudioContext")||Wn.hasOwnProperty("webkitAudioContext"));function Qb(n,e,t){return ge(ye(ll),"This node only works in a secure context (https or localhost)"),new ll(n,e,t)}function Gt(n,e,t,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function Ke(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})}class ev{constructor(e,t,s,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((t=this._worker)===null||t===void 0||t.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Zn(n){return jb(n)}function Tn(n){return Wb(n)}function Jr(n){return Gb(n)}function cs(n){return qb(n)}function tv(n){return n instanceof Oh}function nv(n,e){return n==="value"||Zn(e)||Tn(e)||tv(e)}function _s(n,...e){if(!e.length)return n;const t=e.shift();if(qn(n)&&qn(t))for(const s in t)nv(s,t[s])?n[s]=t[s]:qn(t[s])?(n[s]||Object.assign(n,{[s]:{}}),_s(n[s],t[s])):Object.assign(n,{[s]:t[s]});return _s(n,...e)}function sv(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}function te(n,e,t=[],s){const r={},i=Array.from(e);if(qn(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(_s(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),i.length===1&&qn(i[0]))_s(r,i[0]);else for(let o=0;o<t.length;o++)ye(i[o])&&(r[t[o]]=i[o]);return _s(n,r)}function rv(n){return n.constructor.getDefaults()}function ys(n,e){return Rt(n)?e:n}function fl(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */class fn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||Wn&&this.toString()===Wn.TONE_DEBUG_CLASS)&&Zb(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}fn.version=eh;const Ka=1e-6;function Ts(n,e){return n>e+Ka}function Qo(n,e){return Ts(n,e)||Pt(n,e)}function xi(n,e){return n+Ka<e}function Pt(n,e){return Math.abs(n-e)<Ka}function iv(n,e,t){return Math.max(Math.min(n,t),e)}class Dt extends fn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=te(Dt.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ge(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];ge(Qo(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){const t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Pt(this._timeline[t].time,e)){for(let s=t;s>=0&&Pt(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Qo(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Pt(a[t],e)){for(let u=o;u<this._timeline.length;u++){const l=this._timeline[u];if(Pt(l[t],e))o=u;else break}return o}else{if(xi(a[t],e)&&Ts(c[t],e))return o;Ts(a[t],e)?i=o:s=o+1}}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return s!==-1&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(s!==-1&&Pt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Pt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Xh=[];function io(n){Xh.push(n)}function ov(n){Xh.forEach(e=>e(n))}const Kh=[];function oo(n){Kh.push(n)}function av(n){Kh.forEach(e=>e(n))}class Nr extends fn{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(Rt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(Rt(t))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(Nr.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Jh extends Nr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Or extends Jh{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new Dt,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=te(Or.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=Xb({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new ev(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((t=arguments[0])===null||t===void 0)&&t.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(ov(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ge(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ge(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ge(cs(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ge(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ge(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ge(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ge(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return Qb(this.rawContext,e,t)}addAudioWorkletModule(e){return Ke(this,void 0,void 0,function*(){ge(ye(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Ke(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return cs(this._context)?this._context.resume():Promise.resolve()}close(){return Ke(this,void 0,void 0,function*(){cs(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&av(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}class cv extends Jh{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Ke(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function $e(n,e){Lt(e)?e.forEach(t=>$e(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function Qh(n,e){Lt(e)?e.forEach(t=>Qh(n,t)):Object.defineProperty(n,e,{writable:!0})}const Ie=()=>{};class De extends fn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ie;const e=te(De.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,qt(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Ie,onload:Ie,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:wt().sampleRate}set(e){return e instanceof De?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Ke(this,void 0,void 0,function*(){const t=De.load(e).then(s=>{this.set(s),this.onload(this)});De.downloads.push(t);try{yield t}finally{const s=De.downloads.indexOf(t);De.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=Lt(e)&&e[0].length>0,s=t?e.length:1,r=t?e[0].length:e.length,i=wt(),o=i.createBuffer(s,r,i.sampleRate),a=!t&&s===1?[e]:e;for(let c=0;c<s;c++)o.copyToChannel(a[c],c);return this._buffer=o,this}toMono(e){if(Yn(e))this.fromArray(this.toArray(e));else{let t=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)t[o]+=i[o]}t=t.map(r=>r/s),this.fromArray(t)}return this}toArray(e){if(Yn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const t=[];for(let s=0;s<this.numberOfChannels;s++)t[s]=this.getChannelData(s);return t}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,t=this.duration){ge(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);ge(s<r,"The start time must be less than the end time");const i=r-s,o=wt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new De(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new De().fromArray(e)}static fromUrl(e){return Ke(this,void 0,void 0,function*(){return yield new De().load(e)})}static load(e){return Ke(this,void 0,void 0,function*(){const t=e.match(/\[([^\]\[]+\|.+)\]$/);if(t){const c=t[1].split("|");let u=c[0];for(const l of c)if(De.supportsType(l)){u=l;break}e=e.replace(t[0],u)}const s=De.baseUrl===""||De.baseUrl.endsWith("/")?De.baseUrl:De.baseUrl+"/",r=document.createElement("a");r.href=s+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const i=yield fetch(r.href);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield wt().decodeAudioData(o)})}static supportsType(e){const t=e.split("."),s=t[t.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Ke(this,void 0,void 0,function*(){for(yield Promise.resolve();De.downloads.length;)yield De.downloads[0]})}}De.baseUrl="";De.downloads=[];class Ja extends Or{constructor(){super({clockSource:"offline",context:Jr(arguments[0])?arguments[0]:Kb(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Jr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Jr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ke(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return Ke(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new De(t)})}close(){return Promise.resolve()}}const ef=new cv;let us=ef;function wt(){return us===ef&&Jb&&lv(new Or),us}function lv(n,e=!1){e&&us.dispose(),cs(n)?us=new Or(n):Jr(n)?us=new Ja(n):us=n}if(Wn&&!Wn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${eh} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function uv(n){return Math.pow(10,n/20)}function hv(n){return 20*(Math.log(n)/Math.LN10)}function tf(n){return Math.pow(2,n/12)}let ao=440;function fv(){return ao}function dv(n){ao=n}function Vn(n){return Math.round(nf(n))}function nf(n){return 69+12*Math.log2(n/ao)}function sf(n){return ao*Math.pow(2,(n-69)/12)}class Qa extends fn{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r=t==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r+=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qa&&this.fromType(this._val),Rt(this._val))return this._noArg();if(qt(this._val)&&Rt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(qn(this._val)){let e=0;for(const t in this._val)if(ye(this._val[t])){const s=this._val[t],r=new this.constructor(this.context,t).valueOf()*s;e+=r}return e}if(ye(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return qt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Ft extends Qa{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new Ft(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new Ft(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new Ft(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Vn(this.toFrequency())}_now(){return this.context.now()}}class xt extends Ft{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return fv()}static set A4(e){dv(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:xt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const r=pv[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?r:xt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(r*=this._beatsToUnits(parseFloat(t))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new xt(this.context,this.valueOf()*tf(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return Vn(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/xt.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),mv[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return sf(e)}static ftom(e){return Vn(e)}}const pv={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},mv=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function gv(n,e){return new xt(wt(),n,e)}class Ks extends Ft{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Tt extends fn{constructor(){super();const e=te(Tt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:wt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return Yb(e),new Ft(this.context,e).toSeconds()}toFrequency(e){return new xt(this.context,e).toFrequency()}toTicks(e){return new Ks(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{Rt(e[s])&&delete t[s]}),t}get(){const e=rv(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];ye(s)&&ye(s.value)&&ye(s.setValueAtTime)?e[t]=s.value:s instanceof Tt?e[t]=s._getPartialProperties(e[t]):Lt(s)||Yn(s)||qt(s)||zb(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&ye(this[t])&&(this[t]&&ye(this[t].value)&&ye(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Tt?this[t].set(e[t]):this[t]=e[t])}),this}}class ec extends Dt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,s){return In(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){const s=this._search(t);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Be extends Tt{constructor(){super(te(Be.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=te(Be.getDefaults(),arguments,["param","units","convert"]);for(ge(ye(e.param)&&(Zn(e.param)||e.param instanceof Be),"param must be an AudioParam");!Zn(e.param);)e.param=e.param._param;this._swappable=ye(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Dt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ye(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Tt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ye(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ye(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return ye(this.maxValue)&&ye(this.minValue)&&In(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?uv(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?hv(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return ge(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,t):i=this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return ge(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Pt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return ge(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+s*.9),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);ge(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),ge(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return ge(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));ge(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&Pt(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ge(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(r-t)*((i-e)/(s-e))}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class me extends Tt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ye(this.input)?Zn(this.input)||this.input instanceof Be?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ye(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ye(e)&&(e instanceof me||Tn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ge(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Rs(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Xa("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return _v(this,e,t,s),this}chain(...e){return ea(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),ye(this.input)&&(this.input instanceof me?this.input.dispose():Tn(this.input)&&this.input.disconnect()),ye(this.output)&&(this.output instanceof me?this.output.dispose():Tn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ea(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof me?t.connect(s):Tn(t)&&Rs(t,s),s),e)}function Rs(n,e,t=0,s=0){for(ge(ye(n),"Cannot connect from undefined node"),ge(ye(e),"Cannot connect to undefined node"),(e instanceof me||Tn(e))&&ge(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ge(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof me||e instanceof Be;)ye(e.input)&&(e=e.input);for(;n instanceof me;)ye(n.output)&&(n=n.output);Zn(e)?n.connect(e,t):n.connect(e,t,s)}function _v(n,e,t=0,s=0){if(ye(e))for(;e instanceof me;)e=e.input;for(;!Tn(n);)ye(n.output)&&(n=n.output);Zn(e)?n.disconnect(e,t):Tn(e)?n.disconnect(e,t,s):n.disconnect()}class et extends me{constructor(){super(te(et.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=te(et.getDefaults(),arguments,["gain","units"]);this.gain=new Be({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),$e(this,"gain")}static getDefaults(){return Object.assign(me.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ss extends me{constructor(e){super(e),this.onended=Ie,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new et({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(me.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ie})}_startGain(e,t=1){ge(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ge(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ie&&(this.onended(this),this.onended=Ie,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ge(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ie,this}}class Ti extends Ss{constructor(){super(te(Ti.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=te(Ti.getDefaults(),arguments,["offset"]);Rs(this._source,this._gainNode),this.offset=new Be({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ss.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class nt extends me{constructor(){super(te(nt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=te(nt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ti({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(me.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return tc(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function tc(n,e,t,s){(e instanceof Be||Zn(e)||e instanceof nt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof nt&&(e.overridden=!0)),Rs(n,e,t,s)}class Si extends Be{constructor(){super(te(Si.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Dt(1/0),this._multiplier=1;const e=te(Si.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Be.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,u=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max((t-r.time)*10,1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,u=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Rt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&s.type==="linearRampToValueAtTime"&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,u=(-r-a)/o;return(c>0?c:u)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class ki extends nt{constructor(){super(te(ki.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=te(ki.getDefaults(),arguments,["value"]);this.input=this._param=new Si({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(nt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Ii extends Tt{constructor(){super(te(Ii.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new ec,this._tickOffset=new Dt,this._ticksAtTime=new Dt,this._secondsAtTime=new Dt;const e=te(Ii.getDefaults(),arguments,["frequency"]);this.frequency=new ki({context:this.context,units:e.units,value:e.frequency}),$e(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Tt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),ye(t)&&this.setTicksAtTime(t,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let o=r||s,a=r?r.ticks:0,c=null;return this._state.forEachBetween(o.time,t+this.sampleTime,u=>{let l=o.time;const h=this._tickOffset.get(u.time);h&&h.time>=o.time&&(a=h.ticks,l=h.time),o.state==="started"&&u.state!=="started"&&(a+=this.frequency.getTicksAtTime(u.time)-this.frequency.getTicksAtTime(l),u.time!==i.time&&(c={state:u.state,time:u.time,ticks:a})),o=u}),this._state.remove(i),c&&this._ticksAtTime.add(c),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||t,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,c=>{let u=i.time;const l=this._tickOffset.get(c.time);l&&l.time>=i.time&&(o=l.seconds,u=l.time),i.state==="started"&&c.state!=="started"&&(o+=c.time-u,c.time!==s.time&&(a={state:c.state,time:c.time,seconds:o})),i=c}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),c=this.frequency.getTicksAtTime(r.time),u=a-c;let l=Math.ceil(u)-u;l=Pt(l,1)?0:l;let h=this.frequency.getTimeOfTick(a+l);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(m){i=m;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class cr extends Tt{constructor(){super(te(cr.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Ie,this._lastUpdate=0,this._state=new ec("stopped"),this._boundLoop=this._loop.bind(this);const e=te(cr.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Ii({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,$e(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Tt.getDefaults(),{callback:Ie,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){zh(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Nr.mixin(cr);class Rr extends fn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=te(Rr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const s=e.urls[t];this.add(t,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ie,onload:Ie,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ge(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=Ie,r=Ie){return qt(t)?(this.baseUrl&&t.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new De(this.baseUrl+t,s,r))):this._buffers.set(e.toString(),new De(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class nc extends xt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Vn(super._frequencyToUnits(e))}_ticksToUnits(e){return Vn(super._ticksToUnits(e))}_beatsToUnits(e){return Vn(super._beatsToUnits(e))}_secondsToUnits(e){return Vn(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return sf(this.toMidi())}transpose(e){return new nc(this.context,this.toMidi()+e)}}function lr(n,e){return new nc(wt(),n,e)}class hs extends Ks{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class yv extends Tt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Dt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}io(n=>{n.draw=new yv({context:n})});oo(n=>{n.draw.dispose()});class bv extends fn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ge(ye(e.time),"Events must have a time property"),ge(ye(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new vv(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const t=e.getBalance();let s,r=null;if(t>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),t!==null?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(this._root!==null){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class vv{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class En extends me{constructor(){super(te(En.getDefaults(),arguments,["volume"])),this.name="Volume";const e=te(En.getDefaults(),arguments,["volume"]);this.input=this.output=new et({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,$e(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ei extends me{constructor(){super(te(Ei.getDefaults(),arguments)),this.name="Destination",this.input=new En({context:this.context}),this.output=new et({context:this.context}),this.volume=this.input.volume;const e=te(Ei.getDefaults(),arguments);ea(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ea(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}io(n=>{n.destination=new Ei({context:n})});oo(n=>{n.destination.dispose()});class wv extends fn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Dt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class ks extends me{constructor(){super(Object.assign(te(ks.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return tc(this,e,t,s),this}}class Is extends ks{constructor(){super(Object.assign(te(Is.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=te(Is.getDefaults(),arguments,["mapping","length"]);Lt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):Hb(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(nt.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const t=["none","2x","4x"].some(s=>s.includes(e));ge(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ci extends ks{constructor(){super(Object.assign(te(Ci.getDefaults(),arguments,["value"]))),this.name="Pow";const e=te(Ci.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Is({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(ks.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Cn{constructor(e,t){this.id=Cn._eventId++,this._remainderTime=0;const s=Object.assign(Cn.getDefaults(),t);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Ie,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Cn._eventId=0;class sc extends Cn{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(sc.getDefaults(),t);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Cn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return xi(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new hs(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){xi(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new hs(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);Ts(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class ur extends Tt{constructor(){super(te(ur.getDefaults(),arguments)),this.name="Transport",this._loop=new wv(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Dt,this._repeatedEvents=new bv,this._syncedSignals=[],this._swingAmount=0;const e=te(ur.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new cr({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),$e(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Tt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){const s=t%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new hs(this.context,this._swingTicks*2/3).toSeconds()*r}hl(!0),this._timeline.forEachAtTime(t,s=>s.invoke(e)),hl(!1)}schedule(e,t){const s=new Cn(this,{callback:e,time:new Ks(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new sc(this,{callback:e,duration:new Ft(this.context,r).toTicks(),interval:new Ft(this.context,t).toTicks(),time:new Ks(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Cn(this,{callback:e,once:!0,time:new Ks(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new hs(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){this.context.resume();let s;return ye(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Lt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Ft(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Ft(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new hs(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new hs(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(t),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t),i=t+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const t=this.now(),s=this.getTicksAtTime(t),r=e-s%e;return this._clock.nextTickTime(r,t)}}syncSignal(e,t){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const c=.015625/i,u=new et(c),l=new Ci(-1),h=new et(c);r.chain(u,l,h),r=h,i=1/i,o=[u,l,h]}t||(e.getValueAtTime(s)!==0?t=e.getValueAtTime(s)/i:t=0);const a=new et(t);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Qh(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Nr.mixin(ur);io(n=>{n.transport=new ur({context:n})});oo(n=>{n.transport.dispose()});class Ct extends me{constructor(e){super(e),this.input=void 0,this._state=new ec("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ie,this._syncedStop=Ie,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new En({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,$e(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,onstop:Ie,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ge(Ts(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(ys(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else zh(this.context),this._start(r,t,s);return this}stop(e){let t=Rt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||ye(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(Ts(t,0)){const s=this._state.get(t);if(s&&s.state==="started"&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ie,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Xn extends Ss{constructor(){super(te(Xn.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=te(Xn.getDefaults(),arguments,["url","onload"]);Rs(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Be({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new De(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ss.getDefaults(),{url:new De,loop:!1,loopEnd:0,loopStart:0,onload:Ie,onerror:Ie,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){ge(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?t=ys(t,this.loopStart):t=ys(t,0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;Qo(o,a)&&(o=(o-c)%u+c),Pt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,xi(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ye(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function ss(n,e){return Ke(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new Ja(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Ai extends Ss{constructor(){super(te(Ai.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=te(Ai.getDefaults(),arguments,["frequency","type"]);Rs(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Be({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Be({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),$e(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ss.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class je extends Ct{constructor(){super(te(je.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=te(je.getDefaults(),arguments,["frequency","type"]);this.frequency=new nt({context:this.context,units:"frequency",value:e.frequency}),$e(this,"frequency"),this.detune=new nt({context:this.context,units:"cents",value:e.detune}),$e(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),s=new Ai({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return je._periodicWaveCache.find(t=>t.phase===this._phase&&sv(t.partials,this._partials));{const e=je._periodicWaveCache.find(t=>t.type===this._type&&t.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&t)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(ye(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),je._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),je._periodicWaveCache.length>100&&je._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){In(e,0);let t=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(t=s[1]),this._type!=="custom")e===0?this.type=t:this.type=t+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,t){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const c=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);c?(a=parseInt(c[2],10)+1,this._partialCount=parseInt(c[2],10),e=c[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let c=1;c<r;++c){const u=2/(c*Math.PI);let l;switch(e){case"sine":l=c<=a?1:0,this._partials[c-1]=l;break;case"square":l=c&1?2*u:0,this._partials[c-1]=l;break;case"sawtooth":l=u*(c&1?1:-1),this._partials[c-1]=l;break;case"triangle":c&1?l=2*(u*u)*(c-1>>1&1?-1:1):l=0,this._partials[c-1]=l;break;case"custom":l=this._partials[c-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}l!==0?(i[c]=-l*Math.sin(t*c),o[c]=l*Math.cos(t*c)):(i[c]=0,o[c]=0)}return[i,o]}_inverseFFT(e,t,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+t[o]*Math.sin(o*s);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,t,o/i*r),s);return iv(-this._inverseFFT(e,t,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}je._periodicWaveCache=[];class xv extends ks{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Is({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Kn extends nt{constructor(){super(Object.assign(te(Kn.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=te(Kn.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new et({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(nt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class hr extends Ct{constructor(){super(te(hr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new xv({context:this.context}),this._modulationNode=new et({context:this.context});const e=te(hr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new je({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new je({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Kn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),$e(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(je.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class fr extends Ct{constructor(){super(te(fr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new et({context:this.context,gain:0});const e=te(fr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new je({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new nt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new je({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Kn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Kn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),$e(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(je.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Es extends Ct{constructor(){super(te(Es.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new et({context:this.context,gain:0}),this._thresh=new Is({context:this.context,mapping:t=>t<=0?-1:1});const e=te(Es.getDefaults(),arguments,["frequency","width"]);this.width=new nt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new je({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),$e(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class dr extends Ct{constructor(){super(te(dr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=te(dr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new nt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new nt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,$e(this,["frequency","detune"])}static getDefaults(){return Object.assign(je.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(In(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new je({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):Ie});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class pr extends Ct{constructor(){super(te(pr.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Kn({context:this.context,value:2});const e=te(pr.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Es({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new je({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),$e(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ct.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const dl={am:hr,fat:dr,fm:fr,oscillator:je,pulse:Es,pwm:pr};class mr extends Ct{constructor(){super(te(mr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=te(mr.getDefaults(),arguments,["frequency","type"]);this.frequency=new nt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new nt({context:this.context,units:"cents",value:e.detune}),$e(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(je.getDefaults(),fr.getDefaults(),hr.getDefaults(),dr.getDefaults(),Es.getDefaults(),pr.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=dl[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof dl[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Yn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Yn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&qt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return Ke(this,void 0,void 0,function*(){return ss(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function rf(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){In(i,n,e),t.set(this,i)}})}}function dn(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){In(this.toSeconds(i),n,e),t.set(this,i)}})}}let of=class ta extends Ct{constructor(){super(te(ta.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=te(ta.getDefaults(),arguments,["url","onload"]);this._buffer=new De({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ct.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ie,onerror:Ie,playbackRate:1,reverse:!1})}load(e){return Ke(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Ie){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){this._loop?t=ys(t,this._loopStart):t=ys(t,0);const r=this.toSeconds(t),i=s;s=ys(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Xn({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Rt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&In(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&In(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};Gt([dn(0)],of.prototype,"fadeIn",void 0);Gt([dn(0)],of.prototype,"fadeOut",void 0);class ln extends me{constructor(){super(te(ln.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new nt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=te(ln.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(me.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(qt(e))return e;{let s;for(s in qr)if(qr[s][t]===e)return s;return e}}_setCurve(e,t,s){if(qt(s)&&Reflect.has(qr,s)){const r=qr[s];qn(r)?e!=="_decayCurve"&&(this[e]=r[t]):this[e]=r}else if(Lt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(ge(Lt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return tc(this,e,t,s),this}asArray(e=1024){return Ke(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new Ja(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Gt([dn(0)],ln.prototype,"attack",void 0);Gt([dn(0)],ln.prototype,"decay",void 0);Gt([rf(0,1)],ln.prototype,"sustain",void 0);Gt([dn(0)],ln.prototype,"release",void 0);const qr=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){t=e/127;const m=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;r[e]=m/10+t*.83}r[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const c=[];for(e=0;e<128;e++)t=e/127,c[e]=.5*(1-Math.cos(Math.PI*t));const u=[];for(e=0;e<128;e++){t=e/127;const m=Math.pow(t,3)*4+.2,p=Math.cos(m*Math.PI*2*t);u[e]=Math.abs(p*(1-t))}function l(m){const p=new Array(m.length);for(let y=0;y<m.length;y++)p[y]=1-m[y];return p}function h(m){return m.slice(0).reverse()}return{bounce:{In:l(u),Out:u},cosine:{In:s,Out:h(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:c,Out:l(c)},step:{In:o,Out:l(o)}}})();let Mi=class na extends me{constructor(){super(te(na.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=t=>this._original_triggerRelease(t);const e=te(na.getDefaults(),arguments);this._volume=this.output=new En({context:this.context,volume:e.volume}),this.volume=this._volume.volume,$e(this,"volume")}static getDefaults(){return Object.assign(me.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[t],o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Jn extends Mi{constructor(){super(te(Jn.getDefaults(),arguments));const e=te(Jn.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Mi.getDefaults(),{detune:0,onsilence:Ie,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof xt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}Gt([dn(0)],Jn.prototype,"portamento",void 0);class rc extends ln{constructor(){super(te(rc.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new et({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class gr extends Jn{constructor(){super(te(gr.getDefaults(),arguments)),this.name="Synth";const e=te(gr.getDefaults(),arguments);this.oscillator=new mr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new rc(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),$e(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Jn.getDefaults(),{envelope:Object.assign(fl(ln.getDefaults(),Object.keys(me.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(fl(mr.getDefaults(),[...Object.keys(Ct.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class _r extends gr{constructor(){super(te(_r.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=te(_r.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,$e(this,["oscillator","envelope"])}static getDefaults(){return _s(Jn.getDefaults(),gr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof xt?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Gt([rf(0)],_r.prototype,"octaves",void 0);Gt([dn(0)],_r.prototype,"pitchDecay",void 0);const af=new Set;function ic(n){af.add(n)}function cf(n,e){const t=`registerProcessor("${n}", ${e})`;af.add(t)}const Tv=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ic(Tv);const Sv=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ic(Sv);const kv=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ic(kv);const Iv="feedback-comb-filter",Ev=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;cf(Iv,Ev);class Qn extends Mi{constructor(){super(te(Qn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=te(Qn.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(ge($r(s)||Yn(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),$r(s)){const i=new xt(this.context,s).toMidi();t[i]=e.urls[s]}else Yn(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Rr({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Mi.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ie,onerror:Ie,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=nf(new xt(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),u=o-c,l=this._buffers.get(u),h=tf(c+a),m=new Xn({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);m.start(t,0,l.duration/h,s),Lt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(m),m.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const p=this._activeSources.get(o),y=p.indexOf(m);y!==-1&&p.splice(y,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new xt(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Lt(t)?(ge(Lt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(ge($r(e)||isFinite(e),`note must be a pitch or midi: ${e}`),$r(e)){const r=new xt(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}Gt([dn(0)],Qn.prototype,"attack",void 0);Gt([dn(0)],Qn.prototype,"release",void 0);class Ni extends me{constructor(){super(Object.assign(te(Ni.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=te(Ni.getDefaults(),arguments,["pan"]);this.pan=new Be({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",$e(this,"pan")}static getDefaults(){return Object.assign(me.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Cv="bit-crusher",Av=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;cf(Cv,Av);class We extends me{constructor(){super(te(We.getDefaults(),arguments,["solo"])),this.name="Solo";const e=te(We.getDefaults(),arguments,["solo"]);this.input=this.output=new et({context:this.context}),We._allSolos.has(this.context)||We._allSolos.set(this.context,new Set),We._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(me.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),We._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){We._soloed.has(this.context)||We._soloed.set(this.context,new Set),We._soloed.get(this.context).add(this)}_removeSolo(){We._soloed.has(this.context)&&We._soloed.get(this.context).delete(this)}_isSoloed(){return We._soloed.has(this.context)&&We._soloed.get(this.context).has(this)}_noSolos(){return!We._soloed.has(this.context)||We._soloed.has(this.context)&&We._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),We._allSolos.get(this.context).delete(this),this._removeSolo(),this}}We._allSolos=new Map;We._soloed=new Map;class Oi extends me{constructor(){super(te(Oi.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=te(Oi.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ni({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new En({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,$e(this,["pan","volume"])}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ln extends me{constructor(){super(te(Ln.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=te(Ln.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new We({solo:e.solo,context:this.context}),this._panVol=this.output=new Oi({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),$e(this,["pan","volume"])}static getDefaults(){return Object.assign(me.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Ln.buses.has(e)||Ln.buses.set(e,new et({context:this.context})),Ln.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new et({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ln.buses=new Map;class Mv extends me{constructor(){super(...arguments),this.name="Listener",this.positionX=new Be({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Be({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Be({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Be({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Be({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Be({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Be({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Be({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Be({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(me.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}io(n=>{n.listener=new Mv({context:n})});oo(n=>{n.listener.dispose()});function Nv(){return wt().now()}wt().transport;wt().destination;wt().destination;wt().listener;wt().draw;wt();var Wr={},So,pl;function Ov(){if(pl)return So;pl=1;function n(r){var i=new s(r),o=i.readChunk();if(o.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+o.id+"'";for(var a=e(o.data),c=[],u=0;!i.eof()&&u<a.numTracks;u++){var l=i.readChunk();if(l.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+l.id+"'";var h=t(l.data);c.push(h)}return{header:a,tracks:c}}function e(r){var i=new s(r),o=i.readUInt16(),a=i.readUInt16(),c={format:o,numTracks:a},u=i.readUInt16();return u&32768?(c.framesPerSecond=256-(u>>8),c.ticksPerFrame=u&255):c.ticksPerBeat=u,c}function t(r){for(var i=new s(r),o=[];!i.eof();){var a=u();o.push(a)}return o;var c;function u(){var l={};l.deltaTime=i.readVarInt();var h=i.readUInt8();if((h&240)===240)if(h===255){l.meta=!0;var m=i.readUInt8(),p=i.readVarInt();switch(m){case 0:if(l.type="sequenceNumber",p!==2)throw"Expected length for sequenceNumber event is 2, got "+p;return l.number=i.readUInt16(),l;case 1:return l.type="text",l.text=i.readString(p),l;case 2:return l.type="copyrightNotice",l.text=i.readString(p),l;case 3:return l.type="trackName",l.text=i.readString(p),l;case 4:return l.type="instrumentName",l.text=i.readString(p),l;case 5:return l.type="lyrics",l.text=i.readString(p),l;case 6:return l.type="marker",l.text=i.readString(p),l;case 7:return l.type="cuePoint",l.text=i.readString(p),l;case 32:if(l.type="channelPrefix",p!=1)throw"Expected length for channelPrefix event is 1, got "+p;return l.channel=i.readUInt8(),l;case 33:if(l.type="portPrefix",p!=1)throw"Expected length for portPrefix event is 1, got "+p;return l.port=i.readUInt8(),l;case 47:if(l.type="endOfTrack",p!=0)throw"Expected length for endOfTrack event is 0, got "+p;return l;case 81:if(l.type="setTempo",p!=3)throw"Expected length for setTempo event is 3, got "+p;return l.microsecondsPerBeat=i.readUInt24(),l;case 84:if(l.type="smpteOffset",p!=5)throw"Expected length for smpteOffset event is 5, got "+p;var y=i.readUInt8(),b={0:24,32:25,64:29,96:30};return l.frameRate=b[y&96],l.hour=y&31,l.min=i.readUInt8(),l.sec=i.readUInt8(),l.frame=i.readUInt8(),l.subFrame=i.readUInt8(),l;case 88:if(l.type="timeSignature",p!=2&&p!=4)throw"Expected length for timeSignature event is 4 or 2, got "+p;return l.numerator=i.readUInt8(),l.denominator=1<<i.readUInt8(),p===4?(l.metronome=i.readUInt8(),l.thirtyseconds=i.readUInt8()):(l.metronome=36,l.thirtyseconds=8),l;case 89:if(l.type="keySignature",p!=2)throw"Expected length for keySignature event is 2, got "+p;return l.key=i.readInt8(),l.scale=i.readUInt8(),l;case 127:return l.type="sequencerSpecific",l.data=i.readBytes(p),l;default:return l.type="unknownMeta",l.data=i.readBytes(p),l.metatypeByte=m,l}}else if(h==240){l.type="sysEx";var p=i.readVarInt();return l.data=i.readBytes(p),l}else if(h==247){l.type="endSysEx";var p=i.readVarInt();return l.data=i.readBytes(p),l}else throw"Unrecognised MIDI event type byte: "+h;else{var w;if(h&128)w=i.readUInt8(),c=h;else{if(c===null)throw"Running status byte encountered before status byte";w=h,h=c,l.running=!0}var S=h>>4;switch(l.channel=h&15,S){case 8:return l.type="noteOff",l.noteNumber=w,l.velocity=i.readUInt8(),l;case 9:var O=i.readUInt8();return l.type=O===0?"noteOff":"noteOn",l.noteNumber=w,l.velocity=O,O===0&&(l.byte9=!0),l;case 10:return l.type="noteAftertouch",l.noteNumber=w,l.amount=i.readUInt8(),l;case 11:return l.type="controller",l.controllerType=w,l.value=i.readUInt8(),l;case 12:return l.type="programChange",l.programNumber=w,l;case 13:return l.type="channelAftertouch",l.amount=w,l;case 14:return l.type="pitchBend",l.value=w+(i.readUInt8()<<7)-8192,l;default:throw"Unrecognised MIDI event type: "+S}}}}function s(r){this.buffer=r,this.bufferLen=this.buffer.length,this.pos=0}return s.prototype.eof=function(){return this.pos>=this.bufferLen},s.prototype.readUInt8=function(){var r=this.buffer[this.pos];return this.pos+=1,r},s.prototype.readInt8=function(){var r=this.readUInt8();return r&128?r-256:r},s.prototype.readUInt16=function(){var r=this.readUInt8(),i=this.readUInt8();return(r<<8)+i},s.prototype.readInt16=function(){var r=this.readUInt16();return r&32768?r-65536:r},s.prototype.readUInt24=function(){var r=this.readUInt8(),i=this.readUInt8(),o=this.readUInt8();return(r<<16)+(i<<8)+o},s.prototype.readInt24=function(){var r=this.readUInt24();return r&8388608?r-16777216:r},s.prototype.readUInt32=function(){var r=this.readUInt8(),i=this.readUInt8(),o=this.readUInt8(),a=this.readUInt8();return(r<<24)+(i<<16)+(o<<8)+a},s.prototype.readBytes=function(r){var i=this.buffer.slice(this.pos,this.pos+r);return this.pos+=r,i},s.prototype.readString=function(r){var i=this.readBytes(r);return String.fromCharCode.apply(null,i)},s.prototype.readVarInt=function(){for(var r=0;!this.eof();){var i=this.readUInt8();if(i&128)r+=i&127,r<<=7;else return r+i}return r},s.prototype.readChunk=function(){var r=this.readString(4),i=this.readUInt32(),o=this.readBytes(i);return{id:r,length:i,data:o}},So=n,So}var ko,ml;function Rv(){if(ml)return ko;ml=1;function n(i,o){if(typeof i!="object")throw"Invalid MIDI data";o=o||{};var a=i.header||{},c=i.tracks||[],u,l=c.length,h=new r;for(e(h,a,l),u=0;u<l;u++)t(h,c[u],o);return h.buffer}function e(i,o,a){var c=o.format==null?1:o.format,u=128;o.timeDivision?u=o.timeDivision:o.ticksPerFrame&&o.framesPerSecond?u=-(o.framesPerSecond&255)<<8|o.ticksPerFrame&255:o.ticksPerBeat&&(u=o.ticksPerBeat&32767);var l=new r;l.writeUInt16(c),l.writeUInt16(a),l.writeUInt16(u),i.writeChunk("MThd",l.buffer)}function t(i,o,a){var c=new r,u,l=o.length,h=null;for(u=0;u<l;u++)(a.running===!1||!a.running&&!o[u].running)&&(h=null),h=s(c,o[u],h,a.useByte9ForNoteOff);i.writeChunk("MTrk",c.buffer)}function s(i,o,a,c){var u=o.type,l=o.deltaTime,h=o.text||"",m=o.data||[],p=null;switch(i.writeVarInt(l),u){case"sequenceNumber":i.writeUInt8(255),i.writeUInt8(0),i.writeVarInt(2),i.writeUInt16(o.number);break;case"text":i.writeUInt8(255),i.writeUInt8(1),i.writeVarInt(h.length),i.writeString(h);break;case"copyrightNotice":i.writeUInt8(255),i.writeUInt8(2),i.writeVarInt(h.length),i.writeString(h);break;case"trackName":i.writeUInt8(255),i.writeUInt8(3),i.writeVarInt(h.length),i.writeString(h);break;case"instrumentName":i.writeUInt8(255),i.writeUInt8(4),i.writeVarInt(h.length),i.writeString(h);break;case"lyrics":i.writeUInt8(255),i.writeUInt8(5),i.writeVarInt(h.length),i.writeString(h);break;case"marker":i.writeUInt8(255),i.writeUInt8(6),i.writeVarInt(h.length),i.writeString(h);break;case"cuePoint":i.writeUInt8(255),i.writeUInt8(7),i.writeVarInt(h.length),i.writeString(h);break;case"channelPrefix":i.writeUInt8(255),i.writeUInt8(32),i.writeVarInt(1),i.writeUInt8(o.channel);break;case"portPrefix":i.writeUInt8(255),i.writeUInt8(33),i.writeVarInt(1),i.writeUInt8(o.port);break;case"endOfTrack":i.writeUInt8(255),i.writeUInt8(47),i.writeVarInt(0);break;case"setTempo":i.writeUInt8(255),i.writeUInt8(81),i.writeVarInt(3),i.writeUInt24(o.microsecondsPerBeat);break;case"smpteOffset":i.writeUInt8(255),i.writeUInt8(84),i.writeVarInt(5);var y={24:0,25:32,29:64,30:96},b=o.hour&31|y[o.frameRate];i.writeUInt8(b),i.writeUInt8(o.min),i.writeUInt8(o.sec),i.writeUInt8(o.frame),i.writeUInt8(o.subFrame);break;case"timeSignature":i.writeUInt8(255),i.writeUInt8(88),i.writeVarInt(4),i.writeUInt8(o.numerator);var w=Math.floor(Math.log(o.denominator)/Math.LN2)&255;i.writeUInt8(w),i.writeUInt8(o.metronome),i.writeUInt8(o.thirtyseconds||8);break;case"keySignature":i.writeUInt8(255),i.writeUInt8(89),i.writeVarInt(2),i.writeInt8(o.key),i.writeUInt8(o.scale);break;case"sequencerSpecific":i.writeUInt8(255),i.writeUInt8(127),i.writeVarInt(m.length),i.writeBytes(m);break;case"unknownMeta":o.metatypeByte!=null&&(i.writeUInt8(255),i.writeUInt8(o.metatypeByte),i.writeVarInt(m.length),i.writeBytes(m));break;case"sysEx":i.writeUInt8(240),i.writeVarInt(m.length),i.writeBytes(m);break;case"endSysEx":i.writeUInt8(247),i.writeVarInt(m.length),i.writeBytes(m);break;case"noteOff":var S=c!==!1&&o.byte9||c&&o.velocity==0?144:128;p=S|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.noteNumber),i.writeUInt8(o.velocity);break;case"noteOn":p=144|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.noteNumber),i.writeUInt8(o.velocity);break;case"noteAftertouch":p=160|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.noteNumber),i.writeUInt8(o.amount);break;case"controller":p=176|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.controllerType),i.writeUInt8(o.value);break;case"programChange":p=192|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.programNumber);break;case"channelAftertouch":p=208|o.channel,p!==a&&i.writeUInt8(p),i.writeUInt8(o.amount);break;case"pitchBend":p=224|o.channel,p!==a&&i.writeUInt8(p);var O=8192+o.value,F=O&127,I=O>>7&127;i.writeUInt8(F),i.writeUInt8(I);break;default:throw"Unrecognized event type: "+u}return p}function r(){this.buffer=[]}return r.prototype.writeUInt8=function(i){this.buffer.push(i&255)},r.prototype.writeInt8=r.prototype.writeUInt8,r.prototype.writeUInt16=function(i){var o=i>>8&255,a=i&255;this.writeUInt8(o),this.writeUInt8(a)},r.prototype.writeInt16=r.prototype.writeUInt16,r.prototype.writeUInt24=function(i){var o=i>>16&255,a=i>>8&255,c=i&255;this.writeUInt8(o),this.writeUInt8(a),this.writeUInt8(c)},r.prototype.writeInt24=r.prototype.writeUInt24,r.prototype.writeUInt32=function(i){var o=i>>24&255,a=i>>16&255,c=i>>8&255,u=i&255;this.writeUInt8(o),this.writeUInt8(a),this.writeUInt8(c),this.writeUInt8(u)},r.prototype.writeInt32=r.prototype.writeUInt32,r.prototype.writeBytes=function(i){this.buffer=this.buffer.concat(Array.prototype.slice.call(i,0))},r.prototype.writeString=function(i){var o,a=i.length,c=[];for(o=0;o<a;o++)c.push(i.codePointAt(o));this.writeBytes(c)},r.prototype.writeVarInt=function(i){if(i<0)throw"Cannot write negative variable-length integer";if(i<=127)this.writeUInt8(i);else{var o=i,a=[];for(a.push(o&127),o>>=7;o;){var c=o&127|128;a.push(c),o>>=7}this.writeBytes(a.reverse())}},r.prototype.writeChunk=function(i,o){this.writeString(i),this.writeUInt32(o.length),this.writeBytes(o)},ko=n,ko}var gl;function Dv(){return gl||(gl=1,Wr.parseMidi=Ov(),Wr.writeMidi=Rv()),Wr}var lf=Dv();function Qr(n,e,t="ticks"){let s=0;const r=n.length;let i=r;if(r>0&&n[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=n[o],c=n[o+1];if(a[t]===e){for(let u=o;u<n.length;u++)n[u][t]===e&&(o=u);return o}else{if(a[t]<e&&c[t]>e)return o;a[t]>e?i=o:a[t]<e&&(s=o+1)}}return-1}function Io(n,e,t="ticks"){if(n.length){const s=Qr(n,e[t],t);n.splice(s+1,0,e)}else n.push(e)}const jr=new WeakMap,uf=[["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"],["Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#","G#","D#","A#"]];class _l{constructor(e){if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",jr.set(this,480),e){jr.set(this,e.header.ticksPerBeat),e.tracks.forEach(s=>{s.forEach(r=>{r.meta&&(r.type==="timeSignature"?this.timeSignatures.push({ticks:r.absoluteTime,timeSignature:[r.numerator,r.denominator]}):r.type==="setTempo"?this.tempos.push({bpm:6e7/r.microsecondsPerBeat,ticks:r.absoluteTime}):r.type==="keySignature"?this.keySignatures.push({key:uf[r.scale][r.key+7],scale:r.scale===0?"major":"minor",ticks:r.absoluteTime}):(r.type==="marker"||r.type==="lyrics")&&this.meta.push({text:r.text,ticks:r.absoluteTime,type:r.type}))})});let t=0;e.tracks[0].forEach(s=>{t+=s.deltaTime,s.meta&&(s.type==="trackName"?this.name=s.text:(s.type==="text"||s.type==="cuePoint")&&this.meta.push({text:s.text,ticks:t,type:s.type}))}),this.update()}}update(){let e=0,t=0;this.tempos.sort((s,r)=>s.ticks-r.ticks),this.tempos.forEach((s,r)=>{const i=r>0?this.tempos[r-1].bpm:this.tempos[0].bpm,o=s.ticks/this.ppq-t,a=60/i*o;s.time=a+e,e=s.time,t+=o}),this.timeSignatures.sort((s,r)=>s.ticks-r.ticks),this.timeSignatures.forEach((s,r)=>{const i=r>0?this.timeSignatures[r-1]:this.timeSignatures[0],o=(s.ticks-i.ticks)/this.ppq,a=yl(o,i.timeSignature);i.measures=i.measures||0,s.measures=a+i.measures})}ticksToSeconds(e){const t=Qr(this.tempos,e);if(t!==-1){const s=this.tempos[t],r=s.time,i=(e-s.ticks)/this.ppq;return r+60/s.bpm*i}else{const s=e/this.ppq;return 60/120*s}}ticksToMeasures(e){const t=Qr(this.timeSignatures,e);if(t!==-1){const s=this.timeSignatures[t],r=(e-s.ticks)/this.ppq;return s.measures+yl(r,s.timeSignature)}else return e/this.ppq/4}get ppq(){return jr.get(this)}secondsToTicks(e){const t=Qr(this.tempos,e,"time");if(t!==-1){const s=this.tempos[t],r=s.time,o=(e-r)/(60/s.bpm);return Math.round(s.ticks+o*this.ppq)}else{const s=e/.5;return Math.round(s*this.ppq)}}toJSON(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(e=>({bpm:e.bpm,ticks:e.ticks})),timeSignatures:this.timeSignatures}}fromJSON(e){this.name=e.name,this.tempos=e.tempos.map(t=>Object.assign({},t)),this.timeSignatures=e.timeSignatures.map(t=>Object.assign({},t)),this.keySignatures=e.keySignatures.map(t=>Object.assign({},t)),this.meta=e.meta.map(t=>Object.assign({},t)),jr.set(this,e.ppq),this.update()}setTempo(e){this.tempos=[{bpm:e,ticks:0}],this.update()}}function yl(n,e){return n/(e[0]/e[1])/4}const Ri={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},Gr=Object.keys(Ri).reduce((n,e)=>(n[Ri[e]]=e,n),{}),Eo=new WeakMap,bl=new WeakMap;class Pv{constructor(e,t){Eo.set(this,t),bl.set(this,e.controllerType),this.ticks=e.absoluteTime,this.value=e.value}get number(){return bl.get(this)}get name(){return Ri[this.number]?Ri[this.number]:null}get time(){return Eo.get(this).ticksToSeconds(this.ticks)}set time(e){const t=Eo.get(this);this.ticks=t.secondsToTicks(e)}toJSON(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}}}function Fv(){return new Proxy({},{get(n,e){if(n[e])return n[e];if(Gr.hasOwnProperty(e))return n[Gr[e]]},set(n,e,t){return Gr.hasOwnProperty(e)?n[Gr[e]]=t:n[e]=t,!0}})}const Co=new WeakMap;class Bv{constructor(e,t){Co.set(this,t),this.ticks=e.absoluteTime,this.value=e.value}get time(){return Co.get(this).ticksToSeconds(this.ticks)}set time(e){const t=Co.get(this);this.ticks=t.secondsToTicks(e)}toJSON(){return{ticks:this.ticks,time:this.time,value:this.value}}}const vl=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],Lv=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],Vv={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"},wl=new WeakMap;class xl{constructor(e,t){if(this.number=0,wl.set(this,t),this.number=0,e){const s=e.find(r=>r.type==="programChange");s&&(this.number=s.programNumber)}}get name(){return this.percussion?Vv[this.number]:vl[this.number]}set name(e){const t=vl.indexOf(e);t!==-1&&(this.number=t)}get family(){return this.percussion?"drums":Lv[Math.floor(this.number/8)]}get percussion(){return wl.get(this).channel===9}toJSON(){return{family:this.family,number:this.number,name:this.name}}fromJSON(e){this.number=e.number}}function Uv(n){const e=Math.floor(n/12)-1;return hf(n)+e.toString()}function hf(n){const e=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],t=n%12;return e[t]}function $v(n){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(n)}const qv=function(){const n=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return t=>{const s=n.exec(t),r=s[1],i=s[2];return e[r.toLowerCase()]+(parseInt(i,10)+1)*12}}(),os=new WeakMap;let Wv=class{constructor(e,t,s){os.set(this,s),this.midi=e.midi,this.velocity=e.velocity,this.noteOffVelocity=t.velocity,this.ticks=e.ticks,this.durationTicks=t.ticks-e.ticks}get name(){return Uv(this.midi)}set name(e){this.midi=qv(e)}get octave(){return Math.floor(this.midi/12)-1}set octave(e){const t=e-this.octave;this.midi+=t*12}get pitch(){return hf(this.midi)}set pitch(e){this.midi=12*(this.octave+1)+$v(e)}get duration(){const e=os.get(this);return e.ticksToSeconds(this.ticks+this.durationTicks)-e.ticksToSeconds(this.ticks)}set duration(e){const s=os.get(this).secondsToTicks(this.time+e);this.durationTicks=s-this.ticks}get time(){return os.get(this).ticksToSeconds(this.ticks)}set time(e){const t=os.get(this);this.ticks=t.secondsToTicks(e)}get bars(){return os.get(this).ticksToMeasures(this.ticks)}toJSON(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}}};const Hr=new WeakMap;class Ao{constructor(e,t){if(this.name="",this.notes=[],this.controlChanges=Fv(),this.pitchBends=[],Hr.set(this,t),e){const s=e.find(r=>r.type==="trackName");this.name=s?s.text:""}if(this.instrument=new xl(e,this),this.channel=0,e){const s=e.filter(c=>c.type==="noteOn"),r=e.filter(c=>c.type==="noteOff");for(;s.length;){const c=s.shift();this.channel=c.channel;const u=r.findIndex(l=>l.noteNumber===c.noteNumber&&l.absoluteTime>=c.absoluteTime);if(u!==-1){const l=r.splice(u,1)[0];this.addNote({durationTicks:l.absoluteTime-c.absoluteTime,midi:c.noteNumber,noteOffVelocity:l.velocity/127,ticks:c.absoluteTime,velocity:c.velocity/127})}}e.filter(c=>c.type==="controller").forEach(c=>{this.addCC({number:c.controllerType,ticks:c.absoluteTime,value:c.value/127})}),e.filter(c=>c.type==="pitchBend").forEach(c=>{this.addPitchBend({ticks:c.absoluteTime,value:c.value/Math.pow(2,13)})});const a=e.find(c=>c.type==="endOfTrack");this.endOfTrackTicks=a!==void 0?a.absoluteTime:void 0}}addNote(e){const t=Hr.get(this),s=new Wv({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},t);return Object.assign(s,e),Io(this.notes,s,"ticks"),this}addCC(e){const t=Hr.get(this),s=new Pv({controllerType:e.number},t);return delete e.number,Object.assign(s,e),Array.isArray(this.controlChanges[s.number])||(this.controlChanges[s.number]=[]),Io(this.controlChanges[s.number],s,"ticks"),this}addPitchBend(e){const t=Hr.get(this),s=new Bv({},t);return Object.assign(s,e),Io(this.pitchBends,s,"ticks"),this}get duration(){if(!this.notes.length)return 0;let e=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration;for(let t=0;t<this.notes.length-1;t++){const s=this.notes[t].time+this.notes[t].duration;e<s&&(e=s)}return e}get durationTicks(){if(!this.notes.length)return 0;let e=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks;for(let t=0;t<this.notes.length-1;t++){const s=this.notes[t].ticks+this.notes[t].durationTicks;e<s&&(e=s)}return e}fromJSON(e){this.name=e.name,this.channel=e.channel,this.instrument=new xl(void 0,this),this.instrument.fromJSON(e.instrument),e.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=e.endOfTrackTicks);for(const t in e.controlChanges)e.controlChanges[t]&&e.controlChanges[t].forEach(s=>{this.addCC({number:s.number,ticks:s.ticks,value:s.value})});e.notes.forEach(t=>{this.addNote({durationTicks:t.durationTicks,midi:t.midi,ticks:t.ticks,velocity:t.velocity})}),e.pitchBends.forEach(t=>{this.addPitchBend({value:t.value,ticks:t.value,time:t.time})})}toJSON(){const e={};for(let s=0;s<127;s++)this.controlChanges.hasOwnProperty(s)&&(e[s]=this.controlChanges[s].map(r=>r.toJSON()));const t={channel:this.channel,controlChanges:e,pitchBends:this.pitchBends.map(s=>s.toJSON()),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(s=>s.toJSON())};return this.endOfTrackTicks!==void 0&&(t.endOfTrackTicks=this.endOfTrackTicks),t}}function jv(n){var e=[];return ff(n,e),e}function ff(n,e){for(var t=0;t<n.length;t++){var s=n[t];Array.isArray(s)?ff(s,e):e.push(s)}}function Gv(n,e){return[{absoluteTime:n.ticks,channel:e,deltaTime:0,noteNumber:n.midi,type:"noteOn",velocity:Math.floor(n.velocity*127)},{absoluteTime:n.ticks+n.durationTicks,channel:e,deltaTime:0,noteNumber:n.midi,type:"noteOff",velocity:Math.floor(n.noteOffVelocity*127)}]}function Hv(n){return jv(n.notes.map(e=>Gv(e,n.channel)))}function zv(n,e){return{absoluteTime:n.ticks,channel:e,controllerType:n.number,deltaTime:0,type:"controller",value:Math.floor(n.value*127)}}function Yv(n){const e=[];for(let t=0;t<127;t++)n.controlChanges.hasOwnProperty(t)&&n.controlChanges[t].forEach(s=>{e.push(zv(s,n.channel))});return e}function Zv(n,e){return{absoluteTime:n.ticks,channel:e,deltaTime:0,type:"pitchBend",value:n.value}}function Xv(n){const e=[];return n.pitchBends.forEach(t=>{e.push(Zv(t,n.channel))}),e}function Kv(n){return{absoluteTime:0,channel:n.channel,deltaTime:0,programNumber:n.instrument.number,type:"programChange"}}function Jv(n){return{absoluteTime:0,deltaTime:0,meta:!0,text:n,type:"trackName"}}function Qv(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/n.bpm),type:"setTempo"}}function ew(n){return{absoluteTime:n.ticks,deltaTime:0,denominator:n.timeSignature[1],meta:!0,metronome:24,numerator:n.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function tw(n){const e=n.scale==="major"?0:1,t=uf[e].indexOf(n.key);return{absoluteTime:n.ticks,deltaTime:0,key:t-7,meta:!0,scale:e,type:"keySignature"}}function nw(n){return{absoluteTime:n.ticks,deltaTime:0,meta:!0,text:n.text,type:n.type}}function sw(n){const e={header:{format:1,numTracks:n.tracks.length+1,ticksPerBeat:n.header.ppq},tracks:[[{absoluteTime:0,deltaTime:0,meta:!0,text:n.header.name,type:"trackName"},...n.header.keySignatures.map(t=>tw(t)),...n.header.meta.map(t=>nw(t)),...n.header.tempos.map(t=>Qv(t)),...n.header.timeSignatures.map(t=>ew(t))],...n.tracks.map(t=>[Jv(t.name),Kv(t),...Hv(t),...Yv(t),...Xv(t)])]};return e.tracks=e.tracks.map(t=>{t=t.sort((r,i)=>r.absoluteTime-i.absoluteTime);let s=0;return t.forEach(r=>{r.deltaTime=Math.round(r.absoluteTime-s),s=r.absoluteTime,delete r.absoluteTime}),t.push({deltaTime:0,meta:!0,type:"endOfTrack"}),t}),new Uint8Array(lf.writeMidi(e))}class jn{static async fromUrl(e){const t=await fetch(e);if(t.ok){const s=await t.arrayBuffer();return new jn(s)}else throw new Error(`Could not load '${e}'`)}constructor(e){let t=null;if(e){const s=e instanceof ArrayBuffer?new Uint8Array(e):e;t=lf.parseMidi(s),t.tracks.forEach(r=>{let i=0;r.forEach(o=>{i+=o.deltaTime,o.absoluteTime=i})}),t.tracks=rw(t.tracks)}this.header=new _l(t),this.tracks=[],e&&(this.tracks=t.tracks.map(s=>new Ao(s,this.header)),t.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}get name(){return this.header.name}set name(e){this.header.name=e}get duration(){const e=this.tracks.map(t=>t.duration);return Math.max(...e)}get durationTicks(){const e=this.tracks.map(t=>t.durationTicks);return Math.max(...e)}addTrack(){const e=new Ao(void 0,this.header);return this.tracks.push(e),e}toArray(){return sw(this)}toJSON(){return{header:this.header.toJSON(),tracks:this.tracks.map(e=>e.toJSON())}}fromJSON(e){this.header=new _l,this.header.fromJSON(e.header),this.tracks=e.tracks.map(t=>{const s=new Ao(void 0,this.header);return s.fromJSON(t),s})}clone(){const e=new jn;return e.fromJSON(this.toJSON()),e}}function rw(n){const e=[];for(let t=0;t<n.length;t++){const s=e.length,r=new Map,i=Array(16).fill(0);for(const o of n[t]){let a=s;const c=o.channel;if(c!==void 0){o.type==="programChange"&&(i[c]=o.programNumber);const l=`${i[c]} ${c}`;r.has(l)?a=r.get(l):(a=s+r.size,r.set(l,a))}e[a]||e.push([]),e[a].push(o)}}return e}function Tl(n){return n.header.tempos.length>0?n.header.tempos[0].bpm/60:120/60}class ei{constructor(e,t,s,r){he(this,"onset");he(this,"duration");he(this,"pitch");he(this,"velocity");this.onset=e,this.duration=t,this.pitch=s,this.velocity=r}equals(e){return this.onset===e.onset&&this.duration===e.duration&&this.pitch===e.pitch&&this.velocity===e.velocity}}class Js{constructor(e=null){he(this,"notes");he(this,"bps");he(this,"midiData",null);he(this,"_duration",0);if(!e){this.notes=[],this.bps=120/60;return}this.midiData=e;const t=new jn(e);this.bps=Tl(t),this.notes=t.tracks[0].notes.map(s=>new ei(s.time*this.bps,s.duration*this.bps,s.midi,s.velocity*127)),this.recalculateDuration()}get duration(){return this._duration}toMidi(){const e=new jn;if(e.addTrack(),this.midiData){const s=new jn(this.midiData);e.header=s.header}e.header.update();const t=e.header.secondsToTicks(1);this.bps=Tl(e);for(const s of this.notes)e.tracks[0].addNote({ticks:s.onset/this.bps*t,durationTicks:s.duration/this.bps*t,midi:s.pitch,velocity:s.velocity});return e}getNotes(){return this.notes}getNotesBetween(e,t){return this.notes.filter(s=>s.onset<t&&s.onset+s.duration>=e)}getNoteAt(e,t){const s=this.notes.find(r=>r.onset<e&&r.onset+r.duration>e&&r.pitch===t)||null;return s||null}getNotesOnsetBetween(e,t){return this.notes.filter(s=>s.onset<t&&s.onset>=e)}addNote(e){this.notes.push(e),this._duration=Math.max(this._duration,e.onset+e.duration)}removeNote(e){this.notes=this.notes.filter(t=>!t.equals(e)),this.recalculateDuration()}overlapWith(e,t=0){for(const s of e.notes)this.addNote(new ei(s.onset+t,s.duration,s.pitch,s.velocity))}slice(e,t,s=!1){e-=.001,t-=.001;const r=new Js;return r.notes=this.notes.filter(i=>i.onset>=e&&i.onset<=t),r.notes=r.notes.map(i=>new ei(s?i.onset-e:i.onset,i.duration,i.pitch,i.velocity)),r.recalculateDuration(),r}removeSlice(e,t){e-=.001,t-=.001,this.notes=this.notes.filter(s=>s.onset<=e||s.onset>=t),this.recalculateDuration()}recalculateDuration(){this.notes.length===0?this._duration=0:this._duration=Math.max(...this.notes.map(e=>e.onset+e.duration))}}function iw(n,e,t){const s=(n+16)/116,r=e/500+s,i=s-t/200,[o,a,c]=[r,s,i].map(u=>{const l=u**3;return l>.008856?l:(u-16/116)/7.787});return{x:o*95.047,y:a*100,z:c*108.883}}function ow(n,e,t){n/=100,e/=100,t/=100;let s=n*3.2406+e*-1.5372+t*-.4986,r=n*-.9689+e*1.8758+t*.0415,i=n*.0557+e*-.204+t*1.057;const o=a=>a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a;return s=o(s),r=o(r),i=o(i),{r:Math.min(255,Math.max(0,s*255)),g:Math.min(255,Math.max(0,r*255)),b:Math.min(255,Math.max(0,i*255))}}function aw(n,e,t){const s=iw(n,e,t);return ow(s.x,s.y,s.z)}function Sl(n,e,t){const s=aw(n,e,t);return`rgb(${s.r}, ${s.g}, ${s.b})`}var cw=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class co extends me{constructor(e){super(e),this.name="PianoComponent",this.input=void 0,this.output=new En({context:this.context}),this._enabled=!1,this.volume=this.output.volume,this._loaded=!1,this.volume.value=e.volume,this._enabled=e.enabled,this.samples=e.samples}get loaded(){return this._loaded}load(){return cw(this,void 0,void 0,function*(){if(this._enabled)yield this._internalLoad(),this._loaded=!0;else return Promise.resolve()})}}function df(n){return gv(n,"midi").toNote()}function Di(n,e){return Math.random()*(e-n)+n}function lw(n){return`rel${n-20}.[mp3|ogg]`}function uw(n){return`harmS${df(n).replace("#","s")}.[mp3|ogg]`}function hw(n,e){return`${df(n).replace("#","s")}v${e}.[mp3|ogg]`}const fw={1:[8],2:[6,12],3:[1,7,15],4:[1,5,10,15],5:[1,4,8,12,16],6:[1,3,7,10,13,16],7:[1,3,6,9,11,13,16],8:[1,3,5,7,9,11,13,16],9:[1,3,5,7,9,11,13,15,16],10:[1,2,3,5,7,9,11,13,15,16],11:[1,2,3,5,7,9,11,13,14,15,16],12:[1,2,3,4,5,7,9,11,13,14,15,16],13:[1,2,3,4,5,7,9,11,12,13,14,15,16],14:[1,2,3,4,5,6,7,9,11,12,13,14,15,16],15:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},dw=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108];function pw(n,e){return dw.filter(t=>n<=t&&t<=e)}const ti=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87];function mw(n,e){return ti.filter(t=>n<=t&&t<=e)}function gw(n){return ti[0]<=n&&n<=ti[ti.length-1]}class _w extends co{constructor(e){super(e),this._urls={};const t=mw(e.minNote,e.maxNote);for(const s of t)this._urls[s]=uw(s)}triggerAttack(e,t,s){this._enabled&&gw(e)&&this._sampler.triggerAttack(lr(e).toNote(),t,s*Di(.5,1))}_internalLoad(){return new Promise(e=>{this._sampler=new Qn({baseUrl:this.samples,onload:e,urls:this._urls}).connect(this.output)})}}class yw extends co{constructor(e){super(e),this._urls={};for(let t=e.minNote;t<=e.maxNote;t++)this._urls[t]=lw(t)}_internalLoad(){return new Promise(e=>{this._buffers=new Rr(this._urls,e,this.samples)})}start(e,t,s){this._enabled&&this._buffers.has(e)&&new Xn({url:this._buffers.get(e),context:this.context}).connect(this.output).start(t,0,void 0,.015*s*Di(.5,1))}}class bw extends co{constructor(e){super(e),this._downTime=1/0,this._currentSound=null,this._downTime=1/0}_internalLoad(){return new Promise(e=>{this._buffers=new Rr({down1:"pedalD1.mp3",down2:"pedalD2.mp3",up1:"pedalU1.mp3",up2:"pedalU2.mp3"},e,this.samples)})}_squash(e){this._currentSound&&this._currentSound.state!=="stopped"&&this._currentSound.stop(e),this._currentSound=null}_playSample(e,t){this._enabled&&(this._currentSound=new Xn({url:this._buffers.get(`${t}${Math.random()>.5?1:2}`),context:this.context,curve:"exponential",fadeIn:.05,fadeOut:.1}).connect(this.output),this._currentSound.start(e,Di(0,.01),void 0,.1*Di(.5,1)))}down(e){this._squash(e),this._downTime=e,this._playSample(e,"down")}up(e){this._squash(e),this._downTime=1/0,this._playSample(e,"up")}isDown(e){return e>this._downTime}}class vw extends me{constructor(e){super(e),this.name="PianoString",this._urls={},e.notes.forEach(t=>this._urls[t]=hw(t,e.velocity)),this.samples=e.samples}load(){return new Promise(e=>{this._sampler=this.output=new Qn({attack:0,baseUrl:this.samples,curve:"exponential",onload:e,release:.4,urls:this._urls,volume:3})})}triggerAttack(e,t,s){this._sampler.triggerAttack(e,t,s)}triggerRelease(e,t){this._sampler.triggerRelease(e,t)}}var kl=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class ww extends co{constructor(e){super(e);const t=pw(e.minNote,e.maxNote),s=fw[e.velocities].slice();this._strings=s.map(r=>new vw(Object.assign(e,{notes:t,velocity:r}))),this._activeNotes=new Map}scale(e,t,s,r,i){return(e-t)/(s-t)*(i-r)+r}triggerAttack(e,t,s){const r=this.scale(s,0,1,-.5,this._strings.length-.51),i=Math.max(Math.round(r),0);let o=1+r-i;this._strings.length===1&&(o=s);const a=this._strings[i];this._activeNotes.has(e)&&this.triggerRelease(e,t),this._activeNotes.set(e,a),a.triggerAttack(lr(e).toNote(),t,o)}triggerRelease(e,t){this._activeNotes.has(e)&&(this._activeNotes.get(e).triggerRelease(lr(e).toNote(),t),this._activeNotes.delete(e))}_internalLoad(){return kl(this,void 0,void 0,function*(){yield Promise.all(this._strings.map(e=>kl(this,void 0,void 0,function*(){yield e.load(),e.connect(this.output)})))})}}var xw=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class Pi extends me{constructor(){super(te(Pi.getDefaults(),arguments)),this.name="Piano",this.input=void 0,this.output=new et({context:this.context}),this._heldNotes=new Map,this._loaded=!1;const e=te(Pi.getDefaults(),arguments);e.url.endsWith("/")||(e.url+="/"),this.maxPolyphony=e.maxPolyphony,this._heldNotes=new Map,this._sustainedNotes=new Map,this._strings=new ww(Object.assign({},e,{enabled:!0,samples:e.url,volume:e.volume.strings})).connect(this.output),this.strings=this._strings.volume,this._pedal=new bw(Object.assign({},e,{enabled:e.pedal,samples:e.url,volume:e.volume.pedal})).connect(this.output),this.pedal=this._pedal.volume,this._keybed=new yw(Object.assign({},e,{enabled:e.release,samples:e.url,volume:e.volume.keybed})).connect(this.output),this.keybed=this._keybed.volume,this._harmonics=new _w(Object.assign({},e,{enabled:e.release,samples:e.url,volume:e.volume.harmonics})).connect(this.output),this.harmonics=this._harmonics.volume}static getDefaults(){return Object.assign(me.getDefaults(),{maxNote:108,minNote:21,pedal:!0,release:!1,url:"https://tambien.github.io/Piano/audio/",velocities:1,maxPolyphony:32,volume:{harmonics:0,keybed:0,pedal:0,strings:0}})}load(){return xw(this,void 0,void 0,function*(){yield Promise.all([this._strings.load(),this._pedal.load(),this._keybed.load(),this._harmonics.load()]),this._loaded=!0})}get loaded(){return this._loaded}pedalDown({time:e=this.immediate()}={}){return this.loaded&&(e=this.toSeconds(e),this._pedal.isDown(e)||this._pedal.down(e)),this}pedalUp({time:e=this.immediate()}={}){if(this.loaded){const t=this.toSeconds(e);this._pedal.isDown(t)&&(this._pedal.up(t),this._sustainedNotes.forEach((s,r)=>{this._heldNotes.has(r)||this._strings.triggerRelease(r,t)}),this._sustainedNotes.clear())}return this}keyDown({note:e,midi:t,time:s=this.immediate(),velocity:r=.8}){return this.loaded&&this.maxPolyphony>this._heldNotes.size+this._sustainedNotes.size?(s=this.toSeconds(s),qt(e)&&(t=Math.round(lr(e).toMidi())),this._heldNotes.has(t)||(this._heldNotes.set(t,{time:s,velocity:r}),this._strings.triggerAttack(t,s,r))):console.warn("samples not loaded"),this}keyUp({note:e,midi:t,time:s=this.immediate(),velocity:r=.8}){if(this.loaded&&(s=this.toSeconds(s),qt(e)&&(t=Math.round(lr(e).toMidi())),this._heldNotes.has(t))){const i=this._heldNotes.get(t);this._heldNotes.delete(t);const o=Math.pow(Math.max(s-i.time,.1),.7),a=i.velocity;let c=3/o*a*r;c=Math.max(c,.4),c=Math.min(c,4),this._pedal.isDown(s)?this._sustainedNotes.has(t)||this._sustainedNotes.set(t,s):(this._strings.triggerRelease(t,s),this._harmonics.triggerAttack(t,s,c)),this._keybed.start(t,s,r)}return this}stopAll(){return this.pedalUp(),this._heldNotes.forEach((e,t)=>{this.keyUp({midi:t})}),this}}var zr={exports:{}},Il;function Tw(){if(Il)return zr.exports;Il=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(_,k,T){return Function.prototype.apply.call(_,k,T)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:t=function(_){return Object.getOwnPropertyNames(_)};function s(I){console&&console.warn&&console.warn(I)}var r=Number.isNaN||function(_){return _!==_};function i(){i.init.call(this)}zr.exports=i,zr.exports.once=S,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(I){if(typeof I!="number"||I<0||r(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");o=I}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||r(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function c(I){return I._maxListeners===void 0?i.defaultMaxListeners:I._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(_){for(var k=[],T=1;T<arguments.length;T++)k.push(arguments[T]);var x=_==="error",L=this._events;if(L!==void 0)x=x&&L.error===void 0;else if(!x)return!1;if(x){var P;if(k.length>0&&(P=k[0]),P instanceof Error)throw P;var q=new Error("Unhandled error."+(P?" ("+P.message+")":""));throw q.context=P,q}var D=L[_];if(D===void 0)return!1;if(typeof D=="function")e(D,this,k);else for(var X=D.length,K=y(D,X),T=0;T<X;++T)e(K[T],this,k);return!0};function u(I,_,k,T){var x,L,P;if(a(k),L=I._events,L===void 0?(L=I._events=Object.create(null),I._eventsCount=0):(L.newListener!==void 0&&(I.emit("newListener",_,k.listener?k.listener:k),L=I._events),P=L[_]),P===void 0)P=L[_]=k,++I._eventsCount;else if(typeof P=="function"?P=L[_]=T?[k,P]:[P,k]:T?P.unshift(k):P.push(k),x=c(I),x>0&&P.length>x&&!P.warned){P.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+P.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=I,q.type=_,q.count=P.length,s(q)}return I}i.prototype.addListener=function(_,k){return u(this,_,k,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(_,k){return u(this,_,k,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(I,_,k){var T={fired:!1,wrapFn:void 0,target:I,type:_,listener:k},x=l.bind(T);return x.listener=k,T.wrapFn=x,x}i.prototype.once=function(_,k){return a(k),this.on(_,h(this,_,k)),this},i.prototype.prependOnceListener=function(_,k){return a(k),this.prependListener(_,h(this,_,k)),this},i.prototype.removeListener=function(_,k){var T,x,L,P,q;if(a(k),x=this._events,x===void 0)return this;if(T=x[_],T===void 0)return this;if(T===k||T.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete x[_],x.removeListener&&this.emit("removeListener",_,T.listener||k));else if(typeof T!="function"){for(L=-1,P=T.length-1;P>=0;P--)if(T[P]===k||T[P].listener===k){q=T[P].listener,L=P;break}if(L<0)return this;L===0?T.shift():b(T,L),T.length===1&&(x[_]=T[0]),x.removeListener!==void 0&&this.emit("removeListener",_,q||k)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(_){var k,T,x;if(T=this._events,T===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete T[_]),this;if(arguments.length===0){var L=Object.keys(T),P;for(x=0;x<L.length;++x)P=L[x],P!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=T[_],typeof k=="function")this.removeListener(_,k);else if(k!==void 0)for(x=k.length-1;x>=0;x--)this.removeListener(_,k[x]);return this};function m(I,_,k){var T=I._events;if(T===void 0)return[];var x=T[_];return x===void 0?[]:typeof x=="function"?k?[x.listener||x]:[x]:k?w(x):y(x,x.length)}i.prototype.listeners=function(_){return m(this,_,!0)},i.prototype.rawListeners=function(_){return m(this,_,!1)},i.listenerCount=function(I,_){return typeof I.listenerCount=="function"?I.listenerCount(_):p.call(I,_)},i.prototype.listenerCount=p;function p(I){var _=this._events;if(_!==void 0){var k=_[I];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function y(I,_){for(var k=new Array(_),T=0;T<_;++T)k[T]=I[T];return k}function b(I,_){for(;_+1<I.length;_++)I[_]=I[_+1];I.pop()}function w(I){for(var _=new Array(I.length),k=0;k<_.length;++k)_[k]=I[k].listener||I[k];return _}function S(I,_){return new Promise(function(k,T){function x(P){I.removeListener(_,L),T(P)}function L(){typeof I.removeListener=="function"&&I.removeListener("error",x),k([].slice.call(arguments))}F(I,_,L,{once:!0}),_!=="error"&&O(I,x,{once:!0})})}function O(I,_,k){typeof I.on=="function"&&F(I,"error",_,k)}function F(I,_,k,T){if(typeof I.on=="function")T.once?I.once(_,k):I.on(_,k);else if(typeof I.addEventListener=="function")I.addEventListener(_,function x(L){T.once&&I.removeEventListener(_,x),k(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return zr.exports}var Sw=Tw(),ni={exports:{}},kw=ni.exports,El;function Iw(){return El||(El=1,function(n){(function(e){function t(){if(t.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(t.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:(function(){return this.interface!==void 0}).bind(this)},inputs:{enumerable:!0,get:(function(){return this._inputs}).bind(this)},outputs:{enumerable:!0,get:(function(){return this._outputs}).bind(this)},sysexEnabled:{enumerable:!0,get:(function(){return!(!this.interface||!this.interface.sysexEnabled)}).bind(this)},nrpnEventsEnabled:{enumerable:!0,get:(function(){return!!this._nrpnEventsEnabled}).bind(this),set:function(o){return this._nrpnEventsEnabled=o,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:(function(){return this._nrpnTypes}).bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var s=new t;function r(o){var a=this;this._userHandlers={channel:{},system:{}},this._midiInput=o,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return a._midiInput.connection}},id:{enumerable:!0,get:function(){return a._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return a._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return a._midiInput.name}},state:{enumerable:!0,get:function(){return a._midiInput.state}},type:{enumerable:!0,get:function(){return a._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function i(o){var a=this;this._midiOutput=o,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return a._midiOutput.connection}},id:{enumerable:!0,get:function(){return a._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return a._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return a._midiOutput.name}},state:{enumerable:!0,get:function(){return a._midiOutput.state}},type:{enumerable:!0,get:function(){return a._midiOutput.type}}})}t.prototype.enable=function(o,a){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:a}).then((function(c){var u,l=[],h=[];this.interface=c,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(S){l.push(S)};for(var m=c.inputs.values(),p=m.next();p&&!p.done;p=m.next())h.push(p.value.open());for(var y=c.outputs.values(),b=y.next();b&&!b.done;b=y.next())h.push(b.value.open());function w(){clearTimeout(u),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),typeof o=="function"&&o.call(this),l.forEach((function(S){this._onInterfaceStateChange(S)}).bind(this))}u=setTimeout(w.bind(this),200),Promise&&Promise.all(h).catch(function(S){}).then(w.bind(this))}).bind(this),(function(c){typeof o=="function"&&o.call(this,c)}).bind(this)):typeof o=="function"&&o(new Error("The Web MIDI API is not supported by your browser.")))},t.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.enabled&&(this.removeListener(),this.inputs.forEach(function(o){o.removeListener()})),this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},t.prototype.addListener=function(o,a){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if(typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(o)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[o].push(a),this},t.prototype.hasListener=function(o,a){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if(typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(o)))throw new TypeError("The specified event type is not supported.");for(var c=0;c<this._userHandlers[o].length;c++)if(this._userHandlers[o][c]===a)return!0;return!1},t.prototype.removeListener=function(o,a){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(a!==void 0&&typeof a!="function")throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(o))if(a)for(var c=0;c<this._userHandlers[o].length;c++)this._userHandlers[o][c]===a&&this._userHandlers[o].splice(c,1);else this._userHandlers[o]=[];else{if(o!==void 0)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},t.prototype.toMIDIChannels=function(o){var a;if(o==="all"||o===void 0)a=["all"];else{if(o==="none")return a=[];a=Array.isArray(o)?o:[o]}return-1<a.indexOf("all")&&(a=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),a.map(function(c){return parseInt(c)}).filter(function(c){return 1<=c&&c<=16})},t.prototype.getInputById=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");o=String(o);for(var a=0;a<this.inputs.length;a++)if(this.inputs[a].id===o)return this.inputs[a];return!1},t.prototype.getOutputById=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");o=String(o);for(var a=0;a<this.outputs.length;a++)if(this.outputs[a].id===o)return this.outputs[a];return!1},t.prototype.getInputByName=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var a=0;a<this.inputs.length;a++)if(~this.inputs[a].name.indexOf(o))return this.inputs[a];return!1},t.prototype.getOctave=function(o){if(o!=null&&0<=o&&o<=127)return Math.floor(Math.floor(o)/12-1)+Math.floor(s.octaveOffset)},t.prototype.getOutputByName=function(o){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var a=0;a<this.outputs.length;a++)if(~this.outputs[a].name.indexOf(o))return this.outputs[a];return!1},t.prototype.guessNoteNumber=function(o){var a=!1;if(o&&o.toFixed&&0<=o&&o<=127?a=Math.round(o):0<=parseInt(o)&&parseInt(o)<=127?a=parseInt(o):(typeof o=="string"||o instanceof String)&&(a=this.noteNameToNumber(o)),a===!1)throw new Error("Invalid input value ("+o+").");return a},t.prototype.noteNameToNumber=function(o){typeof o!="string"&&(o="");var a=o.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!a)throw new RangeError("Invalid note name.");var c=s._semitones[a[1].toUpperCase()],u=12*(parseInt(a[3])+1-Math.floor(s.octaveOffset))+c;if(-1<a[2].toLowerCase().indexOf("b")?u-=a[2].length:-1<a[2].toLowerCase().indexOf("#")&&(u+=a[2].length),u<0||127<u)throw new RangeError("Invalid note name or note outside valid range.");return u},t.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},t.prototype._updateInputs=function(){for(var o=0;o<this._inputs.length;o++){for(var a=!0,c=this.interface.inputs.values(),u=c.next();u&&!u.done;u=c.next())if(this._inputs[o]._midiInput===u.value){a=!1;break}a&&this._inputs.splice(o,1)}this.interface&&this.interface.inputs.forEach((function(l){for(var h=!0,m=0;m<this._inputs.length;m++)this._inputs[m]._midiInput===l&&(h=!1);h&&this._inputs.push(new r(l))}).bind(this))},t.prototype._updateOutputs=function(){for(var o=0;o<this._outputs.length;o++){for(var a=!0,c=this.interface.outputs.values(),u=c.next();u&&!u.done;u=c.next())if(this._outputs[o]._midiOutput===u.value){a=!1;break}a&&this._outputs.splice(o,1)}this.interface&&this.interface.outputs.forEach((function(l){for(var h=!0,m=0;m<this._outputs.length;m++)this._outputs[m]._midiOutput===l&&(h=!1);h&&this._outputs.push(new i(l))}).bind(this))},t.prototype._onInterfaceStateChange=function(o){this._updateInputsAndOutputs();var a={timestamp:o.timeStamp,type:o.port.state};this.interface&&o.port.state==="connected"?o.port.type==="output"?a.port=this.getOutputById(o.port.id):o.port.type==="input"&&(a.port=this.getInputById(o.port.id)):a.port={connection:"closed",id:o.port.id,manufacturer:o.port.manufacturer,name:o.port.name,state:o.port.state,type:o.port.type},this._userHandlers[o.port.state].forEach(function(c){c(a)})},t.prototype._resetInterfaceUserHandlers=function(){for(var o=0;o<this._midiInterfaceEvents.length;o++)this._userHandlers[this._midiInterfaceEvents[o]]=[]},r.prototype.on=r.prototype.addListener=function(o,a,c){var u=this;if(a===void 0&&(a="all"),Array.isArray(a)||(a=[a]),a.forEach(function(h){if(h!=="all"&&!(1<=h&&h<=16))throw new RangeError("The 'channel' parameter is invalid.")}),typeof c!="function")throw new TypeError("The 'listener' parameter must be a function.");if(s.MIDI_SYSTEM_MESSAGES[o]!==void 0)this._userHandlers.system[o]||(this._userHandlers.system[o]=[]),this._userHandlers.system[o].push(c);else{if(s.MIDI_CHANNEL_MESSAGES[o]===void 0)throw new TypeError("The specified event type is not supported.");if(-1<a.indexOf("all")){a=[];for(var l=1;l<=16;l++)a.push(l)}this._userHandlers.channel[o]||(this._userHandlers.channel[o]=[]),a.forEach(function(h){u._userHandlers.channel[o][h]||(u._userHandlers.channel[o][h]=[]),u._userHandlers.channel[o][h].push(c)})}return this},r.prototype.hasListener=function(o,a,c){var u=this;if(typeof c!="function")throw new TypeError("The 'listener' parameter must be a function.");if(a===void 0&&(a="all"),a.constructor!==Array&&(a=[a]),s.MIDI_SYSTEM_MESSAGES[o]!==void 0){for(var l=0;l<this._userHandlers.system[o].length;l++)if(this._userHandlers.system[o][l]===c)return!0}else if(s.MIDI_CHANNEL_MESSAGES[o]!==void 0){if(-1<a.indexOf("all")){a=[];for(var h=1;h<=16;h++)a.push(h)}return!!this._userHandlers.channel[o]&&a.every(function(m){var p=u._userHandlers.channel[o][m];return p&&-1<p.indexOf(c)})}return!1},r.prototype.removeListener=function(o,a,c){var u=this;if(c!==void 0&&typeof c!="function")throw new TypeError("The 'listener' parameter must be a function.");if(a===void 0&&(a="all"),a.constructor!==Array&&(a=[a]),s.MIDI_SYSTEM_MESSAGES[o]!==void 0)if(c===void 0)this._userHandlers.system[o]=[];else for(var l=0;l<this._userHandlers.system[o].length;l++)this._userHandlers.system[o][l]===c&&this._userHandlers.system[o].splice(l,1);else if(s.MIDI_CHANNEL_MESSAGES[o]!==void 0){if(-1<a.indexOf("all")){a=[];for(var h=1;h<=16;h++)a.push(h)}if(!this._userHandlers.channel[o])return this;a.forEach(function(m){var p=u._userHandlers.channel[o][m];if(p)if(c===void 0)u._userHandlers.channel[o][m]=[];else for(var y=0;y<p.length;y++)p[y]===c&&p.splice(y,1)})}else{if(o!==void 0)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},r.prototype._initializeUserHandlers=function(){for(var o in s.MIDI_CHANNEL_MESSAGES)Object.prototype.hasOwnProperty.call(s.MIDI_CHANNEL_MESSAGES,o)&&(this._userHandlers.channel[o]={});for(var a in s.MIDI_SYSTEM_MESSAGES)Object.prototype.hasOwnProperty.call(s.MIDI_SYSTEM_MESSAGES,a)&&(this._userHandlers.system[a]=[])},r.prototype._onMidiMessage=function(o){if(0<this._userHandlers.system.midimessage.length){var a={target:this,data:o.data,timestamp:o.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(c){c(a)})}o.data[0]<240?(this._parseChannelEvent(o),this._parseNrpnEvent(o)):o.data[0]<=255&&this._parseSystemEvent(o)},r.prototype._parseNrpnEvent=function(o){var a,c,u=o.data[0]>>4,l=15&o.data[0],h=1+l;if(1<o.data.length&&(a=o.data[1],c=2<o.data.length?o.data[2]:void 0),s.nrpnEventsEnabled&&u===s.MIDI_CHANNEL_MESSAGES.controlchange&&(a>=s.MIDI_NRPN_MESSAGES.increment&&a<=s.MIDI_NRPN_MESSAGES.parammsb||a===s.MIDI_NRPN_MESSAGES.entrymsb||a===s.MIDI_NRPN_MESSAGES.entrylsb)){var m={target:this,type:"controlchange",data:o.data,timestamp:o.timeStamp,channel:h,controller:{number:a,name:this.getCcNameByNumber(a)},value:c};if(m.controller.number===s.MIDI_NRPN_MESSAGES.parammsb&&m.value!=s.MIDI_NRPN_MESSAGES.nullactiveparameter)s._nrpnBuffer[l]=[],s._nrpnBuffer[l][0]=m;else if(s._nrpnBuffer[l].length===1&&m.controller.number===s.MIDI_NRPN_MESSAGES.paramlsb)s._nrpnBuffer[l].push(m);else if(s._nrpnBuffer[l].length!==2||m.controller.number!==s.MIDI_NRPN_MESSAGES.increment&&m.controller.number!==s.MIDI_NRPN_MESSAGES.decrement&&m.controller.number!==s.MIDI_NRPN_MESSAGES.entrymsb)if(s._nrpnBuffer[l].length===3&&s._nrpnBuffer[l][2].number===s.MIDI_NRPN_MESSAGES.entrymsb&&m.controller.number===s.MIDI_NRPN_MESSAGES.entrylsb)s._nrpnBuffer[l].push(m);else if(3<=s._nrpnBuffer[l].length&&s._nrpnBuffer[l].length<=4&&m.controller.number===s.MIDI_NRPN_MESSAGES.parammsb&&m.value===s.MIDI_NRPN_MESSAGES.nullactiveparameter)s._nrpnBuffer[l].push(m);else if(4<=s._nrpnBuffer[l].length&&s._nrpnBuffer[l].length<=5&&m.controller.number===s.MIDI_NRPN_MESSAGES.paramlsb&&m.value===s.MIDI_NRPN_MESSAGES.nullactiveparameter){s._nrpnBuffer[l].push(m);var p=[];s._nrpnBuffer[l].forEach(function(O){p.push(O.data)});var y=s._nrpnBuffer[l][0].value<<7|s._nrpnBuffer[l][1].value,b=s._nrpnBuffer[l][2].value;s._nrpnBuffer[l].length===6&&(b=s._nrpnBuffer[l][2].value<<7|s._nrpnBuffer[l][3].value);var w="";switch(s._nrpnBuffer[l][2].controller.number){case s.MIDI_NRPN_MESSAGES.entrymsb:w=s._nrpnTypes[0];break;case s.MIDI_NRPN_MESSAGES.increment:w=s._nrpnTypes[1];break;case s.MIDI_NRPN_MESSAGES.decrement:w=s._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var S={timestamp:m.timestamp,channel:m.channel,type:"nrpn",data:p,controller:{number:y,type:w,name:"Non-Registered Parameter "+y},value:b};s._nrpnBuffer[l]=[],this._userHandlers.channel[S.type]&&this._userHandlers.channel[S.type][S.channel]&&this._userHandlers.channel[S.type][S.channel].forEach(function(O){O(S)})}else s._nrpnBuffer[l]=[];else s._nrpnBuffer[l].push(m)}},r.prototype._parseChannelEvent=function(o){var a,c,u=o.data[0]>>4,l=1+(15&o.data[0]);1<o.data.length&&(a=o.data[1],c=2<o.data.length?o.data[2]:void 0);var h={target:this,data:o.data,timestamp:o.timeStamp,channel:l};u===s.MIDI_CHANNEL_MESSAGES.noteoff||u===s.MIDI_CHANNEL_MESSAGES.noteon&&c===0?(h.type="noteoff",h.note={number:a,name:s._notes[a%12],octave:s.getOctave(a)},h.velocity=c/127,h.rawVelocity=c):u===s.MIDI_CHANNEL_MESSAGES.noteon?(h.type="noteon",h.note={number:a,name:s._notes[a%12],octave:s.getOctave(a)},h.velocity=c/127,h.rawVelocity=c):u===s.MIDI_CHANNEL_MESSAGES.keyaftertouch?(h.type="keyaftertouch",h.note={number:a,name:s._notes[a%12],octave:s.getOctave(a)},h.value=c/127):u===s.MIDI_CHANNEL_MESSAGES.controlchange&&0<=a&&a<=119?(h.type="controlchange",h.controller={number:a,name:this.getCcNameByNumber(a)},h.value=c):u===s.MIDI_CHANNEL_MESSAGES.channelmode&&120<=a&&a<=127?(h.type="channelmode",h.controller={number:a,name:this.getChannelModeByNumber(a)},h.value=c):u===s.MIDI_CHANNEL_MESSAGES.programchange?(h.type="programchange",h.value=a):u===s.MIDI_CHANNEL_MESSAGES.channelaftertouch?(h.type="channelaftertouch",h.value=a/127):u===s.MIDI_CHANNEL_MESSAGES.pitchbend?(h.type="pitchbend",h.value=((c<<7)+a-8192)/8192):h.type="unknownchannelmessage",this._userHandlers.channel[h.type]&&this._userHandlers.channel[h.type][l]&&this._userHandlers.channel[h.type][l].forEach(function(m){m(h)})},r.prototype.getCcNameByNumber=function(o){if(!(0<=(o=Math.floor(o))&&o<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var a in s.MIDI_CONTROL_CHANGE_MESSAGES)if(Object.prototype.hasOwnProperty.call(s.MIDI_CONTROL_CHANGE_MESSAGES,a)&&o===s.MIDI_CONTROL_CHANGE_MESSAGES[a])return a},r.prototype.getChannelModeByNumber=function(o){if(!(120<=(o=Math.floor(o))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var a in s.MIDI_CHANNEL_MODE_MESSAGES)if(Object.prototype.hasOwnProperty.call(s.MIDI_CHANNEL_MODE_MESSAGES,a)&&o===s.MIDI_CHANNEL_MODE_MESSAGES[a])return a},r.prototype._parseSystemEvent=function(o){var a=o.data[0],c={target:this,data:o.data,timestamp:o.timeStamp};a===s.MIDI_SYSTEM_MESSAGES.sysex?c.type="sysex":a===s.MIDI_SYSTEM_MESSAGES.timecode?c.type="timecode":a===s.MIDI_SYSTEM_MESSAGES.songposition?c.type="songposition":a===s.MIDI_SYSTEM_MESSAGES.songselect?(c.type="songselect",c.song=o.data[1]):a===s.MIDI_SYSTEM_MESSAGES.tuningrequest?c.type="tuningrequest":a===s.MIDI_SYSTEM_MESSAGES.clock?c.type="clock":a===s.MIDI_SYSTEM_MESSAGES.start?c.type="start":a===s.MIDI_SYSTEM_MESSAGES.continue?c.type="continue":a===s.MIDI_SYSTEM_MESSAGES.stop?c.type="stop":a===s.MIDI_SYSTEM_MESSAGES.activesensing?c.type="activesensing":a===s.MIDI_SYSTEM_MESSAGES.reset?c.type="reset":c.type="unknownsystemmessage",this._userHandlers.system[c.type]&&this._userHandlers.system[c.type].forEach(function(u){u(c)})},i.prototype.send=function(o,a,c){if(!(128<=o&&o<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");a===void 0&&(a=[]),Array.isArray(a)||(a=[a]);var u=[];return a.forEach(function(l){var h=Math.floor(l);if(!(0<=h&&h<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");u.push(h)}),this._midiOutput.send([o].concat(u),parseFloat(c)||0),this},i.prototype.sendSysex=function(o,a,c){if(!s.sysexEnabled)throw new Error("Sysex message support must first be activated.");return c=c||{},o=[].concat(o),a.forEach(function(u){if(u<0||127<u)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),a=o.concat(a,s.MIDI_SYSTEM_MESSAGES.sysexend),this.send(s.MIDI_SYSTEM_MESSAGES.sysex,a,this._parseTimeParameter(c.time)),this},i.prototype.sendTimecodeQuarterFrame=function(o,a){return a=a||{},this.send(s.MIDI_SYSTEM_MESSAGES.timecode,o,this._parseTimeParameter(a.time)),this},i.prototype.sendSongPosition=function(o,a){a=a||{};var c=(o=Math.floor(o)||0)>>7&127,u=127&o;return this.send(s.MIDI_SYSTEM_MESSAGES.songposition,[c,u],this._parseTimeParameter(a.time)),this},i.prototype.sendSongSelect=function(o,a){if(a=a||{},!(0<=(o=Math.floor(o))&&o<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(s.MIDI_SYSTEM_MESSAGES.songselect,[o],this._parseTimeParameter(a.time)),this},i.prototype.sendTuningRequest=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendClock=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendStart=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendContinue=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendStop=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(o.time)),this},i.prototype.sendActiveSensing=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(o.time)),this},i.prototype.sendReset=function(o){return o=o||{},this.send(s.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(o.time)),this},i.prototype.stopNote=function(o,a,c){if(o==="all")return this.sendChannelMode("allnotesoff",0,a,c);var u=64;return(c=c||{}).rawVelocity?!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=127&&(u=c.velocity):!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=1&&(u=127*c.velocity),this._convertNoteToArray(o).forEach((function(l){s.toMIDIChannels(a).forEach((function(h){this.send((s.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(h-1),[l,Math.round(u)],this._parseTimeParameter(c.time))}).bind(this))}).bind(this)),this},i.prototype.playNote=function(o,a,c){var u,l=64;if((c=c||{}).rawVelocity?!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=127&&(l=c.velocity):!isNaN(c.velocity)&&0<=c.velocity&&c.velocity<=1&&(l=127*c.velocity),u=this._parseTimeParameter(c.time),this._convertNoteToArray(o).forEach((function(m){s.toMIDIChannels(a).forEach((function(p){this.send((s.MIDI_CHANNEL_MESSAGES.noteon<<4)+(p-1),[m,Math.round(l)],u)}).bind(this))}).bind(this)),!isNaN(c.duration)){c.duration<=0&&(c.duration=0);var h=64;c.rawVelocity?!isNaN(c.release)&&0<=c.release&&c.release<=127&&(h=c.release):!isNaN(c.release)&&0<=c.release&&c.release<=1&&(h=127*c.release),this._convertNoteToArray(o).forEach((function(m){s.toMIDIChannels(a).forEach((function(p){this.send((s.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(p-1),[m,Math.round(h)],(u||s.time)+c.duration)}).bind(this))}).bind(this))}return this},i.prototype.sendKeyAftertouch=function(o,a,c,u){var l=this;if(u=u||{},a<1||16<a)throw new RangeError("The channel must be between 1 and 16.");(isNaN(c)||c<0||1<c)&&(c=.5);var h=Math.round(127*c);return this._convertNoteToArray(o).forEach(function(m){s.toMIDIChannels(a).forEach(function(p){l.send((s.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(p-1),[m,h],l._parseTimeParameter(u.time))})}),this},i.prototype.sendControlChange=function(o,a,c,u){if(u=u||{},typeof o=="string"){if((o=s.MIDI_CONTROL_CHANGE_MESSAGES[o])===void 0)throw new TypeError("Invalid controller name.")}else if(!(0<=(o=Math.floor(o))&&o<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(a=Math.floor(a)||0)&&a<=127))throw new RangeError("Controller value must be between 0 and 127.");return s.toMIDIChannels(c).forEach((function(l){this.send((s.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(l-1),[o,a],this._parseTimeParameter(u.time))}).bind(this)),this},i.prototype._selectRegisteredParameter=function(o,a,c){var u=this;if(o[0]=Math.floor(o[0]),!(0<=o[0]&&o[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(o[1]=Math.floor(o[1]),!(0<=o[1]&&o[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){u.sendControlChange(101,o[0],a,{time:c}),u.sendControlChange(100,o[1],a,{time:c})}),this},i.prototype._selectNonRegisteredParameter=function(o,a,c){var u=this;if(o[0]=Math.floor(o[0]),!(0<=o[0]&&o[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(o[1]=Math.floor(o[1]),!(0<=o[1]&&o[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){u.sendControlChange(99,o[0],a,{time:c}),u.sendControlChange(98,o[1],a,{time:c})}),this},i.prototype._setCurrentRegisteredParameter=function(o,a,c){var u=this;if((o=[].concat(o))[0]=Math.floor(o[0]),!(0<=o[0]&&o[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){u.sendControlChange(6,o[0],a,{time:c})}),o[1]=Math.floor(o[1]),0<=o[1]&&o[1]<=127&&s.toMIDIChannels(a).forEach(function(){u.sendControlChange(38,o[1],a,{time:c})}),this},i.prototype._deselectRegisteredParameter=function(o,a){var c=this;return s.toMIDIChannels(o).forEach(function(){c.sendControlChange(101,127,o,{time:a}),c.sendControlChange(100,127,o,{time:a})}),this},i.prototype.setRegisteredParameter=function(o,a,c,u){var l=this;if(u=u||{},!Array.isArray(o)){if(!s.MIDI_REGISTERED_PARAMETER[o])throw new Error("The specified parameter is not available.");o=s.MIDI_REGISTERED_PARAMETER[o]}return s.toMIDIChannels(c).forEach(function(){l._selectRegisteredParameter(o,c,u.time),l._setCurrentRegisteredParameter(a,c,u.time),l._deselectRegisteredParameter(c,u.time)}),this},i.prototype.setNonRegisteredParameter=function(o,a,c,u){var l=this;if(u=u||{},!(0<=o[0]&&o[0]<=127&&0<=o[1]&&o[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return a=[].concat(a),s.toMIDIChannels(c).forEach(function(){l._selectNonRegisteredParameter(o,c,u.time),l._setCurrentRegisteredParameter(a,c,u.time),l._deselectRegisteredParameter(c,u.time)}),this},i.prototype.incrementRegisteredParameter=function(o,a,c){var u=this;if(c=c||{},!Array.isArray(o)){if(!s.MIDI_REGISTERED_PARAMETER[o])throw new Error("The specified parameter is not available.");o=s.MIDI_REGISTERED_PARAMETER[o]}return s.toMIDIChannels(a).forEach(function(){u._selectRegisteredParameter(o,a,c.time),u.sendControlChange(96,0,a,{time:c.time}),u._deselectRegisteredParameter(a,c.time)}),this},i.prototype.decrementRegisteredParameter=function(o,a,c){if(c=c||{},!Array.isArray(o)){if(!s.MIDI_REGISTERED_PARAMETER[o])throw new TypeError("The specified parameter is not available.");o=s.MIDI_REGISTERED_PARAMETER[o]}return s.toMIDIChannels(a).forEach((function(){this._selectRegisteredParameter(o,a,c.time),this.sendControlChange(97,0,a,{time:c.time}),this._deselectRegisteredParameter(a,c.time)}).bind(this)),this},i.prototype.setPitchBendRange=function(o,a,c,u){var l=this;if(u=u||{},!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(a=Math.floor(a)||0)&&a<=127))throw new RangeError("The cents value must be between 0 and 127");return s.toMIDIChannels(c).forEach(function(){l.setRegisteredParameter("pitchbendrange",[o,a],c,{time:u.time})}),this},i.prototype.setModulationRange=function(o,a,c,u){var l=this;if(u=u||{},!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(a=Math.floor(a)||0)&&a<=127))throw new RangeError("The cents value must be between 0 and 127");return s.toMIDIChannels(c).forEach(function(){l.setRegisteredParameter("modulationrange",[o,a],c,{time:u.time})}),this},i.prototype.setMasterTuning=function(o,a,c){var u=this;if(c=c||{},(o=parseFloat(o)||0)<=-65||64<=o)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var l=Math.floor(o)+64,h=o-Math.floor(o),m=(h=Math.round((h+1)/2*16383))>>7&127,p=127&h;return s.toMIDIChannels(a).forEach(function(){u.setRegisteredParameter("channelcoarsetuning",l,a,{time:c.time}),u.setRegisteredParameter("channelfinetuning",[m,p],a,{time:c.time})}),this},i.prototype.setTuningProgram=function(o,a,c){var u=this;if(c=c||{},!(0<=(o=Math.floor(o))&&o<=127))throw new RangeError("The program value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){u.setRegisteredParameter("tuningprogram",o,a,{time:c.time})}),this},i.prototype.setTuningBank=function(o,a,c){var u=this;if(c=c||{},!(0<=(o=Math.floor(o)||0)&&o<=127))throw new RangeError("The bank value must be between 0 and 127");return s.toMIDIChannels(a).forEach(function(){u.setRegisteredParameter("tuningbank",o,a,{time:c.time})}),this},i.prototype.sendChannelMode=function(o,a,c,u){if(u=u||{},typeof o=="string"){if(!(o=s.MIDI_CHANNEL_MODE_MESSAGES[o]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(o=Math.floor(o))&&o<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((a=Math.floor(a)||0)<0||127<a)throw new RangeError("Value must be an integer between 0 and 127.");return s.toMIDIChannels(c).forEach((function(l){this.send((s.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(l-1),[o,a],this._parseTimeParameter(u.time))}).bind(this)),this},i.prototype.sendProgramChange=function(o,a,c){var u=this;if(c=c||{},o=Math.floor(o),isNaN(o)||o<0||127<o)throw new RangeError("Program numbers must be between 0 and 127.");return s.toMIDIChannels(a).forEach(function(l){u.send((s.MIDI_CHANNEL_MESSAGES.programchange<<4)+(l-1),[o],u._parseTimeParameter(c.time))}),this},i.prototype.sendChannelAftertouch=function(o,a,c){var u=this;c=c||{},o=parseFloat(o),(isNaN(o)||o<0||1<o)&&(o=.5);var l=Math.round(127*o);return s.toMIDIChannels(a).forEach(function(h){u.send((s.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(h-1),[l],u._parseTimeParameter(c.time))}),this},i.prototype.sendPitchBend=function(o,a,c){var u=this;if(c=c||{},isNaN(o)||o<-1||1<o)throw new RangeError("Pitch bend value must be between -1 and 1.");var l=Math.round((o+1)/2*16383),h=l>>7&127,m=127&l;return s.toMIDIChannels(a).forEach(function(p){u.send((s.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(p-1),[m,h],u._parseTimeParameter(c.time))}),this},i.prototype._parseTimeParameter=function(o){var a,c=parseFloat(o);return typeof o=="string"&&o.substring(0,1)==="+"?c&&0<c&&(a=s.time+c):c>s.time&&(a=c),a},i.prototype._convertNoteToArray=function(o){var a=[];return Array.isArray(o)||(o=[o]),o.forEach(function(c){a.push(s.guessNoteNumber(c))}),a},n.exports?n.exports=s:e.WebMidi||(e.WebMidi=s)})(kw)}(ni)),ni.exports}var Ew=Iw();const Us=Fm(Ew);var Cl=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):r(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class At extends Sw.EventEmitter{constructor(e="all"){super(),this.deviceId=e,At.enabled().then(()=>{Us.addListener("connected",t=>{t.port.type==="input"&&this._addListeners(t.port)}),Us.addListener("disconnected",t=>{this._removeListeners(t.port)}),Us.inputs.forEach(t=>this._addListeners(t))})}_addListeners(e){At.connectedDevices.has(e.id)||(At.connectedDevices.set(e.id,e),this.emit("connect",this._inputToDevice(e)),e.addListener("noteon","all",t=>{(this.deviceId==="all"||this.deviceId===e.id)&&this.emit("keyDown",{note:`${t.note.name}${t.note.octave}`,midi:t.note.number,velocity:t.velocity,device:this._inputToDevice(e)})}),e.addListener("noteoff","all",t=>{(this.deviceId==="all"||this.deviceId===e.id)&&this.emit("keyUp",{note:`${t.note.name}${t.note.octave}`,midi:t.note.number,velocity:t.velocity,device:this._inputToDevice(e)})}),e.addListener("controlchange","all",t=>{(this.deviceId==="all"||this.deviceId===e.id)&&t.controller.name==="holdpedal"&&this.emit(t.value?"pedalDown":"pedalUp",{device:this._inputToDevice(e)})}))}_inputToDevice(e){return{name:e.name,id:e.id,manufacturer:e.manufacturer}}_removeListeners(e){if(At.connectedDevices.has(e.id)){const t=At.connectedDevices.get(e.id);this.emit("disconnect",this._inputToDevice(t)),At.connectedDevices.delete(e.id),t.removeListener("noteon"),t.removeListener("noteoff"),t.removeListener("controlchange")}}emit(e,t){return super.emit(e,t)}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}off(e,t){return super.off(e,t),this}static enabled(){return Cl(this,void 0,void 0,function*(){At._isEnabled||(yield new Promise((e,t)=>{Us.enable(s=>{s?t(s):(At._isEnabled=!0,e())})}))})}static getDevices(){return Cl(this,void 0,void 0,function*(){return yield At.enabled(),Us.inputs})}}At.connectedDevices=new Map;At._isEnabled=!1;const pf=Qp("bpm",()=>{const n=Ge(null),e=Ge(.5);return{bps:n,volume:e}});class Cw{constructor(e){he(this,"pendingOffsets",new Map);he(this,"now",0);this.piano=e,this.piano=e}playNote(e,t,s,r){this.pendingOffsets.has(t)&&this.piano.keyUp({midi:t,time:r}),this.piano.keyDown({midi:t,velocity:s/127,time:e}),this.pendingOffsets.set(t,r)}playNoteImmediate(e,t,s){this.pendingOffsets.has(e)&&this.piano.keyUp({midi:e}),this.piano.keyDown({midi:e,velocity:t/127}),this.pendingOffsets.set(e,this.now+s)}stopNote(e){this.piano.keyUp({midi:e.pitch}),this.pendingOffsets.delete(e.pitch)}update(e){for(const[t,s]of this.pendingOffsets.entries())e>s&&(this.piano.keyUp({midi:t}),this.pendingOffsets.delete(t));this.now=e}stop(e=!1){for(const[t,s]of this.pendingOffsets.entries())e?this.piano.keyUp({midi:t,time:Nv()+(s-this.now)}):this.piano.keyUp({midi:t}),this.pendingOffsets.delete(t)}}class Aw{constructor(){he(this,"piano");he(this,"time",null);he(this,"timeVersion",0);he(this,"isReady",Ge(!1));he(this,"playbackId",0);he(this,"notes",[]);he(this,"playing",!1);he(this,"startOffset",0);he(this,"gain");const e=new Pi({velocities:5,volume:{pedal:0,strings:0,keybed:-8,harmonics:0}});this.gain=new et(.3).toDestination(),e.disconnect(),e.chain(this.gain),e.load().then(()=>{console.log("Piano loaded"),this.isReady.value=!0}),this.piano=new Cw(e)}velTransform(e){return e}setVolume(e){this.gain.gain.value=e}isPlaying(){return this.playing}playNoteDown(e){this.piano&&this.piano.playNoteImmediate(e.pitch,this.velTransform(e.velocity),e.endTime-e.startTime)}playNoteUp(e){this.piano&&this.piano.stop()}start(e,t=0,s=()=>{}){this.notes=e.notes,this.startOffset=t,this.playing=!0,this.playbackId++;const r=this.playbackId,i=performance.now();this.notes.sort((u,l)=>u.startTime-l.startTime);const o=this.notes[this.notes.length-1].endTime;let a=0;for(;a<this.notes.length&&!(this.notes[a].startTime>=t);a++);const c=()=>{if(r!==this.playbackId)return;const u=(performance.now()-i)/1e3+this.startOffset;for(this.time=u,this.timeVersion++,this.piano.update(u);a<this.notes.length;a++){const l=this.notes[a];if(u>=l.startTime)this.piano.playNoteImmediate(l.pitch,this.velTransform(l.velocity),l.endTime-l.startTime),s(l);else break}if(u>o){this.stop();return}setTimeout(c,15)};return setTimeout(c,15),this.playbackId}stop(e=!1){var t;this.playing=!1,this.playbackId++,this.time=null,this.timeVersion++,(t=this.piano)==null||t.stop(e)}}const Ze=new Aw,Mw=["onKeydown"],Nw={class:"controls"},Ow=["disabled"],Rw={key:0,class:"loading-overlay"},Dw=On({__name:"PianorollEditor",props:{editable:{type:Boolean,default:!1},minPitch:{default:0},maxPitch:{default:127}},emits:["edit","transform","save"],setup(n,{expose:e,emit:t}){const s=n,r=t,i=Ge(null);let o=null,a=10,c=10,u=10,l=10,h=3,m=Ge(new Js),p=0,y=null,b=null;const w=Ge(!1),S=s.maxPitch-s.minPitch+1,O=Ge(null);let F=!1;const I=Ge(!1);let _=[],k=null;const T=()=>k??m.value.bps;class x{constructor(N){he(this,"_note");const H=m.value.getNoteAt(J(N.clientX),ee(N.clientY));H?this._note=H:(this._note=X(J(N.clientX),ee(N.clientY)),m.value.addNote(this._note),r("edit",[this._note],[]),q()),Ze.playNoteDown({pitch:this._note.pitch,velocity:this._note.velocity,endTime:0,startTime:0})}get note(){return this._note}mouseDown(N){D()}mouseMove(N){m.value.removeNote(this._note);const H=X(J(N.clientX),ee(N.clientY),this._note.velocity);m.value.addNote(H),H.pitch!==this._note.pitch&&(Ze.playNoteUp({pitch:this._note.pitch,endTime:1,startTime:0,velocity:0}),Ze.playNoteDown({pitch:H.pitch,velocity:H.velocity,endTime:0,startTime:0})),r("edit",[H],[this._note]),q(),this._note=H,D()}mouseUp(N){Ze.playNoteUp({pitch:this._note.pitch,endTime:1,startTime:0,velocity:0})}}class L{mouseDown(N){const H=m.value.getNoteAt(J(N.clientX),ee(N.clientY));H&&(m.value.removeNote(H),D(),r("edit",[],[H]),q())}mouseMove(N){const H=m.value.getNoteAt(J(N.clientX),ee(N.clientY));H&&(m.value.removeNote(H),D(),r("edit",[],[H]),q())}mouseUp(N){}}class P{constructor(){he(this,"_wasPlaying",!1)}mouseDown(N){w.value&&(vt(),this._wasPlaying=!0),p=Math.max(-2,J(N.clientX)),E(),D()}mouseMove(N){p=Math.max(-2,J(N.clientX)),E(),D()}mouseUp(N){this._wasPlaying&&rt()}}const q=()=>{if(!w.value)return;const M=[];for(const N of m.value.getNotes())M.push({pitch:N.pitch,startTime:N.onset/T(),endTime:(N.onset+N.duration)/T(),velocity:N.velocity});Ze.stop(!0),se=Ze.start({notes:M},p/T()+.1)},D=(M=!0)=>{if(!m||!o||!i.value)return;(c!=a||l!=u)&&(M&&r("transform",{scaleX:a,shiftX:u}),c=a,l=u);let N=i.value.clientHeight,H=i.value.clientWidth;i.value.height=N,i.value.width=H,o.clearRect(0,0,H,N);const Z=["hsl(90, 60%, 20%)","hsl(180, 60%, 20%)","hsl(270, 60%, 20%)","hsl(45, 60%, 20%)","hsl(0, 60%, 20%)","hsl(135, 60%, 20%)","hsl(225, 60%, 20%)","hsl(315, 60%, 20%)"],Q=new Map;for(let B=0;B<_.length;B++){const ce=_[B].text[0];Q.has(ce)||Q.set(ce,Q.size%Z.length)}const re=10;for(let B=0;B<_.length;B++){const ce=_[B].beat,pe=B==_.length-1?m.value.duration:_[B+1].beat;o.beginPath(),o.fillStyle=Z[Q.get(_[B].text[0])??0],o.rect(Y(ce),N-re,Y(pe)-Y(ce),re),o.fill(),o.fillStyle="#FFFFFF",o.font="12px Arial",o.textAlign="left",o.fillText(_[B].text,Y(ce),N-re/2)}o.strokeStyle="#333333",o.fillStyle="white",o.font="14px Arial";let ue=Math.floor(G(0)*2)/2,g=Math.floor(G(H)*2)/2,f=.5,d=[[480,16],[300,8],[140,4],[80,2],[40,1]];for(const[B,ce]of d)if(g-ue>B){f=ce,ue=Math.floor(ue/f)*f,g=Math.floor(g/f)*f;break}ue=Math.max(ue,0);for(let B=ue;B<=g;B+=f)B%4==0?o.strokeStyle="#444444":B%1==0?o.strokeStyle="#252525":o.strokeStyle="#151515",o.beginPath(),o.moveTo(Y(B),0),o.lineTo(Y(B),N),o.stroke(),o.fillStyle="#aaaaaa",B%4==0&&o.fillText((B/4+1).toString(),Y(B)+5,15);const v=Math.max(0,-u),A=H/a-u;for(const B of m.value.getNotesBetween(v,A)){const ce=B.pitch%12*30/180*Math.PI;let pe=Math.pow(B.velocity/127,2)*128;o.beginPath(),o.roundRect((B.onset+u)*a+h,ae(B.pitch),B.duration*a-2*h,N/S,1);const _e=Math.max(.2,1.1-B.velocity/127);o.globalAlpha=.2,o.fillStyle=Sl(pe,Math.cos(ce)*128*_e,Math.sin(ce)*128*_e),o.fill(),o.beginPath();let ke=N/S*Math.exp(B.velocity/127*1.6-.4);o.rect((B.onset+u)*a,ae(B.pitch)+N/S/2-ke/2,N/S,ke),o.globalAlpha=1,o.fillStyle=Sl(pe,Math.cos(ce)*128,Math.sin(ce)*128),o.fill()}const V=10;o.strokeStyle=I.value?"#55FF00":"#FFFFFF88";for(let B=0;B<(w.value?V:1);B++)o.beginPath(),o.globalAlpha=Math.exp(-B/(V/3)),o.moveTo(ne()-B,0),o.lineTo(ne()-B,N),o.stroke();if(o.globalAlpha=1,b instanceof x){o.fillStyle="#FFFFFF",o.font="12px Arial",o.textAlign="left";const B=K(b.note.pitch);o.fillText(B,Y(b.note.onset),ae(b.note.pitch)-30)}},X=(M,N,H=80,Z=.125)=>{M=Math.round(M/Z)*Z,M<0&&(M=0);const Q=m.value.getNotesOnsetBetween(M,M-M%4+4);let re=-M%4+4;for(const ue of Q)ue.pitch===N&&(re=Math.min(re,ue.onset-M));return re=Math.max(Math.round(re/Z)*Z,Z),new ei(M,re,N,H)},K=M=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][M%12]+(Math.floor(M/12)-1),ne=()=>{let M=Y(p);return Math.min(Math.max(M,5),i.value.clientWidth)},Y=M=>M*a+u*a,G=M=>(M-u*a)/a,J=M=>G(M-i.value.getBoundingClientRect().left),ie=M=>M-i.value.getBoundingClientRect().left,ae=M=>(S-M+s.minPitch-1)/S*i.value.clientHeight,ee=M=>{let N=Math.ceil(S-(M-i.value.getBoundingClientRect().top)/i.value.clientHeight*S)+s.minPitch-1;return Math.max(Math.min(N,s.maxPitch),s.minPitch)},oe=M=>{if(!(!I.value&&!M.ctrlKey)){if(M.preventDefault(),M.ctrlKey){let N=(M.clientX-i.value.getBoundingClientRect().left)/a-u;a*=Math.exp(M.deltaY/-700),a=Math.max(a,4),u=(M.clientX-i.value.getBoundingClientRect().left)/a-N,u=Math.min(u,100/a),M.preventDefault()}else u-=.5*M.deltaY/a,u=Math.min(u,100/a);D()}},qe=M=>{const N=ne(),H=ie(M.clientX);M.buttons===1?Math.abs(N-H)<10||!s.editable?b=new P:s.editable&&(b=new x(M)):M.buttons===2&&s.editable&&(b=new L),b==null||b.mouseDown(M),F=!0},Ye=M=>{F&&(b==null||b.mouseMove(M))},fe=M=>{b==null||b.mouseUp(M),b=null,F=!1},be=M=>{var N;(N=M.dataTransfer)!=null&&N.types.includes("tool")&&M.preventDefault()},Me=()=>{w.value?Qe():rt()};let se=0;const rt=()=>{w.value=!0;const M=[];for(const Q of m.value.getNotes())M.push({pitch:Q.pitch,startTime:Q.onset/T(),endTime:(Q.onset+Q.duration)/T(),velocity:Q.velocity});const N={notes:M};Ze.isPlaying()&&Ze.stop();const H=Q=>{let re=Q.startTime*T();re!==p&&(p=re)};se=Ze.start(N,p/T(),H),Ze.time=p/T(),console.log("playing",Ze.time,N),Ze.timeVersion++;const Z=Date.now();Ze.timeVersion,y=setInterval(()=>{if(Ze.playbackId!==se){vt();return}Date.now()-Z>0&&(p+=.02*T(),E()),D()},20)},Qe=()=>{console.log("stopping"),y&&(clearInterval(y),y=null),se===Ze.playbackId&&Ze.stop(),w.value=!1},vt=()=>{w.value&&Qe()},E=()=>{const M=Math.min(i.value.clientWidth*.2,200),N=Math.min(Math.max(M*.2,ne()),i.value.clientWidth-M);u+=(N-ne())/a},C=()=>{const M=m.value.toMidi().toArray(),N=new Blob([M],{type:"audio/midi"}),H=URL.createObjectURL(N),Z=document.createElement("a");Z.href=H,Z.download="edited_midi.mid",Z.click(),URL.revokeObjectURL(H),r("save")},$=async M=>{vt(),p=0,u=10;const N=await fetch(M);if(!N.ok)throw R(),new Error(`Failed to fetch MIDI file: ${N.statusText}`);const H=await N.arrayBuffer();m.value=new Js(H),_=[];const Z=new jn(H);for(const Q of Z.header.meta)Q.type==="marker"&&_.push({beat:Q.ticks/Z.header.ppq,text:Q.text});console.log(_),D()},R=()=>{m.value=new Js,D()},U=()=>{var M;Me(),(M=O.value)==null||M.focus()};Gi(()=>{var M;i.value&&(o=i.value.getContext("2d")),D(),r("transform",{scaleX:a,shiftX:u}),(M=O.value)==null||M.focus(),document.addEventListener("mousemove",Ye),document.addEventListener("mouseup",fe)}),ya(()=>{vt()}),xn(m,M=>{D()});function W(M,N=!0){a=M.scaleX,u=M.shiftX,D(N)}function z(M){k=M,q()}function j(){var M;(M=O.value)==null||M.focus()}return e({loadMidiFile:$,transform:W,setBps:z,focus:j}),(M,N)=>(Oe(),Ve("div",{class:"pianoroll-editor",tabindex:"0",onKeydown:$p(Fs(Me,["prevent"]),["space"]),onFocus:N[1]||(N[1]=H=>{I.value=!0,D()}),onBlur:N[2]||(N[2]=H=>{I.value=!1,D()}),onWheel:oe,ref_key:"editorDiv",ref:O},[we("canvas",{class:"pianoroll-canvas",ref_key:"pianorollCanvas",ref:i,onDragover:be,onMousedown:qe,onContextmenu:N[0]||(N[0]=Fs(()=>{},["prevent"]))},null,544),we("div",Nw,[we("button",{class:"control-btn",onClick:Fs(U,["prevent"]),disabled:!ps(Ze).isReady},Ut(ps(Ze).isReady.value?w.value?"⏹":"▶":"Loading soundfont..."),9,Ow),we("button",{class:"control-btn",onClick:Fs(C,["prevent"])},"💾"),M.editable?(Oe(),Ve("button",{key:0,class:"control-btn",onClick:Fs(R,["prevent"])},"🗑️")):sr("",!0)]),ps(Ze).isReady.value?sr("",!0):(Oe(),Ve("div",Rw,N[3]||(N[3]=[vs(" Loading soundfont..."),we("br",null,null,-1),vs(" May take a while on first load. ")])))],40,Mw))}}),pn=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},mf=pn(Dw,[["__scopeId","data-v-e133beb9"]]),Pw={class:"header-container"},Fw={class:"title"},Bw={class:"subtitle"},Lw={class:"links"},Vw={href:"https://github.com/eri24816/Midi-Demo-Page",target:"_blank",class:"link"},Uw={height:"20",width:"20",viewBox:"0 0 16 16",fill:"currentColor",style:{"vertical-align":"middle","margin-right":"6px"}},$w=On({__name:"HeaderComp",props:{title:{},description:{}},setup(n){return(e,t)=>(Oe(),Ve("div",Pw,[we("h1",Fw,Ut(e.title),1),we("p",Bw,Ut(e.description),1),we("div",Lw,[we("a",Vw,[(Oe(),Ve("svg",Uw,t[0]||(t[0]=[we("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"},null,-1)]))),t[1]||(t[1]=vs(" Fork me on GitHub "))])])]))}}),qw=pn($w,[["__scopeId","data-v-2c321deb"]]),Ww={class:"tab-switcher"},jw={class:"file-list"},Gw={class:"sort-controls"},Hw=["title"],zw=["onClick","id"],Yw={class:"content"},Zw=On({__name:"TabSwitcher",props:{files:{},selectedFile:{}},emits:["select","click"],setup(n,{expose:e,emit:t}){const s=n,r=t,i=Ge(!0),o=Ge(s.selectedFile),a=Zi(()=>{const h=[...s.files].sort();return i.value?h:h.reverse()}),c=()=>{i.value=!i.value},u=h=>{o.value=h,r("select",h),r("click",h)},l=()=>{s.files.length>0&&u(s.files[0])};return Gi(()=>{r("select",s.selectedFile);const h=document.getElementById(s.selectedFile);h&&h.scrollIntoView({behavior:"smooth"})}),e({selectFile:u,selectFirstFile:l}),(h,m)=>(Oe(),Ve("div",Ww,[we("div",jw,[we("div",Gw,[we("button",{class:"sort-btn",onClick:c,title:i.value?"Sort Descending":"Sort Ascending"}," sort by name "+Ut(i.value?"↓":"↑"),9,Hw)]),(Oe(!0),Ve(mt,null,ba(a.value,p=>(Oe(),Ve("button",{key:p,class:br(["file-btn",{active:o.value===p}]),onClick:y=>u(p),id:p},Ut(p),11,zw))),128))]),we("div",Yw,[Ed(h.$slots,"default",{},void 0)])]))}}),Al=pn(Zw,[["__scopeId","data-v-d279ce9d"]]),Xw={class:"editor-group"},Kw={class:"editor-title"},Jw=On({__name:"EditorGroup",props:{names:{}},emits:["focus"],setup(n,{expose:e,emit:t}){const s=n,r=t;function i(l){o.value.forEach(h=>{h.setBps(l)})}const o=Ge([]),a=async(l,h)=>{const m=s.names.indexOf(l);try{await o.value[m].loadMidiFile(h)}catch(p){console.error(`Failed to load MIDI file for ${l}:`,p)}},c=(l,h)=>{h!==-1&&o.value.forEach((m,p)=>{p!==h&&m.transform(l,!1)})};function u(){var l;(l=o.value[0])==null||l.focus()}return e({loadMidiFile:a,setBps:i,focus:u}),(l,h)=>(Oe(),Ve("div",Xw,[(Oe(!0),Ve(mt,null,ba(l.names,(m,p)=>(Oe(),Ve("div",{key:m,class:"editor-container"},[we("h3",Kw,Ut(m),1),Xe(mf,{ref_for:!0,ref_key:"editors",ref:o,class:"editor",minPitch:21,maxPitch:108,onTransform:y=>c(y,p),onFocus:()=>r("focus",m)},null,8,["onTransform","onFocus"])]))),128))]))}}),Qw=pn(Jw,[["__scopeId","data-v-7c220ba7"]]),e1={},t1={class:"footer"};function n1(n,e){return Oe(),Ve("footer",t1,e[0]||(e[0]=[we("p",null,[vs(" Created by "),we("a",{href:"https://github.com/eri24816",target:"_blank"},"eri24816"),vs(" while waiting his music generation AI to be trained. ")],-1)]))}const s1=pn(e1,[["render",n1],["__scopeId","data-v-4bb00afa"]]),r1={class:"slider-container"},i1={class:"slider-header"},o1={key:0},a1=["min","max","value"],c1=On({__name:"NullableSlider",props:{modelValue:{},min:{},max:{},label:{},defaultValue:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,s=e,r=Ge(t.modelValue!==null),i=Ge(t.modelValue??t.defaultValue??t.min);function o(){r.value?s("update:modelValue",i.value):s("update:modelValue",null)}function a(c){const u=c.target;r.value=!0,i.value=Number(u.value),r.value&&s("update:modelValue",i.value)}return xn(()=>t.modelValue,c=>{c!==null?(i.value=c,r.value=!0):r.value=!1},{immediate:!0}),(c,u)=>(Oe(),Ve("div",r1,[we("div",i1,[c.label?(Oe(),Ve("label",o1,Ut(c.label),1)):sr("",!0),fd(we("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=l=>r.value=l),onChange:o},null,544),[[Fp,r.value]])]),we("input",{type:"range",min:c.min,max:c.max,value:i.value,onInput:a},null,40,a1),we("div",{class:br(["slider-value",{disabled:!r.value}])},Ut(r.value?i.value:"Unset"),3)]))}}),l1=pn(c1,[["__scopeId","data-v-3e0a37b5"]]),u1={class:"slider-container"},h1={class:"slider-header"},f1={key:0},d1=["min","max","value","step"],p1={class:"slider-value"},m1=On({__name:"SliderComp",props:{modelValue:{},min:{},max:{},label:{},step:{}},emits:["update:modelValue"],setup(n,{emit:e}){const t=e;function s(r){const i=r.target;t("update:modelValue",Number(i.value))}return(r,i)=>(Oe(),Ve("div",u1,[we("div",h1,[r.label?(Oe(),Ve("label",f1,Ut(r.label),1)):sr("",!0)]),we("input",{type:"range",min:r.min,max:r.max,value:r.modelValue,onInput:s,step:r.step},null,40,d1),we("div",p1,Ut(r.modelValue),1)]))}}),g1=pn(m1,[["__scopeId","data-v-ca9cb339"]]),_1={class:"settings-panel"},y1={class:"setting-item"},b1={class:"setting-item"},v1=On({__name:"SettingsPanel",setup(n){const e=pf(),t=Zi({get:()=>e.bps?Math.round(e.bps*60):null,set:s=>e.bps=s?s/60:null});return(s,r)=>(Oe(),Ve("div",_1,[we("div",y1,[r[2]||(r[2]=we("label",null,"BPM",-1)),Xe(l1,{min:40,max:240,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value=i)},null,8,["modelValue"])]),we("div",b1,[r[3]||(r[3]=we("label",null,"Volume",-1)),Xe(g1,{modelValue:ps(e).volume,"onUpdate:modelValue":r[1]||(r[1]=i=>ps(e).volume=i),min:0,max:1,step:.01},null,8,["modelValue"])])]))}}),w1=pn(v1,[["__scopeId","data-v-efef3f24"]]),x1={class:"app"},T1=["innerHTML","id"],S1=["innerHTML"],k1={key:1,class:"section-content"},I1={key:2,class:"section-content"},E1=On({__name:"App",setup(n){const e=Ge({}),t=Ge({}),s=Ge({});let r=!1;const i=(_,k,T)=>{console.log("dictRefCallback",_,k,T),_?k[T]=_:delete k[T]};function o(_){return!("groupMembers"in _)}const a=Ge([]);function c(_,k,T){if(console.log("updateUrlFragment",_,k,T),!r)return;const x=new URLSearchParams;x.set("section",_),x.set("item",k),window.location.hash=x.toString()}function u(_,k,T){console.log("handleFileSelect",_,k,T);let x;x=`resource/${k}/${_}`,t.value[k].loadMidiFile(x),s.value[k]=_}function l(_,k,T){c(_,k,T)}async function h(_,k){if(a.value.indexOf(k)===-1)return;const x=t.value[k.sectionName];if(x){for(const L of k.groupMembers){const P=`resource/${k.sectionName}/${L}/${_}`;await x.loadMidiFile(L,P)}s.value[k.sectionName]=_}}let m=null;async function p(_){return m[_]}function y(_){return _.replace(/^.*_(\d+)\.mid$/,"$1")}const b=Ge({title:"",description:"",sections:[]}),w=Ge({});function S(_){return Se(_,{breaks:!0})}const O=pf();xn(()=>O.bps,_=>{for(const k of Object.values(t.value))k.setBps(_)}),Gi(async()=>{m=await fetch("resource/list.json").then(D=>D.json());const _=await fetch("resource/settings.json");if(_.ok){const D=await _.json();b.value=D}for(const D of b.value.sections)w.value[D.name]=D;const k=(await p(".")).dirs,T=new Map;for(const D of k)T.set(D,0);for(const D of b.value.sections)T.set(D.name,D.order);const x=k.sort((D,X)=>T.get(D)-T.get(X)),L=new URLSearchParams(window.location.hash.slice(1)),P=L.get("section"),q=L.get("item");for(const D of x){const X=await p(`${D}`);if(X.dirs.length>0){const K=X.dirs,ne=new Set;for(const Y of K)for(const G of(await p(`${D}/${Y}`)).files)ne.add(y(G));P&&q&&P==D?s.value[D]=q:s.value[D]=Array.from(ne)[0],a.value.push({sectionName:D,items:Array.from(ne),groupMembers:K})}else P&&q&&P==D?s.value[D]=q:s.value[D]=X.files[0],a.value.push({sectionName:D,items:X.files})}P&&q?F(()=>{const D=document.getElementById(P);D&&D.scrollIntoView({behavior:"smooth"});const X=t.value[P];X&&X.focus(),r=!0,window.addEventListener("hashchange",()=>{console.log("hashchange",window.location.hash);const K=new URLSearchParams(window.location.hash.slice(1)),ne=K.get("section"),Y=K.get("item");if(!ne||!Y)return;const G=document.getElementById(ne);G&&!G.getBoundingClientRect().top&&G.scrollIntoView({behavior:"smooth"});const J=e.value[ne];J&&J.selectFile(Y)})}):r=!0});function F(_){setTimeout(_,0)}function I(_){if(!_||!t.value[_.sectionName])return;const T=s.value[_.sectionName];T&&c(_.sectionName,T)}return xn(()=>O.volume,_=>{Ze.setVolume(_)}),(_,k)=>(Oe(),Ve("div",x1,[Xe(qw,{title:b.value.title,description:b.value.description},null,8,["title","description"]),(Oe(!0),Ve(mt,null,ba(a.value,T=>(Oe(),Ve("div",{class:"section",key:T.sectionName},[we("h2",{innerHTML:S(T.sectionName),id:T.sectionName},null,8,T1),w.value[T.sectionName]?(Oe(),Ve("p",{key:0,class:"section-description",innerHTML:S(w.value[T.sectionName].description)},null,8,S1)):sr("",!0),o(T)?(Oe(),Ve("div",k1,[Xe(Al,{files:T.items,onSelect:x=>u(x,T.sectionName),onClick:x=>l(T.sectionName,x),selectedFile:s.value[T.sectionName],ref_for:!0,ref:x=>i(x,e.value,T.sectionName)},{default:Do(()=>[Xe(mf,{ref_for:!0,ref:x=>i(x,t.value,T.sectionName),class:"editor",minPitch:21,maxPitch:108,editable:!1,onFocus:()=>I(T)},null,8,["onFocus"])]),_:2},1032,["files","onSelect","onClick","selectedFile"])])):(Oe(),Ve("div",I1,[Xe(Al,{files:T.items,onSelect:x=>h(x,T),onClick:x=>l(T.sectionName,x),selectedFile:s.value[T.sectionName],ref_for:!0,ref:x=>i(x,e.value,T.sectionName)},{default:Do(()=>[Xe(Qw,{ref_for:!0,ref:x=>i(x,t.value,T.sectionName),class:"editor-group",names:T.groupMembers,onFocus:()=>I(T)},null,8,["names","onFocus"])]),_:2},1032,["files","onSelect","onClick","selectedFile"])]))]))),128)),Xe(w1),Xe(s1)]))}}),C1=pn(E1,[["__scopeId","data-v-deb90df8"]]),gf=jp(C1);gf.use(zp());gf.mount("#app");
